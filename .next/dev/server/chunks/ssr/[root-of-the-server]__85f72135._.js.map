{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahendra.singh/myark/src/lib/firebase.ts"],"sourcesContent":["// Firebase configuration for MyArk\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getAnalytics, isSupported } from \"firebase/analytics\";\r\nimport { getStorage } from \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyAS6sSC9lakDPTcz9OPQfo89tLkvcaX3rY\",\r\n    authDomain: \"myark-dbbee.firebaseapp.com\",\r\n    projectId: \"myark-dbbee\",\r\n    storageBucket: \"myark-dbbee.firebasestorage.app\",\r\n    messagingSenderId: \"1012733770035\",\r\n    appId: \"1:1012733770035:web:0fc2b6d5a627c05937e646\",\r\n    measurementId: \"G-DT3CW7GT1B\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\n// Initialize services\r\nexport const db = getFirestore(app);\r\nexport const auth = getAuth(app);\r\nexport const storage = getStorage(app);\r\n\r\n// Analytics (only in browser)\r\nexport const initAnalytics = async () => {\r\n    if (await isSupported()) {\r\n        return getAnalytics(app);\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default app;\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA,mCAAmC;AACnC;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;AAEA,MAAM,iBAAiB;IACnB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACnB;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,iLAAa,EAAC;AAGnB,MAAM,KAAK,IAAA,iLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,yMAAO,EAAC;AACrB,MAAM,UAAU,IAAA,kMAAU,EAAC;AAG3B,MAAM,gBAAgB;IACzB,IAAI,MAAM,IAAA,qLAAW,KAAI;QACrB,OAAO,IAAA,sLAAY,EAAC;IACxB;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahendra.singh/myark/src/lib/firestore.ts"],"sourcesContent":["// Firestore service for admin operations\r\nimport {\r\n    collection,\r\n    doc,\r\n    getDocs,\r\n    getDoc,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    query,\r\n    where,\r\n    orderBy,\r\n    limit,\r\n    Timestamp,\r\n    onSnapshot,\r\n    increment,\r\n    type DocumentData,\r\n    type QueryConstraint,\r\n    arrayUnion,\r\n    arrayRemove,\r\n    documentId,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"./firebase\";\r\nexport { db };\r\n\r\nimport type {\r\n    Opportunity,\r\n    BlogPost,\r\n    Career,\r\n    Student,\r\n    SchoolDemo,\r\n    Notification,\r\n    OpportunityTypeConfig,\r\n    Organizer,\r\n    Badge,\r\n    RedemptionReward,\r\n    RedemptionPartner\r\n} from \"@/types/admin\";\r\n\r\n// Collection names\r\nexport const COLLECTIONS = {\r\n    opportunities: \"opportunities\",\r\n    blogs: \"blogs\",\r\n    careers: \"careers\",\r\n    students: \"students\",\r\n    schoolDemos: \"schoolDemos\",\r\n    notifications: \"notifications\",\r\n    badges: \"badges\",\r\n    settings: \"settings\",\r\n    organizers: \"organizers\",\r\n} as const;\r\n\r\n// Helper to convert Firestore timestamp to Date\r\nexport const toDate = (timestamp: Timestamp | Date | undefined): Date | undefined => {\r\n    if (!timestamp) return undefined;\r\n    if (timestamp instanceof Timestamp) return timestamp.toDate();\r\n    return timestamp;\r\n};\r\n\r\n// Helper to convert Date to Firestore timestamp\r\nconst toTimestamp = (date: any): Timestamp | null => {\r\n    if (!date) return null;\r\n    if (date instanceof Timestamp) return date;\r\n    try {\r\n        const d = new Date(date);\r\n        return isNaN(d.getTime()) ? null : Timestamp.fromDate(d);\r\n    } catch (e) {\r\n        return null;\r\n    }\r\n};\r\n\r\n// Sanitization helper to remove undefined values\r\nconst sanitizeData = (data: any) => {\r\n    const result: any = {};\r\n    Object.keys(data).forEach(key => {\r\n        if (data[key] !== undefined) {\r\n            result[key] = data[key];\r\n        }\r\n    });\r\n    return result;\r\n};\r\n\r\n// ============================================\r\n// OPPORTUNITIES\r\n// ============================================\r\n\r\nexport const opportunitiesService = {\r\n    async getAll(filters?: { type?: string; status?: string; limit?: number }) {\r\n        const constraints: QueryConstraint[] = [];\r\n\r\n        if (filters?.type && filters.type !== \"all\") {\r\n            constraints.push(where(\"type\", \"==\", filters.type));\r\n        }\r\n        if (filters?.status && filters.status !== \"all\") {\r\n            constraints.push(where(\"status\", \"==\", filters.status));\r\n        }\r\n        if (filters?.limit) {\r\n            constraints.push(limit(filters.limit));\r\n        }\r\n\r\n        const q = query(collection(db, COLLECTIONS.opportunities), ...constraints);\r\n        const snapshot = await getDocs(q);\r\n\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            dates: {\r\n                registrationStart: toDate(doc.data().dates?.registrationStart),\r\n                registrationEnd: toDate(doc.data().dates?.registrationEnd),\r\n                eventDate: toDate(doc.data().dates?.eventDate),\r\n            },\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        })) as Opportunity[];\r\n    },\r\n\r\n    async getById(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.opportunities, id);\r\n        const snapshot = await getDoc(docRef);\r\n        if (!snapshot.exists()) return null;\r\n\r\n        return {\r\n            id: snapshot.id,\r\n            ...snapshot.data(),\r\n            dates: {\r\n                registrationStart: toDate(snapshot.data().dates?.registrationStart),\r\n                registrationEnd: toDate(snapshot.data().dates?.registrationEnd),\r\n                eventDate: toDate(snapshot.data().dates?.eventDate),\r\n            },\r\n            createdAt: toDate(snapshot.data().createdAt),\r\n            updatedAt: toDate(snapshot.data().updatedAt),\r\n        } as Opportunity;\r\n    },\r\n\r\n    async create(data: Omit<Opportunity, \"id\" | \"createdAt\" | \"updatedAt\">) {\r\n        const sanitizedData = sanitizeData(data);\r\n        const docRef = await addDoc(collection(db, COLLECTIONS.opportunities), {\r\n            ...sanitizedData,\r\n            dates: {\r\n                registrationStart: toTimestamp(data.dates.registrationStart),\r\n                registrationEnd: toTimestamp(data.dates.registrationEnd),\r\n                eventDate: toTimestamp(data.dates.eventDate),\r\n            },\r\n            hypeCount: 0,\r\n            applicationCount: 0,\r\n            createdAt: Timestamp.now(),\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n        return docRef.id;\r\n    },\r\n\r\n    async update(id: string, data: Partial<Opportunity>) {\r\n        const docRef = doc(db, COLLECTIONS.opportunities, id);\r\n        const updateData: any = sanitizeData({\r\n            ...data,\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n\r\n        if (data.dates) {\r\n            updateData.dates = {\r\n                registrationStart: toTimestamp(data.dates.registrationStart),\r\n                registrationEnd: toTimestamp(data.dates.registrationEnd),\r\n                eventDate: toTimestamp(data.dates.eventDate),\r\n            };\r\n        }\r\n\r\n        await updateDoc(docRef, updateData);\r\n    },\r\n\r\n    async hypeOpportunity(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.opportunities, id);\r\n        await updateDoc(docRef, {\r\n            hypeCount: increment(1)\r\n        });\r\n    },\r\n\r\n    async shareOpportunity(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.opportunities, id);\r\n        await updateDoc(docRef, {\r\n            shareCount: increment(1)\r\n        });\r\n    },\r\n\r\n    async incrementView(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.opportunities, id);\r\n        await updateDoc(docRef, {\r\n            viewCount: increment(1)\r\n        });\r\n    },\r\n\r\n    async incrementApplication(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.opportunities, id);\r\n        await updateDoc(docRef, {\r\n            applicationCount: increment(1)\r\n        });\r\n    },\r\n\r\n    async delete(id: string) {\r\n        await deleteDoc(doc(db, COLLECTIONS.opportunities, id));\r\n    },\r\n\r\n    // Real-time listener\r\n    subscribe(callback: (opportunities: Opportunity[]) => void) {\r\n        const q = query(\r\n            collection(db, COLLECTIONS.opportunities),\r\n            where(\"status\", \"==\", \"published\"),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n\r\n        return onSnapshot(q, (snapshot) => {\r\n            const opportunities = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data(),\r\n                dates: {\r\n                    registrationStart: toDate(doc.data().dates?.registrationStart),\r\n                    registrationEnd: toDate(doc.data().dates?.registrationEnd),\r\n                    eventDate: toDate(doc.data().dates?.eventDate),\r\n                },\r\n                createdAt: toDate(doc.data().createdAt),\r\n                updatedAt: toDate(doc.data().updatedAt),\r\n            })) as Opportunity[];\r\n            callback(opportunities);\r\n        });\r\n    },\r\n};\r\n\r\n// ============================================\r\n// BLOGS\r\n// ============================================\r\n\r\nexport const blogsService = {\r\n    async getAll(filters?: { status?: string; limit?: number }) {\r\n        const constraints: QueryConstraint[] = [];\r\n\r\n        if (filters?.status && filters.status !== \"all\") {\r\n            constraints.push(where(\"status\", \"==\", filters.status));\r\n        }\r\n        if (filters?.limit) {\r\n            constraints.push(limit(filters.limit));\r\n        }\r\n\r\n        const q = query(collection(db, COLLECTIONS.blogs), ...constraints);\r\n        const snapshot = await getDocs(q);\r\n\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            publishedAt: toDate(doc.data().publishedAt),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        })) as BlogPost[];\r\n    },\r\n\r\n    async getById(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.blogs, id);\r\n        const snapshot = await getDoc(docRef);\r\n        if (!snapshot.exists()) return null;\r\n\r\n        return {\r\n            id: snapshot.id,\r\n            ...snapshot.data(),\r\n            publishedAt: toDate(snapshot.data().publishedAt),\r\n            createdAt: toDate(snapshot.data().createdAt),\r\n            updatedAt: toDate(snapshot.data().updatedAt),\r\n        } as BlogPost;\r\n    },\r\n\r\n    async getBySlug(slug: string) {\r\n        const q = query(collection(db, COLLECTIONS.blogs), where(\"slug\", \"==\", slug), limit(1));\r\n        const snapshot = await getDocs(q);\r\n        if (snapshot.empty) return null;\r\n\r\n        const doc = snapshot.docs[0];\r\n        return {\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            publishedAt: toDate(doc.data().publishedAt),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        } as BlogPost;\r\n    },\r\n\r\n    async create(data: Omit<BlogPost, \"id\" | \"createdAt\" | \"updatedAt\">) {\r\n        const docRef = await addDoc(collection(db, COLLECTIONS.blogs), {\r\n            ...data,\r\n            viewCount: 0,\r\n            publishedAt: data.status === \"published\" ? Timestamp.now() : null,\r\n            createdAt: Timestamp.now(),\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n        return docRef.id;\r\n    },\r\n\r\n    async update(id: string, data: Partial<BlogPost>) {\r\n        const docRef = doc(db, COLLECTIONS.blogs, id);\r\n        await updateDoc(docRef, sanitizeData({\r\n            ...data,\r\n            updatedAt: Timestamp.now(),\r\n        }));\r\n    },\r\n\r\n    async delete(id: string) {\r\n        await deleteDoc(doc(db, COLLECTIONS.blogs, id));\r\n    },\r\n};\r\n\r\n// ============================================\r\n// CAREERS\r\n// ============================================\r\n\r\nexport const careersService = {\r\n    async getAll(filters?: { status?: string; limit?: number }) {\r\n        const constraints: QueryConstraint[] = [orderBy(\"createdAt\", \"desc\")];\r\n\r\n        if (filters?.status && filters.status !== \"all\") {\r\n            constraints.push(where(\"status\", \"==\", filters.status));\r\n        }\r\n        if (filters?.limit) {\r\n            constraints.push(limit(filters.limit));\r\n        }\r\n\r\n        const q = query(collection(db, COLLECTIONS.careers), ...constraints);\r\n        const snapshot = await getDocs(q);\r\n\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            postedAt: toDate(doc.data().postedAt),\r\n            expiresAt: toDate(doc.data().expiresAt),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        })) as unknown as Career[];\r\n    },\r\n\r\n    async getById(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.careers, id);\r\n        const snapshot = await getDoc(docRef);\r\n        if (!snapshot.exists()) return null;\r\n\r\n        return {\r\n            id: snapshot.id,\r\n            ...snapshot.data(),\r\n            postedAt: toDate(snapshot.data().postedAt),\r\n            expiresAt: toDate(snapshot.data().expiresAt),\r\n            createdAt: toDate(snapshot.data().createdAt),\r\n            updatedAt: toDate(snapshot.data().updatedAt),\r\n        } as unknown as Career;\r\n    },\r\n\r\n    async getBySlug(slug: string) {\r\n        const q = query(collection(db, COLLECTIONS.careers), where(\"slug\", \"==\", slug), limit(1));\r\n        const snapshot = await getDocs(q);\r\n        if (snapshot.empty) return null;\r\n\r\n        const doc = snapshot.docs[0];\r\n        return {\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            postedAt: toDate(doc.data().postedAt),\r\n            expiresAt: toDate(doc.data().expiresAt),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        } as unknown as Career;\r\n    },\r\n\r\n    async create(data: Omit<Career, \"id\" | \"createdAt\" | \"updatedAt\">) {\r\n        const docRef = await addDoc(collection(db, COLLECTIONS.careers), {\r\n            ...data,\r\n            applicationCount: 0,\r\n            postedAt: Timestamp.now(),\r\n            createdAt: Timestamp.now(),\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n        return docRef.id;\r\n    },\r\n\r\n    async update(id: string, data: Partial<Career>) {\r\n        const docRef = doc(db, COLLECTIONS.careers, id);\r\n        await updateDoc(docRef, sanitizeData({\r\n            ...data,\r\n            updatedAt: Timestamp.now(),\r\n        }));\r\n    },\r\n\r\n    async delete(id: string) {\r\n        await deleteDoc(doc(db, COLLECTIONS.careers, id));\r\n    },\r\n};\r\n\r\n// ============================================\r\n// STUDENTS\r\n// ============================================\r\n\r\nexport const studentsService = {\r\n    async getAll(filters?: { grade?: number; limit?: number }) {\r\n        const constraints: QueryConstraint[] = [orderBy(\"createdAt\", \"desc\")];\r\n\r\n        if (filters?.grade) {\r\n            constraints.push(where(\"grade\", \"==\", filters.grade));\r\n        }\r\n        if (filters?.limit) {\r\n            constraints.push(limit(filters.limit));\r\n        }\r\n\r\n        const q = query(collection(db, COLLECTIONS.students), ...constraints);\r\n        const snapshot = await getDocs(q);\r\n\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            lastActiveAt: toDate(doc.data().lastActiveAt),\r\n        })) as Student[];\r\n    },\r\n\r\n    async getById(id: string) {\r\n        const docRef = doc(db, COLLECTIONS.students, id);\r\n        const snapshot = await getDoc(docRef);\r\n        if (!snapshot.exists()) return null;\r\n\r\n        return {\r\n            id: snapshot.id,\r\n            ...snapshot.data(),\r\n            createdAt: toDate(snapshot.data().createdAt),\r\n            lastActiveAt: toDate(snapshot.data().lastActiveAt),\r\n        } as Student;\r\n    },\r\n\r\n    async getStats() {\r\n        const snapshot = await getDocs(collection(db, COLLECTIONS.students));\r\n        const students = snapshot.docs.map(doc => doc.data());\r\n\r\n        const now = new Date();\r\n        const sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n\r\n        return {\r\n            total: students.length,\r\n            activeThisWeek: students.filter(s => {\r\n                const lastActive = toDate(s.lastActiveAt);\r\n                return lastActive && lastActive >= sevenDaysAgo;\r\n            }).length,\r\n            avgStreak: students.length > 0\r\n                ? Math.round(students.reduce((sum, s) => sum + (s.streakDays || 0), 0) / students.length)\r\n                : 0,\r\n        };\r\n    },\r\n\r\n    async assignBadge(studentId: string, badgeId: string) {\r\n        const docRef = doc(db, COLLECTIONS.students, studentId);\r\n        await updateDoc(docRef, {\r\n            badges: arrayUnion(badgeId),\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n    },\r\n\r\n    async removeBadge(studentId: string, badgeId: string) {\r\n        const docRef = doc(db, COLLECTIONS.students, studentId);\r\n        await updateDoc(docRef, {\r\n            badges: arrayRemove(badgeId),\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n    },\r\n};\r\n\r\n// ============================================\r\n// SCHOOL DEMOS\r\n// ============================================\r\n\r\nexport const schoolDemosService = {\r\n    async getAll(filters?: { status?: string }) {\r\n        const constraints: QueryConstraint[] = [orderBy(\"createdAt\", \"desc\")];\r\n\r\n        if (filters?.status && filters.status !== \"all\") {\r\n            constraints.push(where(\"status\", \"==\", filters.status));\r\n        }\r\n\r\n        const q = query(collection(db, COLLECTIONS.schoolDemos), ...constraints);\r\n        const snapshot = await getDocs(q);\r\n\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            scheduledDate: toDate(doc.data().scheduledDate),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        })) as SchoolDemo[];\r\n    },\r\n\r\n    async updateStatus(id: string, status: string, notes?: string) {\r\n        const docRef = doc(db, COLLECTIONS.schoolDemos, id);\r\n        await updateDoc(docRef, {\r\n            status,\r\n            notes: notes || null,\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n    },\r\n\r\n    async getCountByStatus() {\r\n        const snapshot = await getDocs(collection(db, COLLECTIONS.schoolDemos));\r\n        const counts: Record<string, number> = {\r\n            pending: 0,\r\n            contacted: 0,\r\n            scheduled: 0,\r\n            completed: 0,\r\n            rejected: 0,\r\n        };\r\n\r\n        snapshot.docs.forEach(doc => {\r\n            const status = doc.data().status;\r\n            if (counts[status] !== undefined) {\r\n                counts[status]++;\r\n            }\r\n        });\r\n\r\n        return counts;\r\n    },\r\n};\r\n\r\n// ============================================\r\n// NOTIFICATIONS\r\n// ============================================\r\n\r\nexport const notificationsService = {\r\n    async getAll() {\r\n        const q = query(\r\n            collection(db, COLLECTIONS.notifications),\r\n            orderBy(\"createdAt\", \"desc\")\r\n        );\r\n        const snapshot = await getDocs(q);\r\n\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            scheduledFor: toDate(doc.data().scheduledFor),\r\n            sentAt: toDate(doc.data().sentAt),\r\n            createdAt: toDate(doc.data().createdAt),\r\n        })) as Notification[];\r\n    },\r\n\r\n    async send(data: Omit<Notification, \"id\" | \"createdAt\" | \"sentAt\">) {\r\n        const docRef = await addDoc(collection(db, COLLECTIONS.notifications), sanitizeData({\r\n            ...data,\r\n            sentAt: Timestamp.now(),\r\n            createdAt: Timestamp.now(),\r\n        }));\r\n        return docRef.id;\r\n    },\r\n};\r\n\r\n// ============================================\r\n// SETTINGS\r\n// ============================================\r\n\r\nexport const settingsService = {\r\n    async getOpportunityTypes(): Promise<OpportunityTypeConfig[]> {\r\n        const docRef = doc(db, COLLECTIONS.settings, \"opportunityTypes\");\r\n        const snapshot = await getDoc(docRef);\r\n\r\n        if (!snapshot.exists()) {\r\n            // Return defaults if not set\r\n            return [];\r\n        }\r\n\r\n        return snapshot.data().types || [];\r\n    },\r\n\r\n    async saveOpportunityTypes(types: OpportunityTypeConfig[]) {\r\n        const docRef = doc(db, COLLECTIONS.settings, \"opportunityTypes\");\r\n        await updateDoc(docRef, { types });\r\n    },\r\n\r\n    async getGrades(): Promise<number[]> {\r\n        const docRef = doc(db, COLLECTIONS.settings, \"grades\");\r\n        const snapshot = await getDoc(docRef);\r\n\r\n        if (!snapshot.exists()) {\r\n            return [6, 7, 8, 9, 10, 11, 12]; // defaults\r\n        }\r\n\r\n        return snapshot.data().grades || [];\r\n    },\r\n\r\n    async saveGrades(grades: number[]) {\r\n        const docRef = doc(db, COLLECTIONS.settings, \"grades\");\r\n        await updateDoc(docRef, { grades });\r\n    },\r\n\r\n    async getTags(): Promise<string[]> {\r\n        const docRef = doc(db, COLLECTIONS.settings, \"tags\");\r\n        const snapshot = await getDoc(docRef);\r\n\r\n        if (!snapshot.exists()) {\r\n            return [];\r\n        }\r\n\r\n        return snapshot.data().tags || [];\r\n    },\r\n\r\n    async saveTags(tags: string[]) {\r\n        const docRef = doc(db, COLLECTIONS.settings, \"tags\");\r\n        await updateDoc(docRef, { tags });\r\n    },\r\n\r\n    async getOrganizers(): Promise<Organizer[]> {\r\n        const querySnapshot = await getDocs(collection(db, COLLECTIONS.organizers));\r\n        return querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        })) as Organizer[];\r\n    },\r\n\r\n    async saveOrganizer(data: Omit<Organizer, \"id\" | \"createdAt\" | \"updatedAt\">) {\r\n        const docRef = await addDoc(collection(db, COLLECTIONS.organizers), sanitizeData({\r\n            ...data,\r\n            createdAt: Timestamp.now(),\r\n            updatedAt: Timestamp.now(),\r\n        }));\r\n        return docRef.id;\r\n    },\r\n\r\n    async deleteOrganizer(id: string) {\r\n        await deleteDoc(doc(db, COLLECTIONS.organizers, id));\r\n    },\r\n};\r\n\r\n// ============================================\r\n// DASHBOARD STATS\r\n// ============================================\r\n\r\nexport const dashboardService = {\r\n    async getStats() {\r\n        const [opportunities, students, demos] = await Promise.all([\r\n            getDocs(collection(db, COLLECTIONS.opportunities)),\r\n            studentsService.getStats(),\r\n            schoolDemosService.getCountByStatus(),\r\n        ]);\r\n\r\n        const publishedOpportunities = opportunities.docs.filter(\r\n            doc => doc.data().status === \"published\"\r\n        ).length;\r\n\r\n        return {\r\n            totalOpportunities: opportunities.size,\r\n            publishedOpportunities,\r\n            totalStudents: students.total,\r\n            activeStudents: students.activeThisWeek,\r\n            pendingDemos: demos.pending,\r\n        };\r\n    },\r\n};\r\n\r\n// ============================================\r\n// BADGES\r\n// ============================================\r\n\r\nexport const badgesService = {\r\n    async getAll(): Promise<Badge[]> {\r\n        const q = query(collection(db, COLLECTIONS.badges), orderBy(\"createdAt\", \"desc\"));\r\n        const querySnapshot = await getDocs(q);\r\n        return querySnapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            createdAt: toDate(doc.data().createdAt),\r\n            updatedAt: toDate(doc.data().updatedAt),\r\n        })) as Badge[];\r\n    },\r\n\r\n    async getById(id: string): Promise<Badge | null> {\r\n        const docRef = doc(db, COLLECTIONS.badges, id);\r\n        const snapshot = await getDoc(docRef);\r\n        if (!snapshot.exists()) return null;\r\n        return {\r\n            id: snapshot.id,\r\n            ...snapshot.data(),\r\n            createdAt: toDate(snapshot.data().createdAt),\r\n            updatedAt: toDate(snapshot.data().updatedAt),\r\n        } as Badge;\r\n    },\r\n\r\n    async create(data: Omit<Badge, \"id\" | \"createdAt\" | \"updatedAt\">) {\r\n        const sanitizedData = sanitizeData(data);\r\n        const docRef = await addDoc(collection(db, COLLECTIONS.badges), {\r\n            ...sanitizedData,\r\n            createdAt: Timestamp.now(),\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n        return docRef.id;\r\n    },\r\n\r\n    async update(id: string, data: Partial<Badge>) {\r\n        const docRef = doc(db, COLLECTIONS.badges, id);\r\n        await updateDoc(docRef, {\r\n            ...sanitizeData(data),\r\n            updatedAt: Timestamp.now(),\r\n        });\r\n    },\r\n\r\n    async delete(id: string) {\r\n        await deleteDoc(doc(db, COLLECTIONS.badges, id));\r\n    },\r\n};\r\n// ============================================\r\n// REDEMPTION\r\n// ============================================\r\n\r\nexport const rewardsService = {\r\n    async getAll() {\r\n        // Fetch all active rewards\r\n        // REMOVED orderBy to avoid \"Missing Index\" error. Sorting client-side instead.\r\n        const q = query(collection(db, \"rewards\"), where(\"isActive\", \"==\", true));\r\n        const snapshot = await getDocs(q);\r\n\r\n        const rewards = snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            expiresAt: toDate(doc.data().expiresAt),\r\n            createdAt: toDate(doc.data().createdAt),\r\n        })) as RedemptionReward[];\r\n\r\n        return rewards.sort((a, b) => a.xpCost - b.xpCost);\r\n    },\r\n\r\n    async getPartners() {\r\n        const snapshot = await getDocs(collection(db, \"partners\"));\r\n        return snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n            createdAt: toDate(doc.data().createdAt),\r\n        })) as RedemptionPartner[];\r\n    },\r\n\r\n    async redeem(rewardId: string, studentId: string, xpCost: number) {\r\n        // 1. Deduct XP (handled by cloud function usually, but client-side for demo)\r\n        // 2. Add claim record\r\n        // This logic is ideally transactional\r\n\r\n        // Simulating claim:\r\n        const claimRef = await addDoc(collection(db, \"claims\"), {\r\n            rewardId,\r\n            studentId,\r\n            xpCost,\r\n            claimedAt: Timestamp.now(),\r\n            status: \"active\"\r\n        });\r\n\r\n        // Increment claim count on reward\r\n        const rewardRef = doc(db, \"rewards\", rewardId);\r\n        await updateDoc(rewardRef, {\r\n            claimCount: increment(1)\r\n        });\r\n\r\n        return claimRef.id;\r\n    }\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahendra.singh/myark/src/lib/seo.ts"],"sourcesContent":["import { Metadata } from 'next';\r\nimport { OpenGraph } from 'next/dist/lib/metadata/types/opengraph-types';\r\n\r\ninterface SEOConfig {\r\n    title: string;\r\n    description?: string;\r\n    image?: string;\r\n    url?: string;\r\n    type?: 'website' | 'article' | 'book' | 'profile';\r\n    keywords?: string[];\r\n    noIndex?: boolean;\r\n    publishedTime?: string;\r\n    modifiedTime?: string;\r\n    authors?: string[];\r\n}\r\n\r\nexport function constructMetadata({\r\n    title,\r\n    description = \"Discover scholarships, competitions, olympiads, and career opportunities tailored for students. Apply smart, don't miss out!\",\r\n    image = \"https://myark.in/og-image.png\",\r\n    url = \"https://myark.in\",\r\n    type = \"website\",\r\n    keywords = [\"scholarships\", \"competitions\", \"olympiads\", \"internships\", \"students\", \"career guide\", \"education\"],\r\n    noIndex = false,\r\n    publishedTime,\r\n    modifiedTime,\r\n    authors,\r\n}: SEOConfig): Metadata {\r\n    // Generate Myark-branded title following Gen Z strategy\r\n    const generateMyarkTitle = (baseTitle: string): string => {\r\n        // If it's the default/homepage title or \"Myark\"\r\n        const cleanBase = baseTitle.trim();\r\n        if (cleanBase === 'Myark' || cleanBase === 'Home' || cleanBase === 'Homepage') {\r\n            return 'Myark – Discover Scholarships, Olympiads & Student Opportunities (Classes 4–12)';\r\n        }\r\n\r\n        // Handle specific categories with Gen Z twist\r\n        const normalizedTitle = cleanBase.toLowerCase();\r\n\r\n        if (normalizedTitle.includes('scholarship')) {\r\n            return `Myark | Scholarships for Students – Apply Smart, Don't Miss Out`;\r\n        }\r\n        if (normalizedTitle.includes('olympiad')) {\r\n            return `Myark | Olympiads for Students – Prep, Apply & Level Up`;\r\n        }\r\n        if (normalizedTitle.includes('competition')) {\r\n            return `Myark | Student Competitions – Win, Learn & Build Your Profile`;\r\n        }\r\n        if (normalizedTitle.includes('workshop')) {\r\n            return `Myark | Workshops for Students – Discover, Learn & Level Up`;\r\n        }\r\n        if (normalizedTitle.includes('ai') || normalizedTitle.includes('coding') || normalizedTitle.includes('robotics')) {\r\n            return `Myark | AI, Coding & Robotics – Opportunities for Curious Students`;\r\n        }\r\n        if (normalizedTitle.includes('india')) {\r\n            return `Myark | Student Opportunities in India – Classes 4–12`;\r\n        }\r\n\r\n        // If it's an opportunity detail page, it might already have \"Myark |\" prefixed\r\n        if (cleanBase.startsWith('Myark')) return cleanBase;\r\n\r\n        // Default: Ensure it starts with Myark\r\n        return `Myark | ${cleanBase}`;\r\n    };\r\n\r\n    const fullTitle = generateMyarkTitle(title);\r\n\r\n    return {\r\n        title: fullTitle,\r\n        description,\r\n        keywords: keywords.join(', '),\r\n        openGraph: {\r\n            title: fullTitle,\r\n            description,\r\n            url,\r\n            siteName: 'Myark',\r\n            images: [\r\n                {\r\n                    url: image,\r\n                    width: 1200,\r\n                    height: 630,\r\n                    alt: fullTitle,\r\n                },\r\n            ],\r\n            type,\r\n            locale: 'en_US',\r\n            ...(publishedTime && { publishedTime }),\r\n            ...(modifiedTime && { modifiedTime }),\r\n            ...(authors && { authors }),\r\n        } as OpenGraph,\r\n        twitter: {\r\n            card: 'summary_large_image',\r\n            title: fullTitle,\r\n            description,\r\n            images: [image],\r\n            creator: '@myark_in',\r\n        },\r\n        robots: {\r\n            index: !noIndex,\r\n            follow: !noIndex,\r\n            googleBot: {\r\n                index: !noIndex,\r\n                follow: !noIndex,\r\n                'max-video-preview': -1,\r\n                'max-image-preview': 'large',\r\n                'max-snippet': -1,\r\n            },\r\n        },\r\n        alternates: {\r\n            canonical: url,\r\n        },\r\n        metadataBase: new URL('https://myark.in'),\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;AAgBO,SAAS,kBAAkB,EAC9B,KAAK,EACL,cAAc,8HAA8H,EAC5I,QAAQ,+BAA+B,EACvC,MAAM,kBAAkB,EACxB,OAAO,SAAS,EAChB,WAAW;IAAC;IAAgB;IAAgB;IAAa;IAAe;IAAY;IAAgB;CAAY,EAChH,UAAU,KAAK,EACf,aAAa,EACb,YAAY,EACZ,OAAO,EACC;IACR,wDAAwD;IACxD,MAAM,qBAAqB,CAAC;QACxB,gDAAgD;QAChD,MAAM,YAAY,UAAU,IAAI;QAChC,IAAI,cAAc,WAAW,cAAc,UAAU,cAAc,YAAY;YAC3E,OAAO;QACX;QAEA,8CAA8C;QAC9C,MAAM,kBAAkB,UAAU,WAAW;QAE7C,IAAI,gBAAgB,QAAQ,CAAC,gBAAgB;YACzC,OAAO,CAAC,+DAA+D,CAAC;QAC5E;QACA,IAAI,gBAAgB,QAAQ,CAAC,aAAa;YACtC,OAAO,CAAC,uDAAuD,CAAC;QACpE;QACA,IAAI,gBAAgB,QAAQ,CAAC,gBAAgB;YACzC,OAAO,CAAC,8DAA8D,CAAC;QAC3E;QACA,IAAI,gBAAgB,QAAQ,CAAC,aAAa;YACtC,OAAO,CAAC,2DAA2D,CAAC;QACxE;QACA,IAAI,gBAAgB,QAAQ,CAAC,SAAS,gBAAgB,QAAQ,CAAC,aAAa,gBAAgB,QAAQ,CAAC,aAAa;YAC9G,OAAO,CAAC,kEAAkE,CAAC;QAC/E;QACA,IAAI,gBAAgB,QAAQ,CAAC,UAAU;YACnC,OAAO,CAAC,qDAAqD,CAAC;QAClE;QAEA,+EAA+E;QAC/E,IAAI,UAAU,UAAU,CAAC,UAAU,OAAO;QAE1C,uCAAuC;QACvC,OAAO,CAAC,QAAQ,EAAE,WAAW;IACjC;IAEA,MAAM,YAAY,mBAAmB;IAErC,OAAO;QACH,OAAO;QACP;QACA,UAAU,SAAS,IAAI,CAAC;QACxB,WAAW;YACP,OAAO;YACP;YACA;YACA,UAAU;YACV,QAAQ;gBACJ;oBACI,KAAK;oBACL,OAAO;oBACP,QAAQ;oBACR,KAAK;gBACT;aACH;YACD;YACA,QAAQ;YACR,GAAI,iBAAiB;gBAAE;YAAc,CAAC;YACtC,GAAI,gBAAgB;gBAAE;YAAa,CAAC;YACpC,GAAI,WAAW;gBAAE;YAAQ,CAAC;QAC9B;QACA,SAAS;YACL,MAAM;YACN,OAAO;YACP;YACA,QAAQ;gBAAC;aAAM;YACf,SAAS;QACb;QACA,QAAQ;YACJ,OAAO,CAAC;YACR,QAAQ,CAAC;YACT,WAAW;gBACP,OAAO,CAAC;gBACR,QAAQ,CAAC;gBACT,qBAAqB,CAAC;gBACtB,qBAAqB;gBACrB,eAAe,CAAC;YACpB;QACJ;QACA,YAAY;YACR,WAAW;QACf;QACA,cAAc,IAAI,IAAI;IAC1B;AACJ"}},
    {"offset": {"line": 883, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahendra.singh/myark/src/lib/schema-generator.ts"],"sourcesContent":["import { Opportunity } from '@/types/admin';\r\n\r\ntype SchemaType = 'Scholarship' | 'EducationEvent' | 'Course' | 'Article' | 'BreadcrumbList' | 'FAQ';\r\n\r\nexport function generateSchema(match: Opportunity | any, type: SchemaType, url: string) {\r\n    const base = {\r\n        \"@context\": \"https://schema.org\",\r\n    };\r\n\r\n    if (type === 'BreadcrumbList') {\r\n        return {\r\n            ...base,\r\n            \"@type\": \"BreadcrumbList\",\r\n            \"itemListElement\": match.map((item: { name: string; item: string }, index: number) => ({\r\n                \"@type\": \"ListItem\",\r\n                \"position\": index + 1,\r\n                \"name\": item.name,\r\n                \"item\": item.item\r\n            }))\r\n        };\r\n    }\r\n\r\n    if (type === 'FAQ') {\r\n        return {\r\n            ...base,\r\n            \"@type\": \"FAQPage\",\r\n            \"mainEntity\": match.faqs?.map((faq: { question: string; answer: string }) => ({\r\n                \"@type\": \"Question\",\r\n                \"name\": faq.question,\r\n                \"acceptedAnswer\": {\r\n                    \"@type\": \"Answer\",\r\n                    \"text\": faq.answer\r\n                }\r\n            })) || []\r\n        };\r\n    }\r\n\r\n    // Common Opportunity Fields\r\n    const common = {\r\n        \"name\": match.seoConfig?.metaTitle || match.title,\r\n        \"description\": match.seoConfig?.metaDescription || match.shortDescription,\r\n        \"image\": match.image || \"https://myark.in/og-image.png\",\r\n        \"url\": url,\r\n        \"provider\": {\r\n            \"@type\": \"Organization\",\r\n            \"name\": match.organizer || \"Myark\",\r\n            \"url\": \"https://myark.in\",\r\n            \"logo\": {\r\n                \"@type\": \"ImageObject\",\r\n                \"url\": \"https://myark.in/logo.png\"\r\n            }\r\n        },\r\n        \"offers\": {\r\n            \"@type\": \"Offer\",\r\n            \"price\": match.fees || \"0\",\r\n            \"priceCurrency\": \"INR\",\r\n            \"url\": url,\r\n            \"availability\": match.status === 'published' ? \"https://schema.org/InStock\" : \"https://schema.org/Discontinued\"\r\n        }\r\n    };\r\n\r\n    if (type === 'Scholarship') {\r\n        return {\r\n            ...base,\r\n            \"@type\": \"FinancialProduct\",\r\n            ...common,\r\n            \"category\": \"Scholarship\",\r\n            \"financialAidEligible\": {\r\n                \"@type\": \"DefinedTerm\",\r\n                \"name\": \"Eligible Students\",\r\n                \"description\": match.eligibility?.description || `Students in grades ${match.eligibility?.grades?.join(', ')}`\r\n            },\r\n            \"amount\": {\r\n                \"@type\": \"MonetaryAmount\",\r\n                \"currency\": \"INR\",\r\n                \"value\": match.prizes?.first || \"See Details\"\r\n            }\r\n        };\r\n    }\r\n\r\n    if (type === 'EducationEvent') {\r\n        return {\r\n            ...base,\r\n            \"@type\": \"EducationEvent\",\r\n            ...common,\r\n            \"startDate\": match.dates?.eventDate || match.dates?.registrationStart,\r\n            \"endDate\": match.dates?.eventDate || match.dates?.registrationEnd,\r\n            \"eventStatus\": \"https://schema.org/EventScheduled\",\r\n            \"eventAttendanceMode\": match.location === \"Online\" ? \"https://schema.org/OnlineEventAttendanceMode\" : \"https://schema.org/OfflineEventAttendanceMode\",\r\n            \"location\": {\r\n                \"@type\": match.location === \"Online\" ? \"VirtualLocation\" : \"Place\",\r\n                \"name\": match.location || \"Online\",\r\n                ...(match.location !== \"Online\" && { \"address\": { \"@type\": \"PostalAddress\", \"addressLocality\": match.location } })\r\n            },\r\n            \"organizer\": {\r\n                \"@type\": \"Organization\",\r\n                \"name\": match.organizer || \"Myark\",\r\n                \"url\": match.link\r\n            }\r\n        };\r\n    }\r\n\r\n    if (type === 'Course') {\r\n        return {\r\n            ...base,\r\n            \"@type\": \"Course\",\r\n            ...common,\r\n            \"provider\": {\r\n                \"@type\": \"Organization\",\r\n                \"name\": match.organizer || \"Myark\"\r\n            },\r\n            \"hasCourseInstance\": {\r\n                \"@type\": \"CourseInstance\",\r\n                \"courseMode\": match.location === \"Online\" ? \"online\" : \"onsite\",\r\n                \"startDate\": match.dates?.eventDate,\r\n                \"endDate\": match.dates?.registrationEnd,\r\n            }\r\n        };\r\n    }\r\n\r\n    return base;\r\n}\r\n"],"names":[],"mappings":";;;;AAIO,SAAS,eAAe,KAAwB,EAAE,IAAgB,EAAE,GAAW;IAClF,MAAM,OAAO;QACT,YAAY;IAChB;IAEA,IAAI,SAAS,kBAAkB;QAC3B,OAAO;YACH,GAAG,IAAI;YACP,SAAS;YACT,mBAAmB,MAAM,GAAG,CAAC,CAAC,MAAsC,QAAkB,CAAC;oBACnF,SAAS;oBACT,YAAY,QAAQ;oBACpB,QAAQ,KAAK,IAAI;oBACjB,QAAQ,KAAK,IAAI;gBACrB,CAAC;QACL;IACJ;IAEA,IAAI,SAAS,OAAO;QAChB,OAAO;YACH,GAAG,IAAI;YACP,SAAS;YACT,cAAc,MAAM,IAAI,EAAE,IAAI,CAAC,MAA8C,CAAC;oBAC1E,SAAS;oBACT,QAAQ,IAAI,QAAQ;oBACpB,kBAAkB;wBACd,SAAS;wBACT,QAAQ,IAAI,MAAM;oBACtB;gBACJ,CAAC,MAAM,EAAE;QACb;IACJ;IAEA,4BAA4B;IAC5B,MAAM,SAAS;QACX,QAAQ,MAAM,SAAS,EAAE,aAAa,MAAM,KAAK;QACjD,eAAe,MAAM,SAAS,EAAE,mBAAmB,MAAM,gBAAgB;QACzE,SAAS,MAAM,KAAK,IAAI;QACxB,OAAO;QACP,YAAY;YACR,SAAS;YACT,QAAQ,MAAM,SAAS,IAAI;YAC3B,OAAO;YACP,QAAQ;gBACJ,SAAS;gBACT,OAAO;YACX;QACJ;QACA,UAAU;YACN,SAAS;YACT,SAAS,MAAM,IAAI,IAAI;YACvB,iBAAiB;YACjB,OAAO;YACP,gBAAgB,MAAM,MAAM,KAAK,cAAc,+BAA+B;QAClF;IACJ;IAEA,IAAI,SAAS,eAAe;QACxB,OAAO;YACH,GAAG,IAAI;YACP,SAAS;YACT,GAAG,MAAM;YACT,YAAY;YACZ,wBAAwB;gBACpB,SAAS;gBACT,QAAQ;gBACR,eAAe,MAAM,WAAW,EAAE,eAAe,CAAC,mBAAmB,EAAE,MAAM,WAAW,EAAE,QAAQ,KAAK,OAAO;YAClH;YACA,UAAU;gBACN,SAAS;gBACT,YAAY;gBACZ,SAAS,MAAM,MAAM,EAAE,SAAS;YACpC;QACJ;IACJ;IAEA,IAAI,SAAS,kBAAkB;QAC3B,OAAO;YACH,GAAG,IAAI;YACP,SAAS;YACT,GAAG,MAAM;YACT,aAAa,MAAM,KAAK,EAAE,aAAa,MAAM,KAAK,EAAE;YACpD,WAAW,MAAM,KAAK,EAAE,aAAa,MAAM,KAAK,EAAE;YAClD,eAAe;YACf,uBAAuB,MAAM,QAAQ,KAAK,WAAW,iDAAiD;YACtG,YAAY;gBACR,SAAS,MAAM,QAAQ,KAAK,WAAW,oBAAoB;gBAC3D,QAAQ,MAAM,QAAQ,IAAI;gBAC1B,GAAI,MAAM,QAAQ,KAAK,YAAY;oBAAE,WAAW;wBAAE,SAAS;wBAAiB,mBAAmB,MAAM,QAAQ;oBAAC;gBAAE,CAAC;YACrH;YACA,aAAa;gBACT,SAAS;gBACT,QAAQ,MAAM,SAAS,IAAI;gBAC3B,OAAO,MAAM,IAAI;YACrB;QACJ;IACJ;IAEA,IAAI,SAAS,UAAU;QACnB,OAAO;YACH,GAAG,IAAI;YACP,SAAS;YACT,GAAG,MAAM;YACT,YAAY;gBACR,SAAS;gBACT,QAAQ,MAAM,SAAS,IAAI;YAC/B;YACA,qBAAqB;gBACjB,SAAS;gBACT,cAAc,MAAM,QAAQ,KAAK,WAAW,WAAW;gBACvD,aAAa,MAAM,KAAK,EAAE;gBAC1B,WAAW,MAAM,KAAK,EAAE;YAC5B;QACJ;IACJ;IAEA,OAAO;AACX"}},
    {"offset": {"line": 1007, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mahendra.singh/myark/src/app/opportunity/%5Bid%5D/page.tsx"],"sourcesContent":["import OpportunityDetail from \"@/components/modules/OpportunityDetail\";\r\nimport type { Metadata } from \"next\";\r\nimport { opportunitiesService } from \"@/lib/firestore\";\r\nimport { constructMetadata } from \"@/lib/seo\";\r\nimport { generateSchema } from \"@/lib/schema-generator\";\r\nimport { notFound } from \"next/navigation\";\r\n\r\n// Generate metadata on the server\r\nexport async function generateMetadata({ params }: { params: Promise<{ id: string }> }): Promise<Metadata> {\r\n    try {\r\n        const { id } = await params;\r\n        const opportunity = await opportunitiesService.getById(id);\r\n\r\n        if (!opportunity) {\r\n            return constructMetadata({\r\n                title: \"Opportunity Not Found\",\r\n                description: \"This opportunity may have expired or been removed.\",\r\n                noIndex: true,\r\n            });\r\n        }\r\n\r\n        // Dynamic metadata based on opportunity data with Gen Z excitement\r\n        let dynamicTitle = opportunity?.title || 'Opportunity';\r\n\r\n        // Add class context if available\r\n        if (opportunity?.class) {\r\n            dynamicTitle = `${opportunity.title} for Class ${opportunity.class} Students`;\r\n        }\r\n\r\n        // Make it Gen Z-friendly and action-oriented\r\n        if (opportunity?.type === 'scholarship') {\r\n            dynamicTitle = `${dynamicTitle} – Apply Smart, Don't Miss Out`;\r\n        } else if (opportunity?.type === 'olympiad') {\r\n            dynamicTitle = `${dynamicTitle} – Prep, Apply & Level Up`;\r\n        } else if (opportunity?.type === 'competition') {\r\n            dynamicTitle = `${dynamicTitle} – Win, Learn & Build Your Profile`;\r\n        } else if (opportunity?.type === 'workshop') {\r\n            dynamicTitle = `${dynamicTitle} – Discover, Learn & Level Up`;\r\n        } else {\r\n            dynamicTitle = `${dynamicTitle} – Discover & Apply Now`;\r\n        }\r\n\r\n        const title = `Myark | ${dynamicTitle}`;\r\n\r\n        const description = opportunity?.seoConfig?.metaDescription ||\r\n            `${opportunity?.shortDescription || 'Discover this amazing opportunity'} Apply now for ${opportunity?.category || 'student'} opportunities. ${opportunity?.location ? `Location: ${opportunity.location}.` : ''} Deadline: ${opportunity?.dates?.registrationEnd ? new Date(opportunity.dates.registrationEnd).toLocaleDateString() : 'TBD'}.`;\r\n\r\n        return constructMetadata({\r\n            title,\r\n            description,\r\n            image: opportunity?.image,\r\n            url: `https://myark.in/opportunity/${opportunity?.id || id}`,\r\n            keywords: opportunity?.seoConfig?.keywords || [opportunity?.category || 'opportunities', 'students', 'scholarships', opportunity?.class ? `class ${opportunity.class}` : ''].filter(Boolean),\r\n            type: 'article',\r\n            publishedTime: opportunity?.createdAt?.toISOString(),\r\n            modifiedTime: opportunity?.updatedAt?.toISOString(),\r\n            noIndex: opportunity?.seoConfig?.noIndex || false,\r\n        });\r\n    } catch (error) {\r\n        console.error('Error generating metadata:', error);\r\n        return constructMetadata({\r\n            title: \"Myark Opportunities\",\r\n            description: \"Discover scholarships, olympiads, and competitions for students.\",\r\n        });\r\n    }\r\n}\r\n\r\n// Server component for SEO\r\nexport default async function OpportunityDetailPage({ params }: { params: Promise<{ id: string }> }) {\r\n    try {\r\n        const { id } = await params;\r\n        const opportunity = await opportunitiesService.getById(id);\r\n\r\n        if (!opportunity) {\r\n            notFound();\r\n        }\r\n\r\n        // Generate schema markup\r\n        const schemaType = opportunity.seoConfig?.schemaType || 'EducationEvent';\r\n        const jsonLd = generateSchema(\r\n            opportunity,\r\n            schemaType as any,\r\n            `https://myark.in/opportunity/${id}`\r\n        );\r\n\r\n        return (\r\n            <>\r\n                <script\r\n                    type=\"application/ld+json\"\r\n                    dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\r\n                />\r\n                <OpportunityDetail />\r\n            </>\r\n        );\r\n    } catch (error) {\r\n        console.error('Error loading opportunity:', error);\r\n        notFound();\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AAEA;AACA;AACA;AACA;AAAA;;;;;;;AAGO,eAAe,iBAAiB,EAAE,MAAM,EAAuC;IAClF,IAAI;QACA,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,cAAc,MAAM,+JAAoB,CAAC,OAAO,CAAC;QAEvD,IAAI,CAAC,aAAa;YACd,OAAO,IAAA,sIAAiB,EAAC;gBACrB,OAAO;gBACP,aAAa;gBACb,SAAS;YACb;QACJ;QAEA,mEAAmE;QACnE,IAAI,eAAe,aAAa,SAAS;QAEzC,iCAAiC;QACjC,IAAI,aAAa,OAAO;YACpB,eAAe,GAAG,YAAY,KAAK,CAAC,WAAW,EAAE,YAAY,KAAK,CAAC,SAAS,CAAC;QACjF;QAEA,6CAA6C;QAC7C,IAAI,aAAa,SAAS,eAAe;YACrC,eAAe,GAAG,aAAa,8BAA8B,CAAC;QAClE,OAAO,IAAI,aAAa,SAAS,YAAY;YACzC,eAAe,GAAG,aAAa,yBAAyB,CAAC;QAC7D,OAAO,IAAI,aAAa,SAAS,eAAe;YAC5C,eAAe,GAAG,aAAa,kCAAkC,CAAC;QACtE,OAAO,IAAI,aAAa,SAAS,YAAY;YACzC,eAAe,GAAG,aAAa,6BAA6B,CAAC;QACjE,OAAO;YACH,eAAe,GAAG,aAAa,uBAAuB,CAAC;QAC3D;QAEA,MAAM,QAAQ,CAAC,QAAQ,EAAE,cAAc;QAEvC,MAAM,cAAc,aAAa,WAAW,mBACxC,GAAG,aAAa,oBAAoB,oCAAoC,eAAe,EAAE,aAAa,YAAY,UAAU,gBAAgB,EAAE,aAAa,WAAW,CAAC,UAAU,EAAE,YAAY,QAAQ,CAAC,CAAC,CAAC,GAAG,GAAG,WAAW,EAAE,aAAa,OAAO,kBAAkB,IAAI,KAAK,YAAY,KAAK,CAAC,eAAe,EAAE,kBAAkB,KAAK,MAAM,CAAC,CAAC;QAElV,OAAO,IAAA,sIAAiB,EAAC;YACrB;YACA;YACA,OAAO,aAAa;YACpB,KAAK,CAAC,6BAA6B,EAAE,aAAa,MAAM,IAAI;YAC5D,UAAU,aAAa,WAAW,YAAY;gBAAC,aAAa,YAAY;gBAAiB;gBAAY;gBAAgB,aAAa,QAAQ,CAAC,MAAM,EAAE,YAAY,KAAK,EAAE,GAAG;aAAG,CAAC,MAAM,CAAC;YACpL,MAAM;YACN,eAAe,aAAa,WAAW;YACvC,cAAc,aAAa,WAAW;YACtC,SAAS,aAAa,WAAW,WAAW;QAChD;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,IAAA,sIAAiB,EAAC;YACrB,OAAO;YACP,aAAa;QACjB;IACJ;AACJ;AAGe,eAAe,sBAAsB,EAAE,MAAM,EAAuC;IAC/F,IAAI;QACA,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,cAAc,MAAM,+JAAoB,CAAC,OAAO,CAAC;QAEvD,IAAI,CAAC,aAAa;YACd,IAAA,iMAAQ;QACZ;QAEA,yBAAyB;QACzB,MAAM,aAAa,YAAY,SAAS,EAAE,cAAc;QACxD,MAAM,SAAS,IAAA,mJAAc,EACzB,aACA,YACA,CAAC,6BAA6B,EAAE,IAAI;QAGxC,qBACI;;8BACI,8OAAC;oBACG,MAAK;oBACL,yBAAyB;wBAAE,QAAQ,KAAK,SAAS,CAAC;oBAAQ;;;;;;8BAE9D,8OAAC,6JAAiB;;;;;;;IAG9B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,IAAA,iMAAQ;IACZ;AACJ"}}]
}