module.exports=[63523,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(87532),f=a.i(60246),g=a.i(16106),h=a.i(1027),i=a.i(24669),j=a.i(40737),k=a.i(77156),l=a.i(92258),m=a.i(96221),n=a.i(53250),o=a.i(15618),p=a.i(33508),q=a.i(76472),r=a.i(99570),s=a.i(66718),t=a.i(86304),u=a.i(6015),v=a.i(35732),w=a.i(80701),x=a.i(91119),y=a.i(97942),z=a.i(187),A=a.i(68114);let B=y.Root;y.Trigger,y.Close;let C=y.Portal,D=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(y.Overlay,{className:(0,A.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c,ref:d}));D.displayName=y.Overlay.displayName;let E=(0,z.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),F=c.forwardRef(({side:a="right",className:c,children:d,...e},f)=>(0,b.jsxs)(C,{children:[(0,b.jsx)(D,{}),(0,b.jsxs)(y.Content,{ref:f,className:(0,A.cn)(E({side:a}),c),...e,children:[d,(0,b.jsxs)(y.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,b.jsx)(p.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));F.displayName=y.Content.displayName;let G=({className:a,...c})=>(0,b.jsx)("div",{className:(0,A.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...c});G.displayName="SheetHeader";let H=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(y.Title,{ref:d,className:(0,A.cn)("text-lg font-semibold text-foreground",a),...c}));H.displayName=y.Title.displayName,c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(y.Description,{ref:d,className:(0,A.cn)("text-sm text-muted-foreground",a),...c})).displayName=y.Description.displayName;var I=a.i(25101);a.s(["default",0,()=>{let[a,y]=(0,c.useState)(!0),[z,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(""),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)([]),[P,Q]=(0,c.useState)(!1),[R,S]=(0,c.useState)({total:0,activeThisWeek:0,avgStreak:0,newThisWeek:0});(0,c.useEffect)(()=>{(async()=>{try{let[a,b,c]=await Promise.all([I.studentsService.getAll({grade:"all"!==J?parseInt(J):void 0}),I.studentsService.getStats(),I.badgesService.getAll()]);C(a),S({...b,newThisWeek:Math.round(.05*b.total)}),O(c)}catch(a){console.error("Error fetching data:",a)}finally{y(!1)}})()},[J]);let T=async a=>{if(L){Q(!0);try{await I.studentsService.assignBadge(L.id,a);let b={...L,badges:[...L.badges||[],a]};M(b),C(a=>a.map(a=>a.id===L.id?b:a))}catch(a){console.error("Error assigning badge:",a)}finally{Q(!1)}}},U=async a=>{if(L)try{await I.studentsService.removeBadge(L.id,a);let b={...L,badges:(L.badges||[]).filter(b=>b!==a)};M(b),C(a=>a.map(a=>a.id===L.id?b:a))}catch(a){console.error("Error removing badge:",a)}},V=z.filter(a=>a.name.toLowerCase().includes(D.toLowerCase())||a.email.toLowerCase().includes(D.toLowerCase()));return a?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold font-display",children:"Students"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Registered students and their activity"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(f.Users,{className:"w-5 h-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:R.total.toLocaleString()}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Students"})]})]})})}),(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-success/10",children:(0,b.jsx)(i.TrendingUp,{className:"w-5 h-5 text-success"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:R.activeThisWeek.toLocaleString()}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active This Week"})]})]})})}),(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-orange-500/10",children:(0,b.jsx)(g.Flame,{className:"w-5 h-5 text-orange-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:R.avgStreak}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Streak Days"})]})]})})}),(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-secondary/10",children:(0,b.jsx)(h.Zap,{className:"w-5 h-5 text-secondary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:R.newThisWeek}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"New This Week"})]})]})})})]}),(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(s.Input,{placeholder:"Search students...",value:D,onChange:a=>E(a.target.value),className:"pl-9"})]}),(0,b.jsxs)(w.Select,{value:J,onValueChange:K,children:[(0,b.jsx)(w.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,b.jsx)(w.SelectValue,{placeholder:"All Grades"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"all",children:"All Grades"}),[6,7,8,9,10,11,12].map(a=>(0,b.jsxs)(w.SelectItem,{value:String(a),children:["Class ",a]},a))]})]})]})})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsx)(x.Card,{children:(0,b.jsx)(x.CardContent,{className:"p-0",children:0===V.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,b.jsx)(f.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No students found"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Students will appear here when they register"})]}):(0,b.jsxs)(u.Table,{children:[(0,b.jsx)(u.TableHeader,{children:(0,b.jsxs)(u.TableRow,{children:[(0,b.jsx)(u.TableHead,{children:"Student"}),(0,b.jsx)(u.TableHead,{children:"Grade"}),(0,b.jsx)(u.TableHead,{children:"School"}),(0,b.jsx)(u.TableHead,{children:"Streak"}),(0,b.jsx)(u.TableHead,{children:"XP"}),(0,b.jsx)(u.TableHead,{children:"Applications"}),(0,b.jsx)(u.TableHead,{children:"Status"}),(0,b.jsx)(u.TableHead,{className:"w-12"})]})}),(0,b.jsx)(u.TableBody,{children:V.map((a,c)=>{var e;return(0,b.jsxs)(d.motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.03*c},className:"group cursor-pointer hover:bg-muted/50",onClick:()=>M(a),children:[(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-primary-foreground font-semibold",children:a.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.email})]})]})}),(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)(t.Badge,{variant:"outline",children:["Class ",a.grade]})}),(0,b.jsx)(u.TableCell,{className:"text-muted-foreground max-w-[150px] truncate",children:a.school||"-"}),(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(g.Flame,{className:"w-4 h-4 text-orange-500"}),a.streakDays]})}),(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(h.Zap,{className:"w-4 h-4 text-yellow-500"}),a.xpPoints.toLocaleString()]})}),(0,b.jsx)(u.TableCell,{children:a.appliedOpportunities?.length||0}),(0,b.jsx)(u.TableCell,{children:(e=a.lastActiveAt)&&new Date().getTime()-new Date(e).getTime()<864e5?(0,b.jsx)(t.Badge,{className:"bg-success/20 text-success",children:"Active"}):(0,b.jsx)(t.Badge,{variant:"outline",className:"text-muted-foreground",children:"Inactive"})}),(0,b.jsx)(u.TableCell,{children:(0,b.jsxs)(v.DropdownMenu,{children:[(0,b.jsx)(v.DropdownMenuTrigger,{asChild:!0,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100",children:(0,b.jsx)(j.MoreHorizontal,{className:"w-4 h-4"})})}),(0,b.jsxs)(v.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(v.DropdownMenuItem,{onClick:()=>M(a),children:[(0,b.jsx)(k.Eye,{className:"w-4 h-4 mr-2"}),"View Profile"]}),(0,b.jsx)(v.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)("a",{href:`mailto:${a.email}`,children:[(0,b.jsx)(l.Mail,{className:"w-4 h-4 mr-2"}),"Send Email"]})})]})]})})]},a.id)})})]})})})}),(0,b.jsx)(B,{open:!!L,onOpenChange:()=>M(null),children:(0,b.jsxs)(F,{className:"w-full sm:max-w-md overflow-y-auto",children:[(0,b.jsx)(G,{children:(0,b.jsx)(H,{children:"Student Profile"})}),L&&(0,b.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-primary-foreground font-bold text-2xl",children:L.name.charAt(0)}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:L.name}),(0,b.jsx)("p",{className:"text-muted-foreground",children:L.email})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"text-center p-3 rounded-xl bg-muted/50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1 text-orange-500 mb-1",children:[(0,b.jsx)(g.Flame,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-xl font-bold",children:L.streakDays})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Day Streak"})]}),(0,b.jsxs)("div",{className:"text-center p-3 rounded-xl bg-muted/50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1 text-yellow-500 mb-1",children:[(0,b.jsx)(h.Zap,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-xl font-bold",children:L.xpPoints})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"XP Points"})]}),(0,b.jsxs)("div",{className:"text-center p-3 rounded-xl bg-muted/50",children:[(0,b.jsxs)("p",{className:"text-xl font-bold text-primary mb-1",children:["Lv ",L.level]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Level"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b border-border",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Grade"}),(0,b.jsxs)("span",{className:"font-medium",children:["Class ",L.grade]})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b border-border",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"School"}),(0,b.jsx)("span",{className:"font-medium",children:L.school||"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b border-border",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"City"}),(0,b.jsx)("span",{className:"font-medium",children:L.city||"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b border-border",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Applications"}),(0,b.jsx)("span",{className:"font-medium",children:L.appliedOpportunities?.length||0})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b border-border",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Joined"}),(0,b.jsx)("span",{className:"font-medium",children:L.createdAt?new Date(L.createdAt).toLocaleDateString():"-"})]})]}),(L.personaGoal||L.competitiveness||L.weeklyTimeCommitment||L.deliveryPreference)&&(0,b.jsxs)("div",{className:"space-y-4 pt-6 border-t border-border",children:[(0,b.jsxs)("p",{className:"text-sm font-bold flex items-center gap-2",children:[(0,b.jsx)(i.TrendingUp,{className:"w-4 h-4 text-primary"}),"Discovery Insights"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[L.personaGoal&&(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-muted/30 border border-white/5",children:[(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest mb-1",children:"Goal Vibe"}),(0,b.jsx)("p",{className:"text-xs font-bold capitalize",children:L.personaGoal.replace("_"," ")})]}),L.competitiveness&&(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-muted/30 border border-white/5",children:[(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest mb-1",children:"Heat Level"}),(0,b.jsx)("p",{className:"text-xs font-bold capitalize",children:L.competitiveness.replace("_"," ")})]}),L.weeklyTimeCommitment&&(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-muted/30 border border-white/5",children:[(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest mb-1",children:"Weekly Time"}),(0,b.jsx)("p",{className:"text-xs font-bold capitalize",children:L.weeklyTimeCommitment.replace(/_/g," ")})]}),L.deliveryPreference&&(0,b.jsxs)("div",{className:"p-3 rounded-xl bg-muted/30 border border-white/5",children:[(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest mb-1",children:"Preference"}),(0,b.jsx)("p",{className:"text-xs font-bold capitalize",children:L.deliveryPreference})]})]})]}),L.interests?.length>0&&(0,b.jsxs)("div",{className:"pt-6 border-t border-border",children:[(0,b.jsxs)("p",{className:"text-sm font-bold mb-3 flex items-center gap-2",children:[(0,b.jsx)(q.Heart,{className:"w-4 h-4 text-rose-500"}),"Interests"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:L.interests.map(a=>(0,b.jsx)(t.Badge,{variant:"secondary",className:"px-3 py-1 bg-muted/50 border-white/5",children:a},a))})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-6 border-t border-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("p",{className:"text-sm font-bold flex items-center gap-2",children:[(0,b.jsx)(n.Medal,{className:"w-4 h-4 text-primary"}),"Earned Badges"]}),(0,b.jsxs)(v.DropdownMenu,{children:[(0,b.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(r.Button,{variant:"ghost",size:"sm",className:"h-8 gap-1.5 text-xs text-primary hover:text-primary hover:bg-primary/10",children:[(0,b.jsx)(o.Plus,{className:"w-3.5 h-3.5"}),"Assign"]})}),(0,b.jsxs)(v.DropdownMenuContent,{align:"end",className:"w-56 overflow-hidden",children:[(0,b.jsx)("p",{className:"px-2 py-1.5 text-xs font-bold text-muted-foreground uppercase tracking-widest bg-muted/30",children:"Select Badge"}),(0,b.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:0===N.filter(a=>!L.badges?.includes(a.id)).length?(0,b.jsx)("p",{className:"p-4 text-center text-xs text-muted-foreground italic",children:"No badges left to assign"}):N.filter(a=>!L.badges?.includes(a.id)).map(a=>(0,b.jsxs)(v.DropdownMenuItem,{onClick:()=>T(a.id),className:"gap-2",children:[(0,b.jsx)("div",{className:(0,A.cn)("w-6 h-6 rounded flex items-center justify-center bg-primary/20",a.color),children:(0,b.jsx)(n.Medal,{className:"w-3.5 h-3.5"})}),(0,b.jsx)("span",{className:"flex-1",children:a.name})]},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[L.badges?.map(a=>{let c=N.find(b=>b.id===a);return c?(0,b.jsxs)("div",{className:"group relative p-3 rounded-xl bg-muted/50 border border-white/5 flex flex-col items-center text-center gap-2 hover:border-primary/20 transition-all duration-300",children:[(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-destructive text-destructive-foreground opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>U(a),children:(0,b.jsx)(p.X,{className:"w-3 h-3"})}),(0,b.jsx)("div",{className:(0,A.cn)("w-10 h-10 rounded-lg flex items-center justify-center",c.color,"bg-background shadow-sm"),children:(0,b.jsx)(n.Medal,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-bold line-clamp-1",children:c.name}),(0,b.jsx)("p",{className:"text-[8px] text-muted-foreground uppercase tracking-wider",children:c.category})]})]},a):null}),(!L.badges||0===L.badges.length)&&(0,b.jsxs)("div",{className:"col-span-2 py-8 text-center bg-muted/30 rounded-xl border border-dashed border-border/50",children:[(0,b.jsx)(n.Medal,{className:"w-8 h-8 text-muted-foreground/30 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground italic",children:"No badges earned yet"})]})]})]})]})]})})]})}],63523)}];

//# sourceMappingURL=src_components_modules_admin_Students_tsx_ce3bbebb._.js.map