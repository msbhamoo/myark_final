{"version":3,"sources":["../../../../src/lib/studentAuth.tsx","../../../../src/lib/studentAuthService.ts","../../../../node_modules/lucide-react/src/icons/phone.ts"],"sourcesContent":["/**\r\n * Student Authentication Context\r\n * Provides auth state and methods throughout the app\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect, useCallback, type ReactNode } from \"react\";\r\nimport { studentAuthService, type StudentUser, type AuthResult } from \"./studentAuthService\";\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\nexport interface AuthModalOptions {\r\n    mode?: 'login' | 'register';\r\n    trigger?: 'heart' | 'save' | 'apply' | 'profile' | 'manual';\r\n    message?: string;\r\n    onSuccess?: () => void;\r\n    onClose?: () => void;\r\n}\r\n\r\ninterface StudentAuthContextType {\r\n    // State\r\n    student: StudentUser | null;\r\n    loading: boolean;\r\n    isAuthenticated: boolean;\r\n\r\n    // Auth Modal\r\n    authModalOpen: boolean;\r\n    authModalOptions: AuthModalOptions | null;\r\n    showAuthModal: (options?: AuthModalOptions) => void;\r\n    hideAuthModal: () => void;\r\n\r\n    // Auth Actions\r\n    login: (phone: string, pin: string) => Promise<AuthResult>;\r\n    register: (phone: string, pin: string) => Promise<AuthResult>;\r\n    logout: () => Promise<void>;\r\n\r\n    // User Updates\r\n    refreshUser: () => Promise<void>;\r\n    addXP: (amount: number) => void;\r\n    updateStudent: (updates: Partial<StudentUser>) => Promise<void>;\r\n\r\n    // Opportunity Actions\r\n    saveOpportunity: (opportunityId: string) => Promise<void>;\r\n    unsaveOpportunity: (opportunityId: string) => Promise<void>;\r\n    applyToOpportunity: (opportunityId: string) => Promise<void>;\r\n    addXPWithPersist: (amount: number) => Promise<void>;\r\n}\r\n\r\n// ============================================\r\n// CONTEXT\r\n// ============================================\r\n\r\nconst StudentAuthContext = createContext<StudentAuthContextType | undefined>(undefined);\r\n\r\nexport const useStudentAuth = () => {\r\n    const context = useContext(StudentAuthContext);\r\n    if (!context) {\r\n        throw new Error(\"useStudentAuth must be used within a StudentAuthProvider\");\r\n    }\r\n    return context;\r\n};\r\n\r\n// ============================================\r\n// PROVIDER\r\n// ============================================\r\n\r\ninterface StudentAuthProviderProps {\r\n    children: ReactNode;\r\n}\r\n\r\nexport const StudentAuthProvider = ({ children }: StudentAuthProviderProps) => {\r\n    const [student, setStudent] = useState<StudentUser | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [authModalOpen, setAuthModalOpen] = useState(false);\r\n    const [authModalOptions, setAuthModalOptions] = useState<AuthModalOptions | null>(null);\r\n\r\n    // Check for existing session on mount\r\n    useEffect(() => {\r\n        const checkExistingSession = async () => {\r\n            try {\r\n                const sessionId = localStorage.getItem('myark_session');\r\n                if (sessionId) {\r\n                    const user = await studentAuthService.validateSession(sessionId);\r\n                    if (user) {\r\n                        setStudent(user);\r\n                    } else {\r\n                        // Clear invalid session\r\n                        localStorage.removeItem('myark_session');\r\n                        localStorage.removeItem('myark_user_id');\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Session check error:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        checkExistingSession();\r\n    }, []);\r\n\r\n    // Auth Modal Controls\r\n    const showAuthModal = useCallback((options?: AuthModalOptions) => {\r\n        setAuthModalOptions(options || { mode: 'login' });\r\n        setAuthModalOpen(true);\r\n    }, []);\r\n\r\n    const hideAuthModal = useCallback(() => {\r\n        setAuthModalOpen(false);\r\n        authModalOptions?.onClose?.();\r\n        // Small delay before clearing options to prevent flash\r\n        setTimeout(() => setAuthModalOptions(null), 300);\r\n    }, [authModalOptions]);\r\n\r\n    // Login\r\n    const login = useCallback(async (phone: string, pin: string): Promise<AuthResult> => {\r\n        const result = await studentAuthService.login(phone, pin);\r\n        if (result.success && result.user) {\r\n            setStudent(result.user);\r\n            hideAuthModal();\r\n            authModalOptions?.onSuccess?.();\r\n        }\r\n        return result;\r\n    }, [hideAuthModal, authModalOptions]);\r\n\r\n    // Register\r\n    const register = useCallback(async (phone: string, pin: string): Promise<AuthResult> => {\r\n        const result = await studentAuthService.register(phone, pin);\r\n        if (result.success && result.user) {\r\n            setStudent(result.user);\r\n            hideAuthModal();\r\n            authModalOptions?.onSuccess?.();\r\n        }\r\n        return result;\r\n    }, [hideAuthModal, authModalOptions]);\r\n\r\n    // Logout\r\n    const logout = useCallback(async () => {\r\n        await studentAuthService.logout();\r\n        setStudent(null);\r\n    }, []);\r\n\r\n    // Refresh user data\r\n    const refreshUser = useCallback(async () => {\r\n        const sessionId = localStorage.getItem('myark_session');\r\n        if (sessionId) {\r\n            const user = await studentAuthService.validateSession(sessionId);\r\n            if (user) {\r\n                setStudent(user);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    // Add XP (optimistic update)\r\n    const addXP = useCallback((amount: number) => {\r\n        if (student) {\r\n            setStudent(prev => prev ? { ...prev, xpPoints: prev.xpPoints + amount } : null);\r\n        }\r\n    }, [student]);\r\n\r\n    // Update student profile (optimistic update + persist)\r\n    const updateStudent = useCallback(async (updates: Partial<StudentUser>) => {\r\n        if (!student) return;\r\n\r\n        // Optimistic update\r\n        setStudent(prev => prev ? { ...prev, ...updates } : null);\r\n\r\n        // Persist to backend\r\n        try {\r\n            await studentAuthService.updateProfile(student.id, updates);\r\n        } catch (error) {\r\n            console.error(\"Failed to update profile:\", error);\r\n            // Revert on error\r\n            await refreshUser();\r\n            throw error;\r\n        }\r\n    }, [student, refreshUser]);\r\n\r\n    // Save opportunity (with XP)\r\n    const saveOpportunity = useCallback(async (opportunityId: string) => {\r\n        if (!student) return;\r\n        // Optimistic update\r\n        setStudent(prev => prev ? {\r\n            ...prev,\r\n            savedOpportunities: [...(prev.savedOpportunities || []), opportunityId],\r\n            xpPoints: prev.xpPoints + 5\r\n        } : null);\r\n        try {\r\n            await studentAuthService.saveOpportunity(student.id, opportunityId);\r\n        } catch (error) {\r\n            console.error(\"Failed to save opportunity:\", error);\r\n            await refreshUser();\r\n        }\r\n    }, [student, refreshUser]);\r\n\r\n    // Unsave opportunity\r\n    const unsaveOpportunity = useCallback(async (opportunityId: string) => {\r\n        if (!student) return;\r\n        // Optimistic update\r\n        setStudent(prev => prev ? {\r\n            ...prev,\r\n            savedOpportunities: (prev.savedOpportunities || []).filter(id => id !== opportunityId)\r\n        } : null);\r\n        try {\r\n            await studentAuthService.unsaveOpportunity(student.id, opportunityId);\r\n        } catch (error) {\r\n            console.error(\"Failed to unsave opportunity:\", error);\r\n            await refreshUser();\r\n        }\r\n    }, [student, refreshUser]);\r\n\r\n    // Apply to opportunity (with XP)\r\n    const applyToOpportunity = useCallback(async (opportunityId: string) => {\r\n        if (!student) return;\r\n        // Optimistic update\r\n        setStudent(prev => prev ? {\r\n            ...prev,\r\n            appliedOpportunities: [...(prev.appliedOpportunities || []), opportunityId],\r\n            xpPoints: prev.xpPoints + 40\r\n        } : null);\r\n        try {\r\n            await studentAuthService.applyToOpportunity(student.id, opportunityId);\r\n        } catch (error) {\r\n            console.error(\"Failed to apply to opportunity:\", error);\r\n            await refreshUser();\r\n        }\r\n    }, [student, refreshUser]);\r\n\r\n    // Add XP with persistence\r\n    const addXPWithPersist = useCallback(async (amount: number) => {\r\n        if (!student) return;\r\n        // Optimistic update\r\n        setStudent(prev => prev ? { ...prev, xpPoints: prev.xpPoints + amount } : null);\r\n        try {\r\n            await studentAuthService.addProfileXP(student.id, amount);\r\n        } catch (error) {\r\n            console.error(\"Failed to add XP:\", error);\r\n            await refreshUser();\r\n        }\r\n    }, [student, refreshUser]);\r\n\r\n    const value: StudentAuthContextType = {\r\n        student,\r\n        loading,\r\n        isAuthenticated: !!student,\r\n        authModalOpen,\r\n        authModalOptions,\r\n        showAuthModal,\r\n        hideAuthModal,\r\n        login,\r\n        register,\r\n        logout,\r\n        refreshUser,\r\n        addXP,\r\n        updateStudent,\r\n        saveOpportunity,\r\n        unsaveOpportunity,\r\n        applyToOpportunity,\r\n        addXPWithPersist,\r\n    };\r\n\r\n    return (\r\n        <StudentAuthContext.Provider value={value}>\r\n            {children}\r\n        </StudentAuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default StudentAuthContext;\r\n","/**\r\n * Student Authentication Service\r\n * Handles registration, login, session management, and security\r\n */\r\n\r\nimport {\r\n    collection,\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    Timestamp,\r\n    increment,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"./firebase\";\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\nexport interface StudentUser {\r\n    id: string;\r\n    phone: string;\r\n    name?: string;\r\n    profilePicture?: string;\r\n    grade?: number;\r\n    school?: string;\r\n    city?: string;\r\n    state?: string;\r\n    gender?: 'male' | 'female' | 'other' | 'prefer_not_to_say';\r\n    interests: string[];\r\n    appliedOpportunities: string[];\r\n    savedOpportunities: string[];\r\n    xpPoints: number;\r\n    level: number;\r\n    streakDays: number;\r\n    badges: string[];\r\n    // Discovery Quiz Data\r\n    personaGoal?: 'top_college' | 'skills' | 'recognition' | 'exploring';\r\n    competitiveness?: 'chill' | 'balanced' | 'beast_mode';\r\n    weeklyTimeCommitment?: '1_2_hours' | '3_5_hours' | '5_plus_hours';\r\n    deliveryPreference?: 'online' | 'offline' | 'both';\r\n    isVerified: boolean;\r\n    isBlocked: boolean;\r\n    blockReason?: string;\r\n    failedLoginAttempts: number;\r\n    lastFailedAttempt?: Date;\r\n    lastLoginAt?: Date;\r\n    createdAt: Date;\r\n    createdVia: 'web' | 'mobile' | 'admin';\r\n}\r\n\r\nexport interface SessionInfo {\r\n    id: string;\r\n    userId: string;\r\n    device: string;\r\n    browser: string;\r\n    createdAt: Date;\r\n    lastActiveAt: Date;\r\n    isActive: boolean;\r\n}\r\n\r\nexport interface AuthResult {\r\n    success: boolean;\r\n    user?: StudentUser;\r\n    session?: SessionInfo;\r\n    error?: string;\r\n    errorCode?: 'INVALID_PHONE' | 'INVALID_PIN' | 'USER_NOT_FOUND' | 'WRONG_PIN' | 'RATE_LIMITED' | 'BLOCKED' | 'PIN_MISMATCH' | 'PHONE_EXISTS';\r\n}\r\n\r\nexport interface RateLimitResult {\r\n    allowed: boolean;\r\n    remainingAttempts: number;\r\n    lockoutUntil?: Date;\r\n}\r\n\r\n// ============================================\r\n// CONSTANTS\r\n// ============================================\r\n\r\nconst COLLECTIONS = {\r\n    studentUsers: \"studentUsers\",\r\n    studentSessions: \"studentSessions\",\r\n} as const;\r\n\r\nconst MAX_FAILED_ATTEMPTS = 5;\r\nconst LOCKOUT_DURATION_MS = 5 * 60 * 1000; // 5 minutes\r\nconst SESSION_EXPIRY_DAYS = 30;\r\n\r\n// ============================================\r\n// CRYPTO HELPERS (PIN Hashing)\r\n// ============================================\r\n\r\nasync function hashPin(pin: string): Promise<string> {\r\n    // Use Web Crypto API for secure hashing\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(pin + 'myark_salt_2026');\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n}\r\n\r\nasync function verifyPin(pin: string, hash: string): Promise<boolean> {\r\n    const inputHash = await hashPin(pin);\r\n    return inputHash === hash;\r\n}\r\n\r\n// ============================================\r\n// DEVICE DETECTION\r\n// ============================================\r\n\r\nfunction getDeviceInfo(): { device: string; browser: string } {\r\n    const ua = navigator.userAgent;\r\n    let device = 'Unknown Device';\r\n    let browser = 'Unknown Browser';\r\n\r\n    // Detect device\r\n    if (/iPhone/i.test(ua)) device = 'iPhone';\r\n    else if (/iPad/i.test(ua)) device = 'iPad';\r\n    else if (/Android/i.test(ua)) device = 'Android';\r\n    else if (/Windows/i.test(ua)) device = 'Windows';\r\n    else if (/Mac/i.test(ua)) device = 'Mac';\r\n    else if (/Linux/i.test(ua)) device = 'Linux';\r\n\r\n    // Detect browser\r\n    if (/Chrome/i.test(ua) && !/Edg/i.test(ua)) browser = 'Chrome';\r\n    else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) browser = 'Safari';\r\n    else if (/Firefox/i.test(ua)) browser = 'Firefox';\r\n    else if (/Edg/i.test(ua)) browser = 'Edge';\r\n\r\n    return { device, browser };\r\n}\r\n\r\n/**\r\n * Calculates a new streak based on the last login time and the current streak.\r\n * @param lastLoginAt Date of the last login\r\n * @param currentStreak The current streak number\r\n * @returns The updated streak number\r\n */\r\nfunction calculateNewStreak(lastLoginAt: Date | undefined, currentStreak: number): number {\r\n    if (!lastLoginAt) return 1;\r\n\r\n    const now = new Date();\r\n    const lastDate = new Date(lastLoginAt);\r\n    lastDate.setHours(0, 0, 0, 0);\r\n    const nowDate = new Date(now);\r\n    nowDate.setHours(0, 0, 0, 0);\r\n\r\n    const dayDiff = Math.round((nowDate.getTime() - lastDate.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n    if (dayDiff === 1) {\r\n        // Logged in exactly the next day\r\n        return currentStreak + 1;\r\n    } else if (dayDiff > 1) {\r\n        // Missed at least one day\r\n        return 1;\r\n    } else if (dayDiff === 0) {\r\n        // Already logged in today\r\n        return currentStreak || 1;\r\n    }\r\n\r\n    return currentStreak || 1;\r\n}\r\n\r\n// ============================================\r\n// STUDENT AUTH SERVICE\r\n// ============================================\r\n\r\nexport const studentAuthService = {\r\n    // ============================================\r\n    // REGISTRATION\r\n    // ============================================\r\n\r\n    async register(phone: string, pin: string): Promise<AuthResult> {\r\n        try {\r\n            // Validate phone format (Indian mobile)\r\n            const cleanPhone = phone.replace(/\\D/g, '');\r\n            if (cleanPhone.length !== 10) {\r\n                return { success: false, error: \"Please enter a valid 10-digit mobile number\", errorCode: 'INVALID_PHONE' };\r\n            }\r\n\r\n            // Validate PIN format\r\n            if (!/^\\d{4}$/.test(pin)) {\r\n                return { success: false, error: \"PIN must be 4 digits\", errorCode: 'INVALID_PIN' };\r\n            }\r\n\r\n            // Check if phone already registered\r\n            const existingQuery = query(\r\n                collection(db, COLLECTIONS.studentUsers),\r\n                where(\"phone\", \"==\", cleanPhone)\r\n            );\r\n            const existingDocs = await getDocs(existingQuery);\r\n            if (!existingDocs.empty) {\r\n                return { success: false, error: \"This number is already registered. Try logging in!\", errorCode: 'PHONE_EXISTS' };\r\n            }\r\n\r\n            // Hash the PIN\r\n            const pinHash = await hashPin(pin);\r\n\r\n            // Create user document\r\n            const userId = `user_${cleanPhone}_${Date.now()}`;\r\n            const now = new Date();\r\n\r\n            const newUser: StudentUser = {\r\n                id: userId,\r\n                phone: cleanPhone,\r\n                xpPoints: 50, // Welcome bonus!\r\n                level: 1,\r\n                streakDays: 1, // Start the first streak!\r\n                badges: ['early_bird'], // First badge!\r\n                interests: [],\r\n                appliedOpportunities: [],\r\n                savedOpportunities: [],\r\n                isVerified: true,\r\n                isBlocked: false,\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: now,\r\n                createdAt: now,\r\n                createdVia: 'web',\r\n            };\r\n\r\n            // Save to Firestore\r\n            await setDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n                ...newUser,\r\n                pinHash,\r\n                createdAt: Timestamp.fromDate(now),\r\n                lastLoginAt: Timestamp.fromDate(now),\r\n            });\r\n\r\n            // Create session\r\n            const session = await this.createSession(userId);\r\n\r\n            return { success: true, user: newUser, session };\r\n        } catch (error) {\r\n            console.error(\"Registration error:\", error);\r\n            return { success: false, error: \"Something went wrong. Please try again!\" };\r\n        }\r\n    },\r\n\r\n    // ============================================\r\n    // LOGIN\r\n    // ============================================\r\n\r\n    async login(phone: string, pin: string): Promise<AuthResult> {\r\n        try {\r\n            // Validate phone format\r\n            const cleanPhone = phone.replace(/\\D/g, '');\r\n            if (cleanPhone.length !== 10) {\r\n                return { success: false, error: \"Please enter a valid 10-digit mobile number\", errorCode: 'INVALID_PHONE' };\r\n            }\r\n\r\n            // Find user by phone\r\n            const userQuery = query(\r\n                collection(db, COLLECTIONS.studentUsers),\r\n                where(\"phone\", \"==\", cleanPhone)\r\n            );\r\n            const userDocs = await getDocs(userQuery);\r\n\r\n            if (userDocs.empty) {\r\n                return { success: false, error: \"No account found with this number. Want to register?\", errorCode: 'USER_NOT_FOUND' };\r\n            }\r\n\r\n            const userDoc = userDocs.docs[0];\r\n            const userData = userDoc.data();\r\n\r\n            // Check if blocked\r\n            if (userData.isBlocked) {\r\n                return { success: false, error: \"Your account has been blocked. Contact support for help.\", errorCode: 'BLOCKED' };\r\n            }\r\n\r\n            // Check rate limiting\r\n            const rateLimit = await this.checkRateLimit(userData);\r\n            if (!rateLimit.allowed) {\r\n                const waitTime = Math.ceil((rateLimit.lockoutUntil!.getTime() - Date.now()) / 60000);\r\n                return {\r\n                    success: false,\r\n                    error: `Too many attempts! Take a break for ${waitTime} min â˜•`,\r\n                    errorCode: 'RATE_LIMITED'\r\n                };\r\n            }\r\n\r\n            // Verify PIN\r\n            const isValidPin = await verifyPin(pin, userData.pinHash);\r\n            if (!isValidPin) {\r\n                await this.incrementFailedAttempts(userDoc.id);\r\n                const remaining = MAX_FAILED_ATTEMPTS - (userData.failedLoginAttempts + 1);\r\n                return {\r\n                    success: false,\r\n                    error: remaining > 0\r\n                        ? `Wrong PIN! ${remaining} attempts left ðŸŽ¯`\r\n                        : \"Wrong PIN! Account locked for 5 minutes.\",\r\n                    errorCode: 'WRONG_PIN'\r\n                };\r\n            }\r\n\r\n            // Calculate new streak\r\n            const newStreak = calculateNewStreak(userData.lastLoginAt?.toDate(), userData.streakDays || 0);\r\n\r\n            // Clear failed attempts and update last login\r\n            await updateDoc(doc(db, COLLECTIONS.studentUsers, userDoc.id), {\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: Timestamp.now(),\r\n                streakDays: newStreak,\r\n                xpPoints: increment(10), // Daily login bonus!\r\n            });\r\n\r\n            // Create session\r\n            const session = await this.createSession(userDoc.id);\r\n\r\n            // Build user object\r\n            const user: StudentUser = {\r\n                id: userDoc.id,\r\n                phone: userData.phone,\r\n                name: userData.name,\r\n                grade: userData.grade,\r\n                school: userData.school,\r\n                city: userData.city,\r\n                state: userData.state,\r\n                profilePicture: userData.profilePicture,\r\n                gender: userData.gender,\r\n                interests: userData.interests || [],\r\n                appliedOpportunities: userData.appliedOpportunities || [],\r\n                savedOpportunities: userData.savedOpportunities || [],\r\n                xpPoints: (userData.xpPoints || 0) + 10,\r\n                level: userData.level || 1,\r\n                streakDays: newStreak,\r\n                badges: userData.badges || [],\r\n                isVerified: userData.isVerified || true,\r\n                isBlocked: false,\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: new Date(),\r\n                createdAt: userData.createdAt?.toDate() || new Date(),\r\n                createdVia: userData.createdVia || 'web',\r\n            };\r\n\r\n            return { success: true, user, session };\r\n        } catch (error) {\r\n            console.error(\"Login error:\", error);\r\n            return { success: false, error: \"Something went wrong. Please try again!\" };\r\n        }\r\n    },\r\n\r\n    // ============================================\r\n    // SESSION MANAGEMENT\r\n    // ============================================\r\n\r\n    async createSession(userId: string): Promise<SessionInfo> {\r\n        const { device, browser } = getDeviceInfo();\r\n        const sessionId = `session_${userId}_${Date.now()}`;\r\n        const now = new Date();\r\n\r\n        const session: SessionInfo = {\r\n            id: sessionId,\r\n            userId,\r\n            device,\r\n            browser,\r\n            createdAt: now,\r\n            lastActiveAt: now,\r\n            isActive: true,\r\n        };\r\n\r\n        await setDoc(doc(db, COLLECTIONS.studentSessions, sessionId), {\r\n            ...session,\r\n            createdAt: Timestamp.fromDate(now),\r\n            lastActiveAt: Timestamp.fromDate(now),\r\n        });\r\n\r\n        // Store session ID in localStorage\r\n        localStorage.setItem('myark_session', sessionId);\r\n        localStorage.setItem('myark_user_id', userId);\r\n\r\n        return session;\r\n    },\r\n\r\n    async validateSession(sessionId: string): Promise<StudentUser | null> {\r\n        try {\r\n            const sessionDoc = await getDoc(doc(db, COLLECTIONS.studentSessions, sessionId));\r\n            if (!sessionDoc.exists()) return null;\r\n\r\n            const sessionData = sessionDoc.data();\r\n            if (!sessionData.isActive) return null;\r\n\r\n            // Check session expiry\r\n            const createdAt = sessionData.createdAt?.toDate() || new Date();\r\n            const expiryDate = new Date(createdAt.getTime() + SESSION_EXPIRY_DAYS * 24 * 60 * 60 * 1000);\r\n            if (new Date() > expiryDate) {\r\n                await this.terminateSession(sessionId);\r\n                return null;\r\n            }\r\n\r\n            // Get user data\r\n            const userDoc = await getDoc(doc(db, COLLECTIONS.studentUsers, sessionData.userId));\r\n            if (!userDoc.exists()) return null;\r\n\r\n            const userData = userDoc.data();\r\n            if (userData.isBlocked) return null;\r\n\r\n            // Update last active\r\n            await updateDoc(doc(db, COLLECTIONS.studentSessions, sessionId), {\r\n                lastActiveAt: Timestamp.now(),\r\n            });\r\n\r\n            return {\r\n                id: userDoc.id,\r\n                phone: userData.phone,\r\n                name: userData.name,\r\n                grade: userData.grade,\r\n                school: userData.school,\r\n                city: userData.city,\r\n                state: userData.state,\r\n                profilePicture: userData.profilePicture,\r\n                gender: userData.gender,\r\n                interests: userData.interests || [],\r\n                appliedOpportunities: userData.appliedOpportunities || [],\r\n                savedOpportunities: userData.savedOpportunities || [],\r\n                xpPoints: userData.xpPoints || 0,\r\n                level: userData.level || 1,\r\n                streakDays: userData.streakDays || 0,\r\n                badges: userData.badges || [],\r\n                isVerified: userData.isVerified || true,\r\n                isBlocked: false,\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: userData.lastLoginAt?.toDate(),\r\n                createdAt: userData.createdAt?.toDate() || new Date(),\r\n                createdVia: userData.createdVia || 'web',\r\n            };\r\n        } catch (error) {\r\n            console.error(\"Session validation error:\", error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    async terminateSession(sessionId: string): Promise<void> {\r\n        try {\r\n            await updateDoc(doc(db, COLLECTIONS.studentSessions, sessionId), {\r\n                isActive: false,\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Session termination error:\", error);\r\n        }\r\n    },\r\n\r\n    async logout(): Promise<void> {\r\n        const sessionId = localStorage.getItem('myark_session');\r\n        if (sessionId) {\r\n            await this.terminateSession(sessionId);\r\n        }\r\n        localStorage.removeItem('myark_session');\r\n        localStorage.removeItem('myark_user_id');\r\n    },\r\n\r\n    // ============================================\r\n    // RATE LIMITING\r\n    // ============================================\r\n\r\n    async checkRateLimit(userData: any): Promise<RateLimitResult> {\r\n        const failedAttempts = userData.failedLoginAttempts || 0;\r\n        const lastFailed = userData.lastFailedAttempt?.toDate();\r\n\r\n        if (failedAttempts >= MAX_FAILED_ATTEMPTS && lastFailed) {\r\n            const lockoutUntil = new Date(lastFailed.getTime() + LOCKOUT_DURATION_MS);\r\n            if (new Date() < lockoutUntil) {\r\n                return {\r\n                    allowed: false,\r\n                    remainingAttempts: 0,\r\n                    lockoutUntil,\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            allowed: true,\r\n            remainingAttempts: MAX_FAILED_ATTEMPTS - failedAttempts,\r\n        };\r\n    },\r\n\r\n    async incrementFailedAttempts(userId: string): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            failedLoginAttempts: increment(1),\r\n            lastFailedAttempt: Timestamp.now(),\r\n        });\r\n    },\r\n\r\n    // ============================================\r\n    // ADMIN FUNCTIONS\r\n    // ============================================\r\n\r\n    async getAllUsers(filters?: { search?: string; blocked?: boolean }): Promise<StudentUser[]> {\r\n        try {\r\n            let q = collection(db, COLLECTIONS.studentUsers);\r\n            const snapshot = await getDocs(q);\r\n\r\n            let users = snapshot.docs.map(doc => {\r\n                const data = doc.data();\r\n                return {\r\n                    id: doc.id,\r\n                    phone: data.phone,\r\n                    name: data.name,\r\n                    grade: data.grade,\r\n                    school: data.school,\r\n                    city: data.city,\r\n                    xpPoints: data.xpPoints || 0,\r\n                    level: data.level || 1,\r\n                    streakDays: data.streakDays || 0,\r\n                    badges: data.badges || [],\r\n                    isVerified: data.isVerified || true,\r\n                    isBlocked: data.isBlocked || false,\r\n                    blockReason: data.blockReason,\r\n                    failedLoginAttempts: data.failedLoginAttempts || 0,\r\n                    lastLoginAt: data.lastLoginAt?.toDate(),\r\n                    lastFailedAttempt: data.lastFailedAttempt?.toDate(),\r\n                    createdAt: data.createdAt?.toDate() || new Date(),\r\n                    createdVia: data.createdVia || 'web',\r\n                    // Discovery Quiz Data\r\n                    personaGoal: data.personaGoal,\r\n                    competitiveness: data.competitiveness,\r\n                    weeklyTimeCommitment: data.weeklyTimeCommitment,\r\n                    deliveryPreference: data.deliveryPreference,\r\n                    interests: data.interests || [],\r\n                } as StudentUser;\r\n            });\r\n\r\n            // Apply filters\r\n            if (filters?.search) {\r\n                const search = filters.search.toLowerCase();\r\n                users = users.filter(u =>\r\n                    u.phone.includes(search) ||\r\n                    u.name?.toLowerCase().includes(search)\r\n                );\r\n            }\r\n\r\n            if (filters?.blocked !== undefined) {\r\n                users = users.filter(u => u.isBlocked === filters.blocked);\r\n            }\r\n\r\n            return users.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\r\n        } catch (error) {\r\n            console.error(\"Error fetching users:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    async getUserSessions(userId: string): Promise<SessionInfo[]> {\r\n        try {\r\n            const q = query(\r\n                collection(db, COLLECTIONS.studentSessions),\r\n                where(\"userId\", \"==\", userId)\r\n            );\r\n            const snapshot = await getDocs(q);\r\n\r\n            return snapshot.docs.map(doc => {\r\n                const data = doc.data();\r\n                return {\r\n                    id: doc.id,\r\n                    userId: data.userId,\r\n                    device: data.device,\r\n                    browser: data.browser,\r\n                    createdAt: data.createdAt?.toDate() || new Date(),\r\n                    lastActiveAt: data.lastActiveAt?.toDate() || new Date(),\r\n                    isActive: data.isActive,\r\n                };\r\n            }).sort((a, b) => b.lastActiveAt.getTime() - a.lastActiveAt.getTime());\r\n        } catch (error) {\r\n            console.error(\"Error fetching sessions:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    async blockUser(userId: string, reason: string): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            isBlocked: true,\r\n            blockReason: reason,\r\n        });\r\n\r\n        // Terminate all sessions\r\n        const sessions = await this.getUserSessions(userId);\r\n        for (const session of sessions) {\r\n            await this.terminateSession(session.id);\r\n        }\r\n    },\r\n\r\n    async unblockUser(userId: string): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            isBlocked: false,\r\n            blockReason: null,\r\n            failedLoginAttempts: 0,\r\n        });\r\n    },\r\n\r\n    async resetUserPin(userId: string, newPin: string): Promise<void> {\r\n        const pinHash = await hashPin(newPin);\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            pinHash,\r\n            failedLoginAttempts: 0,\r\n        });\r\n    },\r\n\r\n    async terminateAllUserSessions(userId: string): Promise<void> {\r\n        const sessions = await this.getUserSessions(userId);\r\n        for (const session of sessions) {\r\n            await this.terminateSession(session.id);\r\n        }\r\n    },\r\n\r\n    async updateUserXP(userId: string, xpDelta: number): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            xpPoints: increment(xpDelta),\r\n        });\r\n    },\r\n\r\n    // Update student profile\r\n    async updateProfile(userId: string, updates: Partial<StudentUser>): Promise<void> {\r\n        // Filter out undefined values and non-updatable fields\r\n        const allowedFields = [\r\n            'name', 'profilePicture', 'grade', 'school', 'city', 'state', 'gender', 'interests',\r\n            'personaGoal', 'competitiveness', 'weeklyTimeCommitment', 'deliveryPreference', 'badges'\r\n        ];\r\n        const filtered: Record<string, any> = {};\r\n\r\n        for (const [key, value] of Object.entries(updates)) {\r\n            if (allowedFields.includes(key) && value !== undefined) {\r\n                filtered[key] = value;\r\n            }\r\n        }\r\n\r\n        if (Object.keys(filtered).length > 0) {\r\n            await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), filtered);\r\n        }\r\n    },\r\n\r\n    // Save opportunity to user's savedOpportunities array\r\n    async saveOpportunity(userId: string, opportunityId: string): Promise<void> {\r\n        const { arrayUnion } = await import('firebase/firestore');\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            savedOpportunities: arrayUnion(opportunityId),\r\n            xpPoints: increment(5), // +5 XP for saving\r\n        });\r\n    },\r\n\r\n    // Unsave opportunity from user's savedOpportunities array\r\n    async unsaveOpportunity(userId: string, opportunityId: string): Promise<void> {\r\n        const { arrayRemove } = await import('firebase/firestore');\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            savedOpportunities: arrayRemove(opportunityId),\r\n        });\r\n    },\r\n\r\n    // Apply to opportunity and track it\r\n    async applyToOpportunity(userId: string, opportunityId: string): Promise<void> {\r\n        const { arrayUnion } = await import('firebase/firestore');\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            appliedOpportunities: arrayUnion(opportunityId),\r\n            xpPoints: increment(40), // +40 XP for applying\r\n        });\r\n    },\r\n\r\n    // Add XP when completing profile fields\r\n    async addProfileXP(userId: string, xpAmount: number): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            xpPoints: increment(xpAmount),\r\n        });\r\n    },\r\n};\r\n\r\nexport default studentAuthService;\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Phone\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTYuOTJ2M2EyIDIgMCAwIDEtMi4xOCAyIDE5Ljc5IDE5Ljc5IDAgMCAxLTguNjMtMy4wNyAxOS41IDE5LjUgMCAwIDEtNi02IDE5Ljc5IDE5Ljc5IDAgMCAxLTMuMDctOC42N0EyIDIgMCAwIDEgNC4xMSAyaDNhMiAyIDAgMCAxIDIgMS43MiAxMi44NCAxMi44NCAwIDAgMCAuNyAyLjgxIDIgMiAwIDAgMS0uNDUgMi4xMUw4LjA5IDkuOTFhMTYgMTYgMCAwIDAgNiA2bDEuMjctMS4yN2EyIDIgMCAwIDEgMi4xMS0uNDUgMTIuODQgMTIuODQgMCAwIDAgMi44MS43QTIgMiAwIDAgMSAyMiAxNi45MnoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/phone\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Phone = createLucideIcon('Phone', [\n  [\n    'path',\n    {\n      d: 'M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z',\n      key: 'foiqr5',\n    },\n  ],\n]);\n\nexport default Phone;\n"],"names":[],"mappings":"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A,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACH,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AACP,CAAA,CACF,CACD,CAAA,CAAA","ignoreList":[2]}