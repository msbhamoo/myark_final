module.exports=[25101,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(20237);let d="opportunities",e="blogs",f="careers",g="students",h="schoolDemos",i="notifications",j="badges",k="settings",l="organizers",m=a=>{if(a)return a instanceof b.Timestamp?a.toDate():a},n=a=>{if(!a)return null;if(a instanceof b.Timestamp)return a;try{let c=new Date(a);return isNaN(c.getTime())?null:b.Timestamp.fromDate(c)}catch(a){return null}},o=a=>{let b={};return Object.keys(a).forEach(c=>{void 0!==a[c]&&(b[c]=a[c])}),b},p={async getAll(a){let d=[(0,b.orderBy)("createdAt","desc")];a?.grade&&d.push((0,b.where)("grade","==",a.grade)),a?.limit&&d.push((0,b.limit)(a.limit));let e=(0,b.query)((0,b.collection)(c.db,g),...d);return(await (0,b.getDocs)(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:m(a.data().createdAt),lastActiveAt:m(a.data().lastActiveAt)}))},async getById(a){let d=(0,b.doc)(c.db,g,a),e=await (0,b.getDoc)(d);return e.exists()?{id:e.id,...e.data(),createdAt:m(e.data().createdAt),lastActiveAt:m(e.data().lastActiveAt)}:null},async getStats(){let a=(await (0,b.getDocs)((0,b.collection)(c.db,g))).docs.map(a=>a.data()),d=new Date(new Date().getTime()-6048e5);return{total:a.length,activeThisWeek:a.filter(a=>{let b=m(a.lastActiveAt);return b&&b>=d}).length,avgStreak:a.length>0?Math.round(a.reduce((a,b)=>a+(b.streakDays||0),0)/a.length):0}},async assignBadge(a,d){let e=(0,b.doc)(c.db,g,a);await (0,b.updateDoc)(e,{badges:(0,b.arrayUnion)(d),updatedAt:b.Timestamp.now()})},async removeBadge(a,d){let e=(0,b.doc)(c.db,g,a);await (0,b.updateDoc)(e,{badges:(0,b.arrayRemove)(d),updatedAt:b.Timestamp.now()})}},q={async getAll(a){let d=[(0,b.orderBy)("createdAt","desc")];a?.status&&"all"!==a.status&&d.push((0,b.where)("status","==",a.status));let e=(0,b.query)((0,b.collection)(c.db,h),...d);return(await (0,b.getDocs)(e)).docs.map(a=>({id:a.id,...a.data(),scheduledDate:m(a.data().scheduledDate),createdAt:m(a.data().createdAt),updatedAt:m(a.data().updatedAt)}))},async updateStatus(a,d,e){let f=(0,b.doc)(c.db,h,a);await (0,b.updateDoc)(f,{status:d,notes:e||null,updatedAt:b.Timestamp.now()})},async getCountByStatus(){let a=await (0,b.getDocs)((0,b.collection)(c.db,h)),d={pending:0,contacted:0,scheduled:0,completed:0,rejected:0};return a.docs.forEach(a=>{let b=a.data().status;void 0!==d[b]&&d[b]++}),d}};a.s(["badgesService",0,{async getAll(){let a=(0,b.query)((0,b.collection)(c.db,j),(0,b.orderBy)("createdAt","desc"));return(await (0,b.getDocs)(a)).docs.map(a=>({id:a.id,...a.data(),createdAt:m(a.data().createdAt),updatedAt:m(a.data().updatedAt)}))},async getById(a){let d=(0,b.doc)(c.db,j,a),e=await (0,b.getDoc)(d);return e.exists()?{id:e.id,...e.data(),createdAt:m(e.data().createdAt),updatedAt:m(e.data().updatedAt)}:null},async create(a){let d=o(a);return(await (0,b.addDoc)((0,b.collection)(c.db,j),{...d,createdAt:b.Timestamp.now(),updatedAt:b.Timestamp.now()})).id},async update(a,d){let e=(0,b.doc)(c.db,j,a);await (0,b.updateDoc)(e,{...o(d),updatedAt:b.Timestamp.now()})},async delete(a){await (0,b.deleteDoc)((0,b.doc)(c.db,j,a))}},"blogsService",0,{async getAll(a){let d=[];a?.status&&"all"!==a.status&&d.push((0,b.where)("status","==",a.status)),a?.limit&&d.push((0,b.limit)(a.limit));let f=(0,b.query)((0,b.collection)(c.db,e),...d);return(await (0,b.getDocs)(f)).docs.map(a=>({id:a.id,...a.data(),publishedAt:m(a.data().publishedAt),createdAt:m(a.data().createdAt),updatedAt:m(a.data().updatedAt)}))},async getById(a){let d=(0,b.doc)(c.db,e,a),f=await (0,b.getDoc)(d);return f.exists()?{id:f.id,...f.data(),publishedAt:m(f.data().publishedAt),createdAt:m(f.data().createdAt),updatedAt:m(f.data().updatedAt)}:null},async getBySlug(a){let d=(0,b.query)((0,b.collection)(c.db,e),(0,b.where)("slug","==",a),(0,b.limit)(1)),f=await (0,b.getDocs)(d);if(f.empty)return null;let g=f.docs[0];return{id:g.id,...g.data(),publishedAt:m(g.data().publishedAt),createdAt:m(g.data().createdAt),updatedAt:m(g.data().updatedAt)}},create:async a=>(await (0,b.addDoc)((0,b.collection)(c.db,e),{...a,viewCount:0,publishedAt:"published"===a.status?b.Timestamp.now():null,createdAt:b.Timestamp.now(),updatedAt:b.Timestamp.now()})).id,async update(a,d){let f=(0,b.doc)(c.db,e,a);await (0,b.updateDoc)(f,o({...d,updatedAt:b.Timestamp.now()}))},async delete(a){await (0,b.deleteDoc)((0,b.doc)(c.db,e,a))}},"careersService",0,{async getAll(a){let d=[(0,b.orderBy)("createdAt","desc")];a?.status&&"all"!==a.status&&d.push((0,b.where)("status","==",a.status)),a?.limit&&d.push((0,b.limit)(a.limit));let e=(0,b.query)((0,b.collection)(c.db,f),...d);return(await (0,b.getDocs)(e)).docs.map(a=>({id:a.id,...a.data(),postedAt:m(a.data().postedAt),expiresAt:m(a.data().expiresAt),createdAt:m(a.data().createdAt),updatedAt:m(a.data().updatedAt)}))},async getById(a){let d=(0,b.doc)(c.db,f,a),e=await (0,b.getDoc)(d);return e.exists()?{id:e.id,...e.data(),postedAt:m(e.data().postedAt),expiresAt:m(e.data().expiresAt),createdAt:m(e.data().createdAt),updatedAt:m(e.data().updatedAt)}:null},async getBySlug(a){let d=(0,b.query)((0,b.collection)(c.db,f),(0,b.where)("slug","==",a),(0,b.limit)(1)),e=await (0,b.getDocs)(d);if(e.empty)return null;let g=e.docs[0];return{id:g.id,...g.data(),postedAt:m(g.data().postedAt),expiresAt:m(g.data().expiresAt),createdAt:m(g.data().createdAt),updatedAt:m(g.data().updatedAt)}},create:async a=>(await (0,b.addDoc)((0,b.collection)(c.db,f),{...a,applicationCount:0,postedAt:b.Timestamp.now(),createdAt:b.Timestamp.now(),updatedAt:b.Timestamp.now()})).id,async update(a,d){let e=(0,b.doc)(c.db,f,a);await (0,b.updateDoc)(e,o({...d,updatedAt:b.Timestamp.now()}))},async delete(a){await (0,b.deleteDoc)((0,b.doc)(c.db,f,a))}},"dashboardService",0,{async getStats(){let[a,e,f]=await Promise.all([(0,b.getDocs)((0,b.collection)(c.db,d)),p.getStats(),q.getCountByStatus()]),g=a.docs.filter(a=>"published"===a.data().status).length;return{totalOpportunities:a.size,publishedOpportunities:g,totalStudents:e.total,activeStudents:e.activeThisWeek,pendingDemos:f.pending}}},"notificationsService",0,{async getAll(){let a=(0,b.query)((0,b.collection)(c.db,i),(0,b.orderBy)("createdAt","desc"));return(await (0,b.getDocs)(a)).docs.map(a=>({id:a.id,...a.data(),scheduledFor:m(a.data().scheduledFor),sentAt:m(a.data().sentAt),createdAt:m(a.data().createdAt)}))},send:async a=>(await (0,b.addDoc)((0,b.collection)(c.db,i),o({...a,sentAt:b.Timestamp.now(),createdAt:b.Timestamp.now()}))).id},"opportunitiesService",0,{async getAll(a){let e=[];a?.type&&"all"!==a.type&&e.push((0,b.where)("type","==",a.type)),a?.status&&"all"!==a.status&&e.push((0,b.where)("status","==",a.status)),a?.limit&&e.push((0,b.limit)(a.limit));let f=(0,b.query)((0,b.collection)(c.db,d),...e);return(await (0,b.getDocs)(f)).docs.map(a=>({id:a.id,...a.data(),dates:{registrationStart:m(a.data().dates?.registrationStart),registrationEnd:m(a.data().dates?.registrationEnd),eventDate:m(a.data().dates?.eventDate)},createdAt:m(a.data().createdAt),updatedAt:m(a.data().updatedAt)}))},async getById(a){let e=(0,b.doc)(c.db,d,a),f=await (0,b.getDoc)(e);return f.exists()?{id:f.id,...f.data(),dates:{registrationStart:m(f.data().dates?.registrationStart),registrationEnd:m(f.data().dates?.registrationEnd),eventDate:m(f.data().dates?.eventDate)},createdAt:m(f.data().createdAt),updatedAt:m(f.data().updatedAt)}:null},async create(a){let e=o(a);return(await (0,b.addDoc)((0,b.collection)(c.db,d),{...e,dates:{registrationStart:n(a.dates.registrationStart),registrationEnd:n(a.dates.registrationEnd),eventDate:n(a.dates.eventDate)},hypeCount:0,applicationCount:0,createdAt:b.Timestamp.now(),updatedAt:b.Timestamp.now()})).id},async update(a,e){let f=(0,b.doc)(c.db,d,a),g=o({...e,updatedAt:b.Timestamp.now()});e.dates&&(g.dates={registrationStart:n(e.dates.registrationStart),registrationEnd:n(e.dates.registrationEnd),eventDate:n(e.dates.eventDate)}),await (0,b.updateDoc)(f,g)},async hypeOpportunity(a){let e=(0,b.doc)(c.db,d,a);await (0,b.updateDoc)(e,{hypeCount:(0,b.increment)(1)})},async delete(a){await (0,b.deleteDoc)((0,b.doc)(c.db,d,a))},subscribe(a){let e=(0,b.query)((0,b.collection)(c.db,d),(0,b.orderBy)("createdAt","desc"));return(0,b.onSnapshot)(e,b=>{a(b.docs.map(a=>({id:a.id,...a.data(),dates:{registrationStart:m(a.data().dates?.registrationStart),registrationEnd:m(a.data().dates?.registrationEnd),eventDate:m(a.data().dates?.eventDate)},createdAt:m(a.data().createdAt),updatedAt:m(a.data().updatedAt)})))})}},"settingsService",0,{async getOpportunityTypes(){let a=(0,b.doc)(c.db,k,"opportunityTypes"),d=await (0,b.getDoc)(a);return d.exists()&&d.data().types||[]},async saveOpportunityTypes(a){let d=(0,b.doc)(c.db,k,"opportunityTypes");await (0,b.updateDoc)(d,{types:a})},async getGrades(){let a=(0,b.doc)(c.db,k,"grades"),d=await (0,b.getDoc)(a);return d.exists()?d.data().grades||[]:[6,7,8,9,10,11,12]},async saveGrades(a){let d=(0,b.doc)(c.db,k,"grades");await (0,b.updateDoc)(d,{grades:a})},async getTags(){let a=(0,b.doc)(c.db,k,"tags"),d=await (0,b.getDoc)(a);return d.exists()&&d.data().tags||[]},async saveTags(a){let d=(0,b.doc)(c.db,k,"tags");await (0,b.updateDoc)(d,{tags:a})},getOrganizers:async()=>(await (0,b.getDocs)((0,b.collection)(c.db,l))).docs.map(a=>({id:a.id,...a.data(),createdAt:m(a.data().createdAt),updatedAt:m(a.data().updatedAt)})),saveOrganizer:async a=>(await (0,b.addDoc)((0,b.collection)(c.db,l),o({...a,createdAt:b.Timestamp.now(),updatedAt:b.Timestamp.now()}))).id,async deleteOrganizer(a){await (0,b.deleteDoc)((0,b.doc)(c.db,l,a))}},"studentsService",0,p])}];

//# sourceMappingURL=src_lib_firestore_ts_d539f8e1._.js.map