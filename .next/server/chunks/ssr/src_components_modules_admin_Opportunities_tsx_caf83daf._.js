module.exports=[85740,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(50944),f=a.i(87532),g=a.i(15618),h=a.i(17755),i=a.i(50429),j=a.i(77156),k=a.i(24569),l=a.i(81560),m=a.i(96221),n=a.i(41675),o=a.i(60246),p=a.i(1027),q=a.i(8406),r=a.i(14574),s=a.i(58682),t=a.i(54614),u=a.i(99570),v=a.i(66718),w=a.i(86304),x=a.i(6015),y=a.i(35732),z=a.i(80701),A=a.i(91119),B=a.i(25101),C=a.i(58582);let D={draft:"bg-yellow-500/20 text-yellow-500",published:"bg-success/20 text-success",closed:"bg-muted text-muted-foreground"};a.s(["default",0,()=>{let a=(0,e.useRouter)(),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)("all"),[M,N]=(0,c.useState)("all"),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)([]),[U,V]=(0,c.useState)(!1),[W,X]=(0,c.useState)(null),{toast:Y}=(0,t.useToast)(),Z=async()=>{F(!0);try{let a=await B.opportunitiesService.getAll({type:"all"!==K?K:void 0,status:"all"!==M?M:void 0});H(a)}catch(a){console.error("Error fetching opportunities:",a)}finally{F(!1)}};(0,c.useEffect)(()=>{Z()},[K,M]);let $=async()=>{P(!0);try{let a=0;for(let b of aa)await B.opportunitiesService.syncApplicationCount(b.id),a++;Y({title:"Counts Synced",description:`Updated verified counts for ${a} opportunities.`}),Z()}catch(a){console.error("Bulk sync failed:",a),Y({title:"Error",description:"Bulk sync failed",variant:"destructive"})}finally{P(!1)}},_=async a=>{V(!0);try{let b=(await s.studentAuthService.getAllUsers()).filter(b=>b.appliedOpportunities?.includes(a));T(b)}catch(a){console.error("Error fetching applicants:",a),Y({title:"Error",description:"Could not load applicants",variant:"destructive"})}finally{V(!1)}},aa=G.filter(a=>a.title.toLowerCase().includes(I.toLowerCase())),ab=async a=>{if(confirm("Are you sure you want to delete this opportunity?"))try{await B.opportunitiesService.delete(a),H(G.filter(b=>b.id!==a))}catch(a){console.error("Error deleting opportunity:",a)}};return E?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold font-display",children:"Opportunities"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Manage scholarships, competitions, and more"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(u.Button,{variant:"outline",className:"gap-2 border-secondary/30 text-secondary hover:bg-secondary/10",onClick:$,disabled:O||E,children:[O?(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(p.Zap,{className:"w-4 h-4"}),"Sync Counts"]}),(0,b.jsxs)(u.Button,{className:"gap-2",onClick:()=>a.push("/admin/opportunities/new"),children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Add Opportunity"]})]})]}),(0,b.jsx)(A.Card,{children:(0,b.jsx)(A.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(v.Input,{placeholder:"Search opportunities...",value:I,onChange:a=>J(a.target.value),className:"pl-9"})]}),(0,b.jsxs)(z.Select,{value:K,onValueChange:L,children:[(0,b.jsx)(z.SelectTrigger,{className:"w-full sm:w-[160px]",children:(0,b.jsx)(z.SelectValue,{placeholder:"All Types"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Types"}),C.OPPORTUNITY_TYPES.map(a=>(0,b.jsx)(z.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(z.Select,{value:M,onValueChange:N,children:[(0,b.jsx)(z.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,b.jsx)(z.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(z.SelectItem,{value:"published",children:"Published"}),(0,b.jsx)(z.SelectItem,{value:"draft",children:"Draft"}),(0,b.jsx)(z.SelectItem,{value:"closed",children:"Closed"})]})]})]})})}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,b.jsx)(A.Card,{children:(0,b.jsx)(A.CardContent,{className:"p-0",children:0===aa.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,b.jsx)(i.Target,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No opportunities yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first opportunity to get started"}),(0,b.jsxs)(u.Button,{onClick:()=>a.push("/admin/opportunities/new"),children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4 mr-2"}),"Add Opportunity"]})]}):(0,b.jsxs)(x.Table,{children:[(0,b.jsx)(x.TableHeader,{children:(0,b.jsxs)(x.TableRow,{children:[(0,b.jsx)(x.TableHead,{children:"Title"}),(0,b.jsx)(x.TableHead,{children:"Type"}),(0,b.jsx)(x.TableHead,{children:"Status"}),(0,b.jsx)(x.TableHead,{children:"Deadline"}),(0,b.jsx)(x.TableHead,{className:"text-right",children:"Applications"}),(0,b.jsx)(x.TableHead,{className:"text-right",children:"Views"}),(0,b.jsx)(x.TableHead,{className:"text-right",children:"Shares"}),(0,b.jsx)(x.TableHead,{className:"w-12"})]})}),(0,b.jsx)(x.TableBody,{children:aa.map((c,e)=>{var f;let g;return(0,b.jsxs)(d.motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*e},className:"group cursor-pointer hover:bg-muted/50",onClick:()=>a.push(`/admin/opportunities/${c.id}`),children:[(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[c.image&&(0,b.jsx)("img",{src:c.image,alt:"",className:"w-10 h-10 rounded object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:c.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:c.shortDescription})]})]})}),(0,b.jsx)(x.TableCell,{children:(0,b.jsx)(w.Badge,{variant:"outline",children:(f=c.type,g=C.OPPORTUNITY_TYPES.find(a=>a.id===f),g?.name||f)})}),(0,b.jsx)(x.TableCell,{children:(0,b.jsx)(w.Badge,{className:D[c.status],children:c.status})}),(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,b.jsx)(n.Calendar,{className:"w-3 h-3"}),c.dates?.registrationEnd?new Date(c.dates.registrationEnd).toLocaleDateString():"-"]})}),(0,b.jsx)(x.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsx)(o.Users,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium",children:c.applicationCount||0})]})}),(0,b.jsx)(x.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsx)(j.Eye,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium",children:c.viewCount||0})]})}),(0,b.jsx)(x.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsx)(i.Target,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium",children:c.shareCount||0})]})}),(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)(y.DropdownMenu,{children:[(0,b.jsx)(y.DropdownMenuTrigger,{asChild:!0,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(u.Button,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100",children:(0,b.jsx)(h.MoreHorizontal,{className:"w-4 h-4"})})}),(0,b.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(y.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),a.push(`/admin/opportunities/${c.id}`)},children:[(0,b.jsx)(k.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,b.jsxs)(y.DropdownMenuItem,{onClick:a=>{a.stopPropagation(),X({id:c.id,title:c.title}),T([]),R(!0),_(c.id)},children:[(0,b.jsx)(o.Users,{className:"w-4 h-4 mr-2"}),"View Applicants"]}),(0,b.jsxs)(y.DropdownMenuItem,{onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(j.Eye,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,b.jsx)(y.DropdownMenuSeparator,{}),(0,b.jsxs)(y.DropdownMenuItem,{className:"text-destructive",onClick:a=>{a.stopPropagation(),ab(c.id)},children:[(0,b.jsx)(l.Trash2,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},c.id)})})]})})})}),(0,b.jsx)(r.Dialog,{open:Q,onOpenChange:R,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-3xl max-h-[80vh] overflow-hidden flex flex-col p-0 bg-card border-border/50",children:[(0,b.jsxs)(r.DialogHeader,{className:"p-6 border-b border-border/50 bg-muted/30 flex-row items-center justify-between space-y-0",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(r.DialogTitle,{className:"text-2xl font-display font-bold",children:"Quest Applicants"}),(0,b.jsxs)(r.DialogDescription,{className:"text-muted-foreground/80",children:["Verified participants for ",(0,b.jsxs)("span",{className:"text-primary font-medium",children:['"',W?.title,'"']})]})]}),(0,b.jsxs)(u.Button,{variant:"ghost",size:"sm",onClick:()=>W&&_(W.id),disabled:U,className:"gap-2 h-9 px-3 hover:bg-muted",children:[U?(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(q.Sparkles,{className:"w-4 h-4"}),"Refresh"]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto min-h-[300px]",children:U?(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center py-20 space-y-4",children:[(0,b.jsx)(m.Loader2,{className:"w-10 h-10 animate-spin text-primary"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground animate-pulse",children:"Summoning applicant list..."})]}):0===S.length?(0,b.jsxs)("div",{className:"py-20 text-center space-y-4",children:[(0,b.jsx)(o.Users,{className:"w-16 h-16 text-muted-foreground/20 mx-auto"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-lg font-medium text-muted-foreground",children:"No heroes found"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/60 max-w-xs mx-auto",children:"This quest hasn't attracted any participants yet. Time for some marketing magic?"})]})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"sticky top-0 bg-muted/95 backdrop-blur-sm z-10",children:(0,b.jsxs)("tr",{className:"border-b border-border/50 shadow-sm",children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground/70 uppercase tracking-wider text-xs",children:"Student"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground/70 uppercase tracking-wider text-xs",children:"Contact"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground/70 uppercase tracking-wider text-xs",children:"Class"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-bold text-muted-foreground/70 uppercase tracking-wider text-xs",children:"Aura (XP)"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right font-bold text-muted-foreground/70 uppercase tracking-wider text-xs pr-8",children:"Action"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-border/20",children:S.map(c=>(0,b.jsxs)("tr",{className:"transition-all hover:bg-muted/50 group",children:[(0,b.jsx)("td",{className:"px-6 py-5",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-11 h-11 rounded-full bg-gradient-to-br from-primary/10 via-secondary/10 to-primary/5 flex items-center justify-center font-bold text-primary border border-primary/10 shadow-sm",children:c.name?c.name.charAt(0):"S"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-bold text-foreground text-base leading-tight",children:c.name||"Anonymous Student"}),(0,b.jsxs)("div",{className:"text-[10px] text-muted-foreground uppercase tracking-widest font-semibold mt-0.5",children:["Level ",c.level||1," Student"]})]})]})}),(0,b.jsxs)("td",{className:"px-6 py-5",children:[(0,b.jsxs)("div",{className:"text-foreground font-mono text-xs",children:["+91 ",c.phone]}),(0,b.jsx)("div",{className:"text-[11px] text-muted-foreground mt-0.5",children:c.email||"No email provided"})]}),(0,b.jsx)("td",{className:"px-6 py-5",children:(0,b.jsxs)(w.Badge,{variant:"secondary",className:"bg-muted text-muted-foreground font-medium px-2 py-0",children:["Class ",c.grade||"N/A"]})}),(0,b.jsx)("td",{className:"px-6 py-5",children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-secondary font-black",children:[(0,b.jsx)(p.Zap,{className:"w-3.5 h-3.5 fill-current"}),c.xpPoints?.toLocaleString()]})}),(0,b.jsx)("td",{className:"px-6 py-5 text-right pr-8",children:(0,b.jsx)(u.Button,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-all hover:bg-primary/10 hover:text-primary rounded-full px-4",onClick:()=>{R(!1),a.push("/admin/students")},children:"Profile"})})]},c.id))})]})})}),(0,b.jsx)(r.DialogFooter,{className:"p-4 border-t border-border/50 bg-muted/20",children:(0,b.jsx)(u.Button,{variant:"outline",className:"rounded-full px-6",onClick:()=>R(!1),children:"Close"})})]})})]})}])}];

//# sourceMappingURL=src_components_modules_admin_Opportunities_tsx_caf83daf._.js.map