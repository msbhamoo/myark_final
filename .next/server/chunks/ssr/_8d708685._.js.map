{"version":3,"sources":["../../../../node_modules/%40radix-ui/react-presence/src/presence.tsx","../../../../node_modules/%40radix-ui/react-presence/src/use-state-machine.tsx","../../../../node_modules/lucide-react/src/icons/chevron-right.ts","../../../../node_modules/lucide-react/src/icons/zap.ts","../../../../src/lib/studentAuthService.ts"],"sourcesContent":["import * as React from 'react';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { useLayoutEffect } from '@radix-ui/react-use-layout-effect';\nimport { useStateMachine } from './use-state-machine';\n\ninterface PresenceProps {\n  children: React.ReactElement | ((props: { present: boolean }) => React.ReactElement);\n  present: boolean;\n}\n\nconst Presence: React.FC<PresenceProps> = (props) => {\n  const { present, children } = props;\n  const presence = usePresence(present);\n\n  const child = (\n    typeof children === 'function'\n      ? children({ present: presence.isPresent })\n      : React.Children.only(children)\n  ) as React.ReactElement<{ ref?: React.Ref<HTMLElement> }>;\n\n  const ref = useComposedRefs(presence.ref, getElementRef(child));\n  const forceMount = typeof children === 'function';\n  return forceMount || presence.isPresent ? React.cloneElement(child, { ref }) : null;\n};\n\nPresence.displayName = 'Presence';\n\n/* -------------------------------------------------------------------------------------------------\n * usePresence\n * -----------------------------------------------------------------------------------------------*/\n\nfunction usePresence(present: boolean) {\n  const [node, setNode] = React.useState<HTMLElement>();\n  const stylesRef = React.useRef<CSSStyleDeclaration | null>(null);\n  const prevPresentRef = React.useRef(present);\n  const prevAnimationNameRef = React.useRef<string>('none');\n  const initialState = present ? 'mounted' : 'unmounted';\n  const [state, send] = useStateMachine(initialState, {\n    mounted: {\n      UNMOUNT: 'unmounted',\n      ANIMATION_OUT: 'unmountSuspended',\n    },\n    unmountSuspended: {\n      MOUNT: 'mounted',\n      ANIMATION_END: 'unmounted',\n    },\n    unmounted: {\n      MOUNT: 'mounted',\n    },\n  });\n\n  React.useEffect(() => {\n    const currentAnimationName = getAnimationName(stylesRef.current);\n    prevAnimationNameRef.current = state === 'mounted' ? currentAnimationName : 'none';\n  }, [state]);\n\n  useLayoutEffect(() => {\n    const styles = stylesRef.current;\n    const wasPresent = prevPresentRef.current;\n    const hasPresentChanged = wasPresent !== present;\n\n    if (hasPresentChanged) {\n      const prevAnimationName = prevAnimationNameRef.current;\n      const currentAnimationName = getAnimationName(styles);\n\n      if (present) {\n        send('MOUNT');\n      } else if (currentAnimationName === 'none' || styles?.display === 'none') {\n        // If there is no exit animation or the element is hidden, animations won't run\n        // so we unmount instantly\n        send('UNMOUNT');\n      } else {\n        /**\n         * When `present` changes to `false`, we check changes to animation-name to\n         * determine whether an animation has started. We chose this approach (reading\n         * computed styles) because there is no `animationrun` event and `animationstart`\n         * fires after `animation-delay` has expired which would be too late.\n         */\n        const isAnimating = prevAnimationName !== currentAnimationName;\n\n        if (wasPresent && isAnimating) {\n          send('ANIMATION_OUT');\n        } else {\n          send('UNMOUNT');\n        }\n      }\n\n      prevPresentRef.current = present;\n    }\n  }, [present, send]);\n\n  useLayoutEffect(() => {\n    if (node) {\n      let timeoutId: number;\n      const ownerWindow = node.ownerDocument.defaultView ?? window;\n      /**\n       * Triggering an ANIMATION_OUT during an ANIMATION_IN will fire an `animationcancel`\n       * event for ANIMATION_IN after we have entered `unmountSuspended` state. So, we\n       * make sure we only trigger ANIMATION_END for the currently active animation.\n       */\n      const handleAnimationEnd = (event: AnimationEvent) => {\n        const currentAnimationName = getAnimationName(stylesRef.current);\n        const isCurrentAnimation = currentAnimationName.includes(event.animationName);\n        if (event.target === node && isCurrentAnimation) {\n          // With React 18 concurrency this update is applied a frame after the\n          // animation ends, creating a flash of visible content. By setting the\n          // animation fill mode to \"forwards\", we force the node to keep the\n          // styles of the last keyframe, removing the flash.\n          //\n          // Previously we flushed the update via ReactDom.flushSync, but with\n          // exit animations this resulted in the node being removed from the\n          // DOM before the synthetic animationEnd event was dispatched, meaning\n          // user-provided event handlers would not be called.\n          // https://github.com/radix-ui/primitives/pull/1849\n          send('ANIMATION_END');\n          if (!prevPresentRef.current) {\n            const currentFillMode = node.style.animationFillMode;\n            node.style.animationFillMode = 'forwards';\n            // Reset the style after the node had time to unmount (for cases\n            // where the component chooses not to unmount). Doing this any\n            // sooner than `setTimeout` (e.g. with `requestAnimationFrame`)\n            // still causes a flash.\n            timeoutId = ownerWindow.setTimeout(() => {\n              if (node.style.animationFillMode === 'forwards') {\n                node.style.animationFillMode = currentFillMode;\n              }\n            });\n          }\n        }\n      };\n      const handleAnimationStart = (event: AnimationEvent) => {\n        if (event.target === node) {\n          // if animation occurred, store its name as the previous animation.\n          prevAnimationNameRef.current = getAnimationName(stylesRef.current);\n        }\n      };\n      node.addEventListener('animationstart', handleAnimationStart);\n      node.addEventListener('animationcancel', handleAnimationEnd);\n      node.addEventListener('animationend', handleAnimationEnd);\n      return () => {\n        ownerWindow.clearTimeout(timeoutId);\n        node.removeEventListener('animationstart', handleAnimationStart);\n        node.removeEventListener('animationcancel', handleAnimationEnd);\n        node.removeEventListener('animationend', handleAnimationEnd);\n      };\n    } else {\n      // Transition to the unmounted state if the node is removed prematurely.\n      // We avoid doing so during cleanup as the node may change but still exist.\n      send('ANIMATION_END');\n    }\n  }, [node, send]);\n\n  return {\n    isPresent: ['mounted', 'unmountSuspended'].includes(state),\n    ref: React.useCallback((node: HTMLElement) => {\n      stylesRef.current = node ? getComputedStyle(node) : null;\n      setNode(node);\n    }, []),\n  };\n}\n\n/* -----------------------------------------------------------------------------------------------*/\n\nfunction getAnimationName(styles: CSSStyleDeclaration | null) {\n  return styles?.animationName || 'none';\n}\n\n// Before React 19 accessing `element.props.ref` will throw a warning and suggest using `element.ref`\n// After React 19 accessing `element.ref` does the opposite.\n// https://github.com/facebook/react/pull/28348\n//\n// Access the ref using the method that doesn't yield a warning.\nfunction getElementRef(element: React.ReactElement<{ ref?: React.Ref<unknown> }>) {\n  // React <=18 in DEV\n  let getter = Object.getOwnPropertyDescriptor(element.props, 'ref')?.get;\n  let mayWarn = getter && 'isReactWarning' in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return (element as any).ref;\n  }\n\n  // React 19 in DEV\n  getter = Object.getOwnPropertyDescriptor(element, 'ref')?.get;\n  mayWarn = getter && 'isReactWarning' in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.props.ref;\n  }\n\n  // Not DEV\n  return element.props.ref || (element as any).ref;\n}\n\nconst Root = Presence;\n\nexport {\n  Presence,\n  //\n  Root,\n};\nexport type { PresenceProps };\n","import * as React from 'react';\n\ntype Machine<S> = { [k: string]: { [k: string]: S } };\ntype MachineState<T> = keyof T;\ntype MachineEvent<T> = keyof UnionToIntersection<T[keyof T]>;\n\n// \uD83E\uDD2F https://fettblog.eu/typescript-union-to-intersection/\ntype UnionToIntersection<T> = (T extends any ? (x: T) => any : never) extends (x: infer R) => any\n  ? R\n  : never;\n\nexport function useStateMachine<M>(\n  initialState: MachineState<M>,\n  machine: M & Machine<MachineState<M>>\n) {\n  return React.useReducer((state: MachineState<M>, event: MachineEvent<M>): MachineState<M> => {\n    const nextState = (machine[state] as any)[event];\n    return nextState ?? state;\n  }, initialState);\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtOSAxOCA2LTYtNi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevron-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronRight = createLucideIcon('ChevronRight', [\n  ['path', { d: 'm9 18 6-6-6-6', key: 'mthhwq' }],\n]);\n\nexport default ChevronRight;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Zap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNCAxNGExIDEgMCAwIDEtLjc4LTEuNjNsOS45LTEwLjJhLjUuNSAwIDAgMSAuODYuNDZsLTEuOTIgNi4wMkExIDEgMCAwIDAgMTMgMTBoN2ExIDEgMCAwIDEgLjc4IDEuNjNsLTkuOSAxMC4yYS41LjUgMCAwIDEtLjg2LS40NmwxLjkyLTYuMDJBMSAxIDAgMCAwIDExIDE0eiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/zap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Zap = createLucideIcon('Zap', [\n  [\n    'path',\n    {\n      d: 'M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z',\n      key: '1xq2db',\n    },\n  ],\n]);\n\nexport default Zap;\n","/**\r\n * Student Authentication Service\r\n * Handles registration, login, session management, and security\r\n */\r\n\r\nimport {\r\n    collection,\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    query,\r\n    where,\r\n    getDocs,\r\n    Timestamp,\r\n    increment,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"./firebase\";\r\n\r\n// ============================================\r\n// TYPES\r\n// ============================================\r\n\r\nexport interface StudentUser {\r\n    id: string;\r\n    phone: string;\r\n    name?: string;\r\n    profilePicture?: string;\r\n    grade?: number;\r\n    school?: string;\r\n    city?: string;\r\n    state?: string;\r\n    gender?: 'male' | 'female' | 'other' | 'prefer_not_to_say';\r\n    interests: string[];\r\n    appliedOpportunities: string[];\r\n    savedOpportunities: string[];\r\n    xpPoints: number;\r\n    level: number;\r\n    streakDays: number;\r\n    badges: string[];\r\n    // Discovery Quiz Data\r\n    personaGoal?: 'top_college' | 'skills' | 'recognition' | 'exploring';\r\n    competitiveness?: 'chill' | 'balanced' | 'beast_mode';\r\n    weeklyTimeCommitment?: '1_2_hours' | '3_5_hours' | '5_plus_hours';\r\n    deliveryPreference?: 'online' | 'offline' | 'both';\r\n    isVerified: boolean;\r\n    isBlocked: boolean;\r\n    blockReason?: string;\r\n    failedLoginAttempts: number;\r\n    lastFailedAttempt?: Date;\r\n    lastLoginAt?: Date;\r\n    createdAt: Date;\r\n    createdVia: 'web' | 'mobile' | 'admin';\r\n}\r\n\r\nexport interface SessionInfo {\r\n    id: string;\r\n    userId: string;\r\n    device: string;\r\n    browser: string;\r\n    createdAt: Date;\r\n    lastActiveAt: Date;\r\n    isActive: boolean;\r\n}\r\n\r\nexport interface AuthResult {\r\n    success: boolean;\r\n    user?: StudentUser;\r\n    session?: SessionInfo;\r\n    error?: string;\r\n    errorCode?: 'INVALID_PHONE' | 'INVALID_PIN' | 'USER_NOT_FOUND' | 'WRONG_PIN' | 'RATE_LIMITED' | 'BLOCKED' | 'PIN_MISMATCH' | 'PHONE_EXISTS';\r\n}\r\n\r\nexport interface RateLimitResult {\r\n    allowed: boolean;\r\n    remainingAttempts: number;\r\n    lockoutUntil?: Date;\r\n}\r\n\r\nexport interface StudentLead {\r\n    id: string;\r\n    phone: string;\r\n    createdAt: Date;\r\n    converted: boolean;\r\n    convertedAt?: Date;\r\n    device: string;\r\n    browser: string;\r\n}\r\n\r\n// ============================================\r\n// CONSTANTS\r\n// ============================================\r\n\r\nconst COLLECTIONS = {\r\n    studentUsers: \"studentUsers\",\r\n    studentSessions: \"studentSessions\",\r\n    studentLeads: \"studentLeads\",\r\n    userPhones: \"userPhones\",\r\n} as const;\r\n\r\nconst MAX_FAILED_ATTEMPTS = 5;\r\nconst LOCKOUT_DURATION_MS = 5 * 60 * 1000; // 5 minutes\r\nconst SESSION_EXPIRY_DAYS = 30;\r\n\r\n// ============================================\r\n// CRYPTO HELPERS (PIN Hashing)\r\n// ============================================\r\n\r\nasync function hashPin(pin: string): Promise<string> {\r\n    // Use Web Crypto API for secure hashing\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(pin + 'myark_salt_2026');\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n}\r\n\r\nasync function verifyPin(pin: string, hash: string): Promise<boolean> {\r\n    const inputHash = await hashPin(pin);\r\n    return inputHash === hash;\r\n}\r\n\r\n// ============================================\r\n// DEVICE DETECTION\r\n// ============================================\r\n\r\nfunction getDeviceInfo(): { device: string; browser: string } {\r\n    const ua = navigator.userAgent;\r\n    let device = 'Unknown Device';\r\n    let browser = 'Unknown Browser';\r\n\r\n    // Detect device\r\n    if (/iPhone/i.test(ua)) device = 'iPhone';\r\n    else if (/iPad/i.test(ua)) device = 'iPad';\r\n    else if (/Android/i.test(ua)) device = 'Android';\r\n    else if (/Windows/i.test(ua)) device = 'Windows';\r\n    else if (/Mac/i.test(ua)) device = 'Mac';\r\n    else if (/Linux/i.test(ua)) device = 'Linux';\r\n\r\n    // Detect browser\r\n    if (/Chrome/i.test(ua) && !/Edg/i.test(ua)) browser = 'Chrome';\r\n    else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) browser = 'Safari';\r\n    else if (/Firefox/i.test(ua)) browser = 'Firefox';\r\n    else if (/Edg/i.test(ua)) browser = 'Edge';\r\n\r\n    return { device, browser };\r\n}\r\n\r\n/**\r\n * Calculates a new streak based on the last login time and the current streak.\r\n * @param lastLoginAt Date of the last login\r\n * @param currentStreak The current streak number\r\n * @returns The updated streak number\r\n */\r\nfunction calculateNewStreak(lastLoginAt: Date | undefined, currentStreak: number): number {\r\n    if (!lastLoginAt) return 1;\r\n\r\n    const now = new Date();\r\n    const lastDate = new Date(lastLoginAt);\r\n    lastDate.setHours(0, 0, 0, 0);\r\n    const nowDate = new Date(now);\r\n    nowDate.setHours(0, 0, 0, 0);\r\n\r\n    const dayDiff = Math.round((nowDate.getTime() - lastDate.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n    if (dayDiff === 1) {\r\n        // Logged in exactly the next day\r\n        return currentStreak + 1;\r\n    } else if (dayDiff > 1) {\r\n        // Missed at least one day\r\n        return 1;\r\n    } else if (dayDiff === 0) {\r\n        // Already logged in today\r\n        return currentStreak || 1;\r\n    }\r\n\r\n    return currentStreak || 1;\r\n}\r\n\r\n// ============================================\r\n// STUDENT AUTH SERVICE\r\n// ============================================\r\n\r\nexport const studentAuthService = {\r\n    // ============================================\r\n    // LEAD CAPTURE\r\n    // ============================================\r\n\r\n    async captureLead(phone: string): Promise<void> {\r\n        try {\r\n            const cleanPhone = phone.replace(/\\D/g, '');\r\n            if (cleanPhone.length !== 10) return;\r\n\r\n            const leadId = `lead_${cleanPhone}`;\r\n            const { device, browser } = getDeviceInfo();\r\n            const now = new Date();\r\n\r\n            await setDoc(doc(db, COLLECTIONS.studentLeads, leadId), {\r\n                id: leadId,\r\n                phone: cleanPhone,\r\n                createdAt: Timestamp.fromDate(now),\r\n                converted: false,\r\n                device,\r\n                browser,\r\n            }, { merge: true });\r\n        } catch (error) {\r\n            console.error(\"Lead capture error:\", error);\r\n        }\r\n    },\r\n\r\n    async convertLead(phone: string): Promise<void> {\r\n        try {\r\n            const cleanPhone = phone.replace(/\\D/g, '');\r\n            const leadId = `lead_${cleanPhone}`;\r\n            await updateDoc(doc(db, COLLECTIONS.studentLeads, leadId), {\r\n                converted: true,\r\n                convertedAt: Timestamp.now(),\r\n            });\r\n        } catch (error) {\r\n            // Might not exist, ignore\r\n        }\r\n    },\r\n\r\n    // ============================================\r\n    // REGISTRATION\r\n    // ============================================\r\n\r\n    async register(phone: string, pin: string): Promise<AuthResult> {\r\n        try {\r\n            // Validate phone format (Indian mobile)\r\n            const cleanPhone = phone.replace(/\\D/g, '');\r\n            if (cleanPhone.length !== 10) {\r\n                return { success: false, error: \"Please enter a valid 10-digit mobile number\", errorCode: 'INVALID_PHONE' };\r\n            }\r\n\r\n            // Validate PIN format\r\n            if (!/^\\d{4}$/.test(pin)) {\r\n                return { success: false, error: \"PIN must be 4 digits\", errorCode: 'INVALID_PIN' };\r\n            }\r\n\r\n            // Check if phone already registered\r\n            const phoneDoc = await getDoc(doc(db, COLLECTIONS.userPhones, cleanPhone));\r\n            if (phoneDoc.exists()) {\r\n                return { success: false, error: \"This number is already registered. Try logging in!\", errorCode: 'PHONE_EXISTS' };\r\n            }\r\n\r\n            // Hash the PIN\r\n            const pinHash = await hashPin(pin);\r\n\r\n            // Create user document\r\n            const userId = `user_${cleanPhone}_${Date.now()}`;\r\n            const now = new Date();\r\n\r\n            const newUser: StudentUser = {\r\n                id: userId,\r\n                phone: cleanPhone,\r\n                xpPoints: 50, // Welcome bonus!\r\n                level: 1,\r\n                streakDays: 1, // Start the first streak!\r\n                badges: ['early_bird'], // First badge!\r\n                interests: [],\r\n                appliedOpportunities: [],\r\n                savedOpportunities: [],\r\n                isVerified: true,\r\n                isBlocked: false,\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: now,\r\n                createdAt: now,\r\n                createdVia: 'web',\r\n            };\r\n\r\n            // Save to Firestore\r\n            await setDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n                ...newUser,\r\n                pinHash,\r\n                createdAt: Timestamp.fromDate(now),\r\n                lastLoginAt: Timestamp.fromDate(now),\r\n            });\r\n\r\n            // Create phone lookup for unauthenticated queries\r\n            await setDoc(doc(db, COLLECTIONS.userPhones, cleanPhone), {\r\n                phone: cleanPhone,\r\n                userId: userId,\r\n                createdAt: Timestamp.fromDate(now),\r\n            });\r\n\r\n            // Convert lead to customer/user\r\n            await this.convertLead(cleanPhone);\r\n\r\n            // Create session\r\n            const session = await this.createSession(userId);\r\n\r\n            return { success: true, user: newUser, session };\r\n        } catch (error) {\r\n            console.error(\"Registration error:\", error);\r\n            return { success: false, error: \"Something went wrong. Please try again!\" };\r\n        }\r\n    },\r\n\r\n    // ============================================\r\n    // LOGIN\r\n    // ============================================\r\n\r\n    async login(phone: string, pin: string): Promise<AuthResult> {\r\n        try {\r\n            // Validate phone format\r\n            const cleanPhone = phone.replace(/\\D/g, '');\r\n            if (cleanPhone.length !== 10) {\r\n                return { success: false, error: \"Please enter a valid 10-digit mobile number\", errorCode: 'INVALID_PHONE' };\r\n            }\r\n\r\n            // Find user by phone using phone lookup\r\n            const phoneDoc = await getDoc(doc(db, COLLECTIONS.userPhones, cleanPhone));\r\n            if (!phoneDoc.exists()) {\r\n                return { success: false, error: \"No account found with this number. Want to register?\", errorCode: 'USER_NOT_FOUND' };\r\n            }\r\n            const userId = phoneDoc.data().userId;\r\n\r\n            // Get user data\r\n            const userDoc = await getDoc(doc(db, COLLECTIONS.studentUsers, userId));\r\n            if (!userDoc.exists()) {\r\n                // Inconsistent state, treat as not found\r\n                return { success: false, error: \"No account found with this number. Want to register?\", errorCode: 'USER_NOT_FOUND' };\r\n            }\r\n            const userData = userDoc.data();\r\n\r\n            // Check if blocked\r\n            if (userData.isBlocked) {\r\n                return { success: false, error: \"Your account has been blocked. Contact support for help.\", errorCode: 'BLOCKED' };\r\n            }\r\n\r\n            // Check rate limiting\r\n            const rateLimit = await this.checkRateLimit(userData);\r\n            if (!rateLimit.allowed) {\r\n                const waitTime = Math.ceil((rateLimit.lockoutUntil!.getTime() - Date.now()) / 60000);\r\n                return {\r\n                    success: false,\r\n                    error: `Too many attempts! Take a break for ${waitTime} min â˜•`,\r\n                    errorCode: 'RATE_LIMITED'\r\n                };\r\n            }\r\n\r\n            // Verify PIN\r\n            const isValidPin = await verifyPin(pin, userData.pinHash);\r\n            if (!isValidPin) {\r\n                await this.incrementFailedAttempts(userId);\r\n                const remaining = MAX_FAILED_ATTEMPTS - (userData.failedLoginAttempts + 1);\r\n                return {\r\n                    success: false,\r\n                    error: remaining > 0\r\n                        ? `Wrong PIN! ${remaining} attempts left ðŸŽ¯`\r\n                        : \"Wrong PIN! Account locked for 5 minutes.\",\r\n                    errorCode: 'WRONG_PIN'\r\n                };\r\n            }\r\n\r\n            // Calculate new streak\r\n            const newStreak = calculateNewStreak(userData.lastLoginAt?.toDate(), userData.streakDays || 0);\r\n\r\n            // Clear failed attempts and update last login\r\n            await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: Timestamp.now(),\r\n                streakDays: newStreak,\r\n                xpPoints: increment(10), // Daily login bonus!\r\n            });\r\n\r\n            // Create session\r\n            const session = await this.createSession(userId);\r\n\r\n            // Build user object\r\n            const user: StudentUser = {\r\n                id: userId,\r\n                phone: userData.phone,\r\n                name: userData.name,\r\n                grade: userData.grade,\r\n                school: userData.school,\r\n                city: userData.city,\r\n                state: userData.state,\r\n                profilePicture: userData.profilePicture,\r\n                gender: userData.gender,\r\n                interests: userData.interests || [],\r\n                appliedOpportunities: userData.appliedOpportunities || [],\r\n                savedOpportunities: userData.savedOpportunities || [],\r\n                xpPoints: (userData.xpPoints || 0) + 10,\r\n                level: userData.level || 1,\r\n                streakDays: newStreak,\r\n                badges: userData.badges || [],\r\n                isVerified: userData.isVerified || true,\r\n                isBlocked: false,\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: new Date(),\r\n                createdAt: userData.createdAt?.toDate() || new Date(),\r\n                createdVia: userData.createdVia || 'web',\r\n            };\r\n\r\n            return { success: true, user, session };\r\n        } catch (error) {\r\n            console.error(\"Login error:\", error);\r\n            return { success: false, error: \"Something went wrong. Please try again!\" };\r\n        }\r\n    },\r\n\r\n    // ============================================\r\n    // SESSION MANAGEMENT\r\n    // ============================================\r\n\r\n    async createSession(userId: string): Promise<SessionInfo> {\r\n        const { device, browser } = getDeviceInfo();\r\n        const sessionId = `session_${userId}_${Date.now()}`;\r\n        const now = new Date();\r\n\r\n        const session: SessionInfo = {\r\n            id: sessionId,\r\n            userId,\r\n            device,\r\n            browser,\r\n            createdAt: now,\r\n            lastActiveAt: now,\r\n            isActive: true,\r\n        };\r\n\r\n        await setDoc(doc(db, COLLECTIONS.studentSessions, sessionId), {\r\n            ...session,\r\n            createdAt: Timestamp.fromDate(now),\r\n            lastActiveAt: Timestamp.fromDate(now),\r\n        });\r\n\r\n        // Store session ID in localStorage\r\n        localStorage.setItem('myark_session', sessionId);\r\n        localStorage.setItem('myark_user_id', userId);\r\n\r\n        return session;\r\n    },\r\n\r\n    async validateSession(sessionId: string): Promise<StudentUser | null> {\r\n        try {\r\n            const sessionDoc = await getDoc(doc(db, COLLECTIONS.studentSessions, sessionId));\r\n            if (!sessionDoc.exists()) return null;\r\n\r\n            const sessionData = sessionDoc.data();\r\n            if (!sessionData.isActive) return null;\r\n\r\n            // Check session expiry\r\n            const createdAt = sessionData.createdAt?.toDate() || new Date();\r\n            const expiryDate = new Date(createdAt.getTime() + SESSION_EXPIRY_DAYS * 24 * 60 * 60 * 1000);\r\n            if (new Date() > expiryDate) {\r\n                await this.terminateSession(sessionId);\r\n                return null;\r\n            }\r\n\r\n            // Get user data\r\n            const userDoc = await getDoc(doc(db, COLLECTIONS.studentUsers, sessionData.userId));\r\n            if (!userDoc.exists()) return null;\r\n\r\n            const userData = userDoc.data();\r\n            if (userData.isBlocked) return null;\r\n\r\n            // Update last active\r\n            await updateDoc(doc(db, COLLECTIONS.studentSessions, sessionId), {\r\n                lastActiveAt: Timestamp.now(),\r\n            });\r\n\r\n            return {\r\n                id: userDoc.id,\r\n                phone: userData.phone,\r\n                name: userData.name,\r\n                grade: userData.grade,\r\n                school: userData.school,\r\n                city: userData.city,\r\n                state: userData.state,\r\n                profilePicture: userData.profilePicture,\r\n                gender: userData.gender,\r\n                interests: userData.interests || [],\r\n                appliedOpportunities: userData.appliedOpportunities || [],\r\n                savedOpportunities: userData.savedOpportunities || [],\r\n                xpPoints: userData.xpPoints || 0,\r\n                level: userData.level || 1,\r\n                streakDays: userData.streakDays || 0,\r\n                badges: userData.badges || [],\r\n                isVerified: userData.isVerified || true,\r\n                isBlocked: false,\r\n                failedLoginAttempts: 0,\r\n                lastLoginAt: userData.lastLoginAt?.toDate(),\r\n                createdAt: userData.createdAt?.toDate() || new Date(),\r\n                createdVia: userData.createdVia || 'web',\r\n            };\r\n        } catch (error) {\r\n            console.error(\"Session validation error:\", error);\r\n            return null;\r\n        }\r\n    },\r\n\r\n    async terminateSession(sessionId: string): Promise<void> {\r\n        try {\r\n            await updateDoc(doc(db, COLLECTIONS.studentSessions, sessionId), {\r\n                isActive: false,\r\n            });\r\n        } catch (error) {\r\n            console.error(\"Session termination error:\", error);\r\n        }\r\n    },\r\n\r\n    async logout(): Promise<void> {\r\n        const sessionId = localStorage.getItem('myark_session');\r\n        if (sessionId) {\r\n            await this.terminateSession(sessionId);\r\n        }\r\n        localStorage.removeItem('myark_session');\r\n        localStorage.removeItem('myark_user_id');\r\n    },\r\n\r\n    // ============================================\r\n    // RATE LIMITING\r\n    // ============================================\r\n\r\n    async checkRateLimit(userData: any): Promise<RateLimitResult> {\r\n        const failedAttempts = userData.failedLoginAttempts || 0;\r\n        const lastFailed = userData.lastFailedAttempt?.toDate();\r\n\r\n        if (failedAttempts >= MAX_FAILED_ATTEMPTS && lastFailed) {\r\n            const lockoutUntil = new Date(lastFailed.getTime() + LOCKOUT_DURATION_MS);\r\n            if (new Date() < lockoutUntil) {\r\n                return {\r\n                    allowed: false,\r\n                    remainingAttempts: 0,\r\n                    lockoutUntil,\r\n                };\r\n            }\r\n        }\r\n\r\n        return {\r\n            allowed: true,\r\n            remainingAttempts: MAX_FAILED_ATTEMPTS - failedAttempts,\r\n        };\r\n    },\r\n\r\n    async incrementFailedAttempts(userId: string): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            failedLoginAttempts: increment(1),\r\n            lastFailedAttempt: Timestamp.now(),\r\n        });\r\n    },\r\n\r\n    // ============================================\r\n    // ADMIN FUNCTIONS\r\n    // ============================================\r\n\r\n    async getAllUsers(filters?: { search?: string; blocked?: boolean }): Promise<StudentUser[]> {\r\n        try {\r\n            let q = collection(db, COLLECTIONS.studentUsers);\r\n            const snapshot = await getDocs(q);\r\n\r\n            let users = snapshot.docs.map(doc => {\r\n                const data = doc.data();\r\n                return {\r\n                    id: doc.id,\r\n                    phone: data.phone,\r\n                    name: data.name,\r\n                    grade: data.grade,\r\n                    school: data.school,\r\n                    city: data.city,\r\n                    xpPoints: data.xpPoints || 0,\r\n                    level: data.level || 1,\r\n                    streakDays: data.streakDays || 0,\r\n                    badges: data.badges || [],\r\n                    isVerified: data.isVerified || true,\r\n                    isBlocked: data.isBlocked || false,\r\n                    blockReason: data.blockReason,\r\n                    failedLoginAttempts: data.failedLoginAttempts || 0,\r\n                    lastLoginAt: data.lastLoginAt?.toDate(),\r\n                    lastFailedAttempt: data.lastFailedAttempt?.toDate(),\r\n                    createdAt: data.createdAt?.toDate() || new Date(),\r\n                    createdVia: data.createdVia || 'web',\r\n                    // Discovery Quiz Data\r\n                    personaGoal: data.personaGoal,\r\n                    competitiveness: data.competitiveness,\r\n                    weeklyTimeCommitment: data.weeklyTimeCommitment,\r\n                    deliveryPreference: data.deliveryPreference,\r\n                    interests: data.interests || [],\r\n                    appliedOpportunities: data.appliedOpportunities || [],\r\n                    savedOpportunities: data.savedOpportunities || [],\r\n                    email: data.email,\r\n                } as StudentUser;\r\n            });\r\n\r\n            // Apply filters\r\n            if (filters?.search) {\r\n                const search = filters.search.toLowerCase();\r\n                users = users.filter(u =>\r\n                    u.phone.includes(search) ||\r\n                    u.name?.toLowerCase().includes(search)\r\n                );\r\n            }\r\n\r\n            if (filters?.blocked !== undefined) {\r\n                users = users.filter(u => u.isBlocked === filters.blocked);\r\n            }\r\n\r\n            return users.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\r\n        } catch (error) {\r\n            console.error(\"Error fetching users:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    async getUserSessions(userId: string): Promise<SessionInfo[]> {\r\n        try {\r\n            const q = query(\r\n                collection(db, COLLECTIONS.studentSessions),\r\n                where(\"userId\", \"==\", userId)\r\n            );\r\n            const snapshot = await getDocs(q);\r\n\r\n            return snapshot.docs.map(doc => {\r\n                const data = doc.data();\r\n                return {\r\n                    id: doc.id,\r\n                    userId: data.userId,\r\n                    device: data.device,\r\n                    browser: data.browser,\r\n                    createdAt: data.createdAt?.toDate() || new Date(),\r\n                    lastActiveAt: data.lastActiveAt?.toDate() || new Date(),\r\n                    isActive: data.isActive,\r\n                };\r\n            }).sort((a, b) => b.lastActiveAt.getTime() - a.lastActiveAt.getTime());\r\n        } catch (error) {\r\n            console.error(\"Error fetching sessions:\", error);\r\n            return [];\r\n        }\r\n    },\r\n\r\n    async blockUser(userId: string, reason: string): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            isBlocked: true,\r\n            blockReason: reason,\r\n        });\r\n\r\n        // Terminate all sessions\r\n        const sessions = await this.getUserSessions(userId);\r\n        for (const session of sessions) {\r\n            await this.terminateSession(session.id);\r\n        }\r\n    },\r\n\r\n    async unblockUser(userId: string): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            isBlocked: false,\r\n            blockReason: null,\r\n            failedLoginAttempts: 0,\r\n        });\r\n    },\r\n\r\n    async resetUserPin(userId: string, newPin: string): Promise<void> {\r\n        const pinHash = await hashPin(newPin);\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            pinHash,\r\n            failedLoginAttempts: 0,\r\n        });\r\n    },\r\n\r\n    async terminateAllUserSessions(userId: string): Promise<void> {\r\n        const sessions = await this.getUserSessions(userId);\r\n        for (const session of sessions) {\r\n            await this.terminateSession(session.id);\r\n        }\r\n    },\r\n\r\n    async updateUserXP(userId: string, xpDelta: number): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            xpPoints: increment(xpDelta),\r\n        });\r\n    },\r\n\r\n    // Update student profile\r\n    async updateProfile(userId: string, updates: Partial<StudentUser>): Promise<void> {\r\n        // Filter out undefined values and non-updatable fields\r\n        const allowedFields = [\r\n            'name', 'profilePicture', 'grade', 'school', 'city', 'state', 'gender', 'interests',\r\n            'personaGoal', 'competitiveness', 'weeklyTimeCommitment', 'deliveryPreference', 'badges'\r\n        ];\r\n        const filtered: Record<string, any> = {};\r\n\r\n        for (const [key, value] of Object.entries(updates)) {\r\n            if (allowedFields.includes(key) && value !== undefined) {\r\n                filtered[key] = value;\r\n            }\r\n        }\r\n\r\n        if (Object.keys(filtered).length > 0) {\r\n            await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), filtered);\r\n        }\r\n    },\r\n\r\n    // Save opportunity to user's savedOpportunities array\r\n    async saveOpportunity(userId: string, opportunityId: string): Promise<void> {\r\n        const { arrayUnion } = await import('firebase/firestore');\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            savedOpportunities: arrayUnion(opportunityId),\r\n            xpPoints: increment(5), // +5 XP for saving\r\n        });\r\n    },\r\n\r\n    // Unsave opportunity from user's savedOpportunities array\r\n    async unsaveOpportunity(userId: string, opportunityId: string): Promise<void> {\r\n        const { arrayRemove } = await import('firebase/firestore');\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            savedOpportunities: arrayRemove(opportunityId),\r\n        });\r\n    },\r\n\r\n    // Apply to opportunity and track it\r\n    async applyToOpportunity(userId: string, opportunityId: string): Promise<void> {\r\n        const { arrayUnion } = await import('firebase/firestore');\r\n        const userRef = doc(db, COLLECTIONS.studentUsers, userId);\r\n        const oppRef = doc(db, \"opportunities\", opportunityId);\r\n\r\n        await updateDoc(userRef, {\r\n            appliedOpportunities: arrayUnion(opportunityId),\r\n            xpPoints: increment(40), // +40 XP for applying\r\n        });\r\n\r\n        await updateDoc(oppRef, {\r\n            applicationCount: increment(1)\r\n        });\r\n    },\r\n\r\n    // Add XP when completing profile fields\r\n    async addProfileXP(userId: string, xpAmount: number): Promise<void> {\r\n        await updateDoc(doc(db, COLLECTIONS.studentUsers, userId), {\r\n            xpPoints: increment(xpAmount),\r\n        });\r\n    },\r\n};\r\n\r\nexport default studentAuthService;\r\n"],"names":["React","node"],"mappings":"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","ignoreList":[2,3]}