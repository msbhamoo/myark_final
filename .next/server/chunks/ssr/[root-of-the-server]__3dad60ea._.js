module.exports=[50522,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],50522)},30553,a=>{"use strict";var b=a.i(72131),c=a.i(35112),d=a.i(11011),e=a.i(87924),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{let f=(0,d.createSlot)(`Primitive.${c}`),g=b.forwardRef((a,b)=>{let{asChild:d,...g}=a;return(0,e.jsx)(d?f:c,{...g,ref:b})});return g.displayName=`Primitive.${c}`,{...a,[c]:g}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g])},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},11011,70121,a=>{"use strict";var b=a.i(72131);function c(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}function d(...a){return b=>{let d=!1,e=a.map(a=>{let e=c(a,b);return d||"function"!=typeof e||(d=!0),e});if(d)return()=>{for(let b=0;b<e.length;b++){let d=e[b];"function"==typeof d?d():c(a[b],null)}}}}function e(...a){return b.useCallback(d(...a),a)}a.s(["composeRefs",()=>d,"useComposedRefs",()=>e],70121);var f=a.i(87924);function g(a){var c;let e,g=(c=a,(e=b.forwardRef((a,c)=>{let{children:e,...f}=a;if(b.isValidElement(e)){var g;let a,h,i=(g=e,(h=(a=Object.getOwnPropertyDescriptor(g.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.ref:(h=(a=Object.getOwnPropertyDescriptor(g,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.props.ref:g.props.ref||g.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(f,e.props);return e.type!==b.Fragment&&(j.ref=c?d(c,i):i),b.cloneElement(e,j)}return b.Children.count(e)>1?b.Children.only(null):null})).displayName=`${c}.SlotClone`,e),h=b.forwardRef((a,c)=>{let{children:d,...e}=a,h=b.Children.toArray(d),i=h.find(k);if(i){let a=i.props.children,d=h.map(c=>c!==i?c:b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null);return(0,f.jsx)(g,{...e,ref:c,children:b.isValidElement(a)?b.cloneElement(a,void 0,d):null})}return(0,f.jsx)(g,{...e,ref:c,children:d})});return h.displayName=`${a}.Slot`,h}var h=g("Slot"),i=Symbol("radix.slottable");function j(a){let b=({children:a})=>(0,f.jsx)(f.Fragment,{children:a});return b.displayName=`${a}.Slottable`,b.__radixId=i,b}function k(a){return b.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===i}a.s(["Slot",()=>h,"createSlot",()=>g,"createSlottable",()=>j],11011)},187,a=>{"use strict";var b=a.i(98621);let c=a=>"boolean"==typeof a?`${a}`:0===a?"0":a,d=b.clsx;a.s(["cva",0,(a,b)=>e=>{var f;if((null==b?void 0:b.variants)==null)return d(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:g,defaultVariants:h}=b,i=Object.keys(g).map(a=>{let b=null==e?void 0:e[a],d=null==h?void 0:h[a];if(null===b)return null;let f=c(b)||c(d);return g[a][f]}),j=e&&Object.entries(e).reduce((a,b)=>{let[c,d]=b;return void 0===d||(a[c]=d),a},{});return d(a,i,null==b||null==(f=b.compoundVariants)?void 0:f.reduce((a,b)=>{let{class:c,className:d,...e}=b;return Object.entries(e).every(a=>{let[b,c]=a;return Array.isArray(c)?c.includes({...h,...j}[b]):({...h,...j})[b]===c})?[...a,c,d]:a},[]),null==e?void 0:e.class,null==e?void 0:e.className)}])},99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(187),f=a.i(68114);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_20px_hsl(185_100%_50%_/_0.3)]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary/50 bg-transparent text-foreground hover:bg-primary/10 hover:border-primary",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-[0_0_20px_hsl(15_95%_60%_/_0.3)]",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-gradient-to-r from-primary to-blue-500 text-primary-foreground hover:shadow-[0_0_40px_hsl(185_100%_50%_/_0.4)] hover:scale-105",accent:"bg-gradient-to-r from-secondary to-accent text-accent-foreground hover:shadow-[0_0_40px_hsl(45_100%_55%_/_0.4)] hover:scale-105",glass:"bg-white/5 backdrop-blur-xl border border-white/10 text-foreground hover:bg-white/10 hover:border-white/20",success:"bg-gradient-to-r from-success to-primary text-success-foreground hover:shadow-[0_0_40px_hsl(150_80%_50%_/_0.4)] hover:scale-105"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-lg px-4",lg:"h-14 rounded-2xl px-8 text-base",xl:"h-16 rounded-2xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h])},33508,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},77192,a=>{"use strict";var b=a.i(72131),c=a.i(70121),d=a.i(72752),e=a=>{var e;let g,h,{present:i,children:j}=a,k=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef(null),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(c.animationName);if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{i.current=a?getComputedStyle(a):null,h(a)},[])}}(i),l="function"==typeof j?j({present:k.isPresent}):b.Children.only(j),m=(0,c.useComposedRefs)(k.ref,(e=l,(h=(g=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.ref:(h=(g=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.props.ref:e.props.ref||e.ref));return"function"==typeof j||k.isPresent?b.cloneElement(l,{ref:m}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence",a.s(["Presence",()=>e])},1027,a=>{"use strict";let b=(0,a.i(70106).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["Zap",()=>b],1027)},58682,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(20237);let d="studentUsers",e="studentSessions",f="studentLeads",g="userPhones";async function h(a){let b=new TextEncoder().encode(a+"myark_salt_2026");return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",b))).map(a=>a.toString(16).padStart(2,"0")).join("")}async function i(a,b){return await h(a)===b}function j(){let a=navigator.userAgent,b="Unknown Device",c="Unknown Browser";return/iPhone/i.test(a)?b="iPhone":/iPad/i.test(a)?b="iPad":/Android/i.test(a)?b="Android":/Windows/i.test(a)?b="Windows":/Mac/i.test(a)?b="Mac":/Linux/i.test(a)&&(b="Linux"),/Chrome/i.test(a)&&!/Edg/i.test(a)?c="Chrome":/Safari/i.test(a)&&!/Chrome/i.test(a)?c="Safari":/Firefox/i.test(a)?c="Firefox":/Edg/i.test(a)&&(c="Edge"),{device:b,browser:c}}let k={async captureLead(a){try{let d=a.replace(/\D/g,"");if(10!==d.length)return;let e=`lead_${d}`,{device:g,browser:h}=j(),i=new Date;await (0,b.setDoc)((0,b.doc)(c.db,f,e),{id:e,phone:d,createdAt:b.Timestamp.fromDate(i),converted:!1,device:g,browser:h},{merge:!0})}catch(a){console.error("Lead capture error:",a)}},async convertLead(a){try{let d=a.replace(/\D/g,""),e=`lead_${d}`;await (0,b.updateDoc)((0,b.doc)(c.db,f,e),{converted:!0,convertedAt:b.Timestamp.now()})}catch(a){}},async register(a,e){try{let f=a.replace(/\D/g,"");if(10!==f.length)return{success:!1,error:"Please enter a valid 10-digit mobile number",errorCode:"INVALID_PHONE"};if(!/^\d{4}$/.test(e))return{success:!1,error:"PIN must be 4 digits",errorCode:"INVALID_PIN"};if((await (0,b.getDoc)((0,b.doc)(c.db,g,f))).exists())return{success:!1,error:"This number is already registered. Try logging in!",errorCode:"PHONE_EXISTS"};let i=await h(e),j=`user_${f}_${Date.now()}`,k=new Date,l={id:j,phone:f,xpPoints:50,level:1,streakDays:1,badges:["early_bird"],interests:[],appliedOpportunities:[],savedOpportunities:[],isVerified:!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:k,createdAt:k,createdVia:"web"};await (0,b.setDoc)((0,b.doc)(c.db,d,j),{...l,pinHash:i,createdAt:b.Timestamp.fromDate(k),lastLoginAt:b.Timestamp.fromDate(k)}),await (0,b.setDoc)((0,b.doc)(c.db,g,f),{phone:f,userId:j,createdAt:b.Timestamp.fromDate(k)}),await this.convertLead(f);let m=await this.createSession(j);return{success:!0,user:l,session:m}}catch(a){return console.error("Registration error:",a),{success:!1,error:"Something went wrong. Please try again!"}}},async login(a,e){try{let f=a.replace(/\D/g,"");if(10!==f.length)return{success:!1,error:"Please enter a valid 10-digit mobile number",errorCode:"INVALID_PHONE"};let h=await (0,b.getDoc)((0,b.doc)(c.db,g,f));if(!h.exists())return{success:!1,error:"No account found with this number. Want to register?",errorCode:"USER_NOT_FOUND"};let j=h.data().userId,k=await (0,b.getDoc)((0,b.doc)(c.db,d,j));if(!k.exists())return{success:!1,error:"No account found with this number. Want to register?",errorCode:"USER_NOT_FOUND"};let l=k.data();if(l.isBlocked)return{success:!1,error:"Your account has been blocked. Contact support for help.",errorCode:"BLOCKED"};let m=await this.checkRateLimit(l);if(!m.allowed){let a=Math.ceil((m.lockoutUntil.getTime()-Date.now())/6e4);return{success:!1,error:`Too many attempts! Take a break for ${a} min â˜•`,errorCode:"RATE_LIMITED"}}if(!await i(e,l.pinHash)){await this.incrementFailedAttempts(j);let a=5-(l.failedLoginAttempts+1);return{success:!1,error:a>0?`Wrong PIN! ${a} attempts left ðŸŽ¯`:"Wrong PIN! Account locked for 5 minutes.",errorCode:"WRONG_PIN"}}let n=function(a,b){if(!a)return 1;let c=new Date,d=new Date(a);d.setHours(0,0,0,0);let e=new Date(c);e.setHours(0,0,0,0);let f=Math.round((e.getTime()-d.getTime())/864e5);return 1===f?b+1:f>1?1:b||1}(l.lastLoginAt?.toDate(),l.streakDays||0);await (0,b.updateDoc)((0,b.doc)(c.db,d,j),{failedLoginAttempts:0,lastLoginAt:b.Timestamp.now(),streakDays:n,xpPoints:(0,b.increment)(10)});let o=await this.createSession(j),p={id:j,phone:l.phone,name:l.name,grade:l.grade,school:l.school,city:l.city,state:l.state,profilePicture:l.profilePicture,gender:l.gender,interests:l.interests||[],appliedOpportunities:l.appliedOpportunities||[],savedOpportunities:l.savedOpportunities||[],xpPoints:(l.xpPoints||0)+10,level:l.level||1,streakDays:n,badges:l.badges||[],isVerified:l.isVerified||!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:new Date,createdAt:l.createdAt?.toDate()||new Date,createdVia:l.createdVia||"web"};return{success:!0,user:p,session:o}}catch(a){return console.error("Login error:",a),{success:!1,error:"Something went wrong. Please try again!"}}},async createSession(a){let{device:d,browser:f}=j(),g=`session_${a}_${Date.now()}`,h=new Date,i={id:g,userId:a,device:d,browser:f,createdAt:h,lastActiveAt:h,isActive:!0};return await (0,b.setDoc)((0,b.doc)(c.db,e,g),{...i,createdAt:b.Timestamp.fromDate(h),lastActiveAt:b.Timestamp.fromDate(h)}),localStorage.setItem("myark_session",g),localStorage.setItem("myark_user_id",a),i},async validateSession(a){try{let f=await (0,b.getDoc)((0,b.doc)(c.db,e,a));if(!f.exists())return null;let g=f.data();if(!g.isActive)return null;let h=g.createdAt?.toDate()||new Date,i=new Date(h.getTime()+2592e6);if(new Date>i)return await this.terminateSession(a),null;let j=await (0,b.getDoc)((0,b.doc)(c.db,d,g.userId));if(!j.exists())return null;let k=j.data();if(k.isBlocked)return null;return await (0,b.updateDoc)((0,b.doc)(c.db,e,a),{lastActiveAt:b.Timestamp.now()}),{id:j.id,phone:k.phone,name:k.name,grade:k.grade,school:k.school,city:k.city,state:k.state,profilePicture:k.profilePicture,gender:k.gender,interests:k.interests||[],appliedOpportunities:k.appliedOpportunities||[],savedOpportunities:k.savedOpportunities||[],xpPoints:k.xpPoints||0,level:k.level||1,streakDays:k.streakDays||0,badges:k.badges||[],isVerified:k.isVerified||!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:k.lastLoginAt?.toDate(),createdAt:k.createdAt?.toDate()||new Date,createdVia:k.createdVia||"web"}}catch(a){return console.error("Session validation error:",a),null}},async terminateSession(a){try{await (0,b.updateDoc)((0,b.doc)(c.db,e,a),{isActive:!1})}catch(a){console.error("Session termination error:",a)}},async logout(){let a=localStorage.getItem("myark_session");a&&await this.terminateSession(a),localStorage.removeItem("myark_session"),localStorage.removeItem("myark_user_id")},async checkRateLimit(a){let b=a.failedLoginAttempts||0,c=a.lastFailedAttempt?.toDate();if(b>=5&&c){let a=new Date(c.getTime()+3e5);if(new Date<a)return{allowed:!1,remainingAttempts:0,lockoutUntil:a}}return{allowed:!0,remainingAttempts:5-b}},async incrementFailedAttempts(a){await (0,b.updateDoc)((0,b.doc)(c.db,d,a),{failedLoginAttempts:(0,b.increment)(1),lastFailedAttempt:b.Timestamp.now()})},async getAllUsers(a){try{let e=(0,b.collection)(c.db,d),f=(await (0,b.getDocs)(e)).docs.map(a=>{let b=a.data();return{id:a.id,phone:b.phone,name:b.name,grade:b.grade,school:b.school,city:b.city,xpPoints:b.xpPoints||0,level:b.level||1,streakDays:b.streakDays||0,badges:b.badges||[],isVerified:b.isVerified||!0,isBlocked:b.isBlocked||!1,blockReason:b.blockReason,failedLoginAttempts:b.failedLoginAttempts||0,lastLoginAt:b.lastLoginAt?.toDate(),lastFailedAttempt:b.lastFailedAttempt?.toDate(),createdAt:b.createdAt?.toDate()||new Date,createdVia:b.createdVia||"web",personaGoal:b.personaGoal,competitiveness:b.competitiveness,weeklyTimeCommitment:b.weeklyTimeCommitment,deliveryPreference:b.deliveryPreference,interests:b.interests||[],appliedOpportunities:b.appliedOpportunities||[],savedOpportunities:b.savedOpportunities||[],email:b.email}});if(a?.search){let b=a.search.toLowerCase();f=f.filter(a=>a.phone.includes(b)||a.name?.toLowerCase().includes(b))}return a?.blocked!==void 0&&(f=f.filter(b=>b.isBlocked===a.blocked)),f.sort((a,b)=>b.createdAt.getTime()-a.createdAt.getTime())}catch(a){return console.error("Error fetching users:",a),[]}},async getUserSessions(a){try{let d=(0,b.query)((0,b.collection)(c.db,e),(0,b.where)("userId","==",a));return(await (0,b.getDocs)(d)).docs.map(a=>{let b=a.data();return{id:a.id,userId:b.userId,device:b.device,browser:b.browser,createdAt:b.createdAt?.toDate()||new Date,lastActiveAt:b.lastActiveAt?.toDate()||new Date,isActive:b.isActive}}).sort((a,b)=>b.lastActiveAt.getTime()-a.lastActiveAt.getTime())}catch(a){return console.error("Error fetching sessions:",a),[]}},async blockUser(a,e){for(let f of(await (0,b.updateDoc)((0,b.doc)(c.db,d,a),{isBlocked:!0,blockReason:e}),await this.getUserSessions(a)))await this.terminateSession(f.id)},async unblockUser(a){await (0,b.updateDoc)((0,b.doc)(c.db,d,a),{isBlocked:!1,blockReason:null,failedLoginAttempts:0})},async resetUserPin(a,e){let f=await h(e);await (0,b.updateDoc)((0,b.doc)(c.db,d,a),{pinHash:f,failedLoginAttempts:0})},async terminateAllUserSessions(a){for(let b of(await this.getUserSessions(a)))await this.terminateSession(b.id)},async updateUserXP(a,e){await (0,b.updateDoc)((0,b.doc)(c.db,d,a),{xpPoints:(0,b.increment)(e)})},async updateProfile(a,e){let f=["name","profilePicture","grade","school","city","state","gender","interests","personaGoal","competitiveness","weeklyTimeCommitment","deliveryPreference","badges"],g={};for(let[a,b]of Object.entries(e))f.includes(a)&&void 0!==b&&(g[a]=b);Object.keys(g).length>0&&await (0,b.updateDoc)((0,b.doc)(c.db,d,a),g)},async saveOpportunity(e,f){let{arrayUnion:g}=await a.A(28162);await (0,b.updateDoc)((0,b.doc)(c.db,d,e),{savedOpportunities:g(f),xpPoints:(0,b.increment)(5)})},async unsaveOpportunity(e,f){let{arrayRemove:g}=await a.A(28162);await (0,b.updateDoc)((0,b.doc)(c.db,d,e),{savedOpportunities:g(f)})},async applyToOpportunity(e,f){let{arrayUnion:g}=await a.A(28162),h=(0,b.doc)(c.db,d,e),i=(0,b.doc)(c.db,"opportunities",f);await (0,b.updateDoc)(h,{appliedOpportunities:g(f),xpPoints:(0,b.increment)(40)}),await (0,b.updateDoc)(i,{applicationCount:(0,b.increment)(1)})},async addProfileXP(a,e){await (0,b.updateDoc)((0,b.doc)(c.db,d,a),{xpPoints:(0,b.increment)(e)})}};a.s(["default",0,k,"studentAuthService",0,k])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3dad60ea._.js.map