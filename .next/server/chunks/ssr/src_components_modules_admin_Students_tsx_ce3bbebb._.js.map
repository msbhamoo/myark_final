{"version":3,"sources":["../../../../src/components/modules/admin/Students.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport {\r\n    Search,\r\n    Users,\r\n    Flame,\r\n    Zap,\r\n    TrendingUp,\r\n    MoreHorizontal,\r\n    Eye,\r\n    Mail,\r\n    Loader2,\r\n    Medal,\r\n    Plus,\r\n    X,\r\n    Heart,\r\n    Key,\r\n    Clock,\r\n    Shield,\r\n} from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuSeparator,\r\n    DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport {\r\n    Sheet,\r\n    SheetContent,\r\n    SheetHeader,\r\n    SheetTitle,\r\n} from \"@/components/ui/sheet\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n    DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { studentsService, badgesService } from \"@/lib/firestore\";\r\nimport { studentAuthService } from \"@/lib/studentAuthService\";\r\nimport type { Student, Badge as BadgeType } from \"@/types/admin\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Students = () => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [students, setStudents] = useState<Student[]>([]);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [gradeFilter, setGradeFilter] = useState<string>(\"all\");\r\n    const [selectedStudent, setSelectedStudent] = useState<Student | null>(null);\r\n    const [allBadges, setAllBadges] = useState<BadgeType[]>([]);\r\n    const [isAssigning, setIsAssigning] = useState(false);\r\n    const [stats, setStats] = useState({ total: 0, activeThisWeek: 0, avgStreak: 0, newThisWeek: 0 });\r\n    const [showResetPinDialog, setShowResetPinDialog] = useState(false);\r\n    const [newPin, setNewPin] = useState(\"\");\r\n    const [actionLoading, setActionLoading] = useState(false);\r\n    const { toast } = useToast();\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [studentData, statsData, badgeData] = await Promise.all([\r\n                    studentsService.getAll({ grade: gradeFilter !== \"all\" ? parseInt(gradeFilter) : undefined }),\r\n                    studentsService.getStats(),\r\n                    badgesService.getAll(),\r\n                ]);\r\n                setStudents(studentData);\r\n                setStats({ ...statsData, newThisWeek: Math.round(statsData.total * 0.05) });\r\n                setAllBadges(badgeData);\r\n            } catch (error) {\r\n                console.error(\"Error fetching data:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [gradeFilter]);\r\n\r\n    const handleAssignBadge = async (badgeId: string) => {\r\n        if (!selectedStudent) return;\r\n        setIsAssigning(true);\r\n        try {\r\n            await studentsService.assignBadge(selectedStudent.id, badgeId);\r\n            const updatedStudent = {\r\n                ...selectedStudent,\r\n                badges: [...(selectedStudent.badges || []), badgeId]\r\n            };\r\n            setSelectedStudent(updatedStudent);\r\n            setStudents(prev => prev.map(s => s.id === selectedStudent.id ? updatedStudent : s));\r\n        } catch (error) {\r\n            console.error(\"Error assigning badge:\", error);\r\n        } finally {\r\n            setIsAssigning(false);\r\n        }\r\n    };\r\n\r\n    const handleRemoveBadge = async (badgeId: string) => {\r\n        if (!selectedStudent) return;\r\n        try {\r\n            await studentsService.removeBadge(selectedStudent.id, badgeId);\r\n            const updatedStudent = {\r\n                ...selectedStudent,\r\n                badges: (selectedStudent.badges || []).filter(id => id !== badgeId)\r\n            };\r\n            setSelectedStudent(updatedStudent);\r\n            setStudents(prev => prev.map(s => s.id === selectedStudent.id ? updatedStudent : s));\r\n        } catch (error) {\r\n            console.error(\"Error removing badge:\", error);\r\n        }\r\n    };\r\n\r\n    const handleResetPin = async () => {\r\n        if (!selectedStudent || newPin.length !== 4) return;\r\n        setActionLoading(true);\r\n        try {\r\n            await studentAuthService.resetUserPin(selectedStudent.id, newPin);\r\n            toast({ title: \"PIN Reset\", description: `New PIN set for student` });\r\n            setShowResetPinDialog(false);\r\n            setNewPin(\"\");\r\n        } catch (error) {\r\n            toast({ title: \"Error\", description: \"Failed to reset PIN\", variant: \"destructive\" });\r\n        } finally {\r\n            setActionLoading(false);\r\n        }\r\n    };\r\n\r\n    const formatLastActive = (date?: Date) => {\r\n        if (!date) return \"Never\";\r\n        const now = new Date();\r\n        const diff = now.getTime() - new Date(date).getTime();\r\n        const minutes = Math.floor(diff / 60000);\r\n        const hours = Math.floor(diff / 3600000);\r\n        const days = Math.floor(diff / 86400000);\r\n\r\n        if (minutes < 1) return \"Just now\";\r\n        if (minutes < 60) return `${minutes}m ago`;\r\n        if (hours < 24) return `${hours}h ago`;\r\n        if (days < 7) return `${days}d ago`;\r\n        return new Date(date).toLocaleDateString();\r\n    };\r\n\r\n    const filteredStudents = students.filter(student => {\r\n        const name = student.name || \"Anonymous\";\r\n        const email = student.email || \"\";\r\n        const phone = (student as any).phone || \"\";\r\n        return name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            phone.includes(searchQuery);\r\n    });\r\n\r\n    const isActiveRecently = (lastActive: Date | undefined) => {\r\n        if (!lastActive) return false;\r\n        const now = new Date();\r\n        const diff = now.getTime() - new Date(lastActive).getTime();\r\n        return diff < 24 * 60 * 60 * 1000; // 24 hours\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n                <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold font-display\">Students</h2>\r\n                <p className=\"text-muted-foreground\">Registered students and their activity</p>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <Card>\r\n                    <CardContent className=\"p-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"p-2 rounded-lg bg-primary/10\">\r\n                                <Users className=\"w-5 h-5 text-primary\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-2xl font-bold\">{stats.total.toLocaleString()}</p>\r\n                                <p className=\"text-sm text-muted-foreground\">Total Students</p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card>\r\n                    <CardContent className=\"p-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"p-2 rounded-lg bg-success/10\">\r\n                                <TrendingUp className=\"w-5 h-5 text-success\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-2xl font-bold\">{stats.activeThisWeek.toLocaleString()}</p>\r\n                                <p className=\"text-sm text-muted-foreground\">Active This Week</p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card>\r\n                    <CardContent className=\"p-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"p-2 rounded-lg bg-orange-500/10\">\r\n                                <Flame className=\"w-5 h-5 text-orange-500\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-2xl font-bold\">{stats.avgStreak}</p>\r\n                                <p className=\"text-sm text-muted-foreground\">Avg Streak Days</p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n                <Card>\r\n                    <CardContent className=\"p-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"p-2 rounded-lg bg-secondary/10\">\r\n                                <Zap className=\"w-5 h-5 text-secondary\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-2xl font-bold\">{stats.newThisWeek}</p>\r\n                                <p className=\"text-sm text-muted-foreground\">New This Week</p>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <Card>\r\n                <CardContent className=\"p-4\">\r\n                    <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                        <div className=\"relative flex-1\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"Search students...\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                className=\"pl-9\"\r\n                            />\r\n                        </div>\r\n                        <Select value={gradeFilter} onValueChange={setGradeFilter}>\r\n                            <SelectTrigger className=\"w-full sm:w-[150px]\">\r\n                                <SelectValue placeholder=\"All Grades\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"all\">All Grades</SelectItem>\r\n                                {[6, 7, 8, 9, 10, 11, 12].map(grade => (\r\n                                    <SelectItem key={grade} value={String(grade)}>Class {grade}</SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Table */}\r\n            <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\r\n                <Card>\r\n                    <CardContent className=\"p-0\">\r\n                        {filteredStudents.length === 0 ? (\r\n                            <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n                                <Users className=\"w-12 h-12 text-muted-foreground mb-4\" />\r\n                                <h3 className=\"text-lg font-semibold mb-2\">No students found</h3>\r\n                                <p className=\"text-muted-foreground\">Students will appear here when they register</p>\r\n                            </div>\r\n                        ) : (\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead>Student</TableHead>\r\n                                        <TableHead>Grade</TableHead>\r\n                                        <TableHead>School</TableHead>\r\n                                        <TableHead>Streak</TableHead>\r\n                                        <TableHead>XP</TableHead>\r\n                                        <TableHead>Applications</TableHead>\r\n                                        <TableHead>Last Active</TableHead>\r\n                                        <TableHead>Status</TableHead>\r\n                                        <TableHead className=\"w-12\"></TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {filteredStudents.map((student, index) => (\r\n                                        <motion.tr\r\n                                            key={student.id}\r\n                                            initial={{ opacity: 0, x: -20 }}\r\n                                            animate={{ opacity: 1, x: 0 }}\r\n                                            transition={{ delay: index * 0.03 }}\r\n                                            className=\"group cursor-pointer hover:bg-muted/50\"\r\n                                            onClick={() => setSelectedStudent(student)}\r\n                                        >\r\n                                            <TableCell>\r\n                                                <div className=\"flex items-center gap-3\">\r\n                                                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-primary-foreground font-semibold\">\r\n                                                        {(student.name || \"S\").charAt(0)}\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className=\"font-medium\">{student.name || \"Unnamed Student\"}</p>\r\n                                                        <p className=\"text-sm text-muted-foreground\">{student.email || (student as any).phone}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Badge variant=\"outline\">Class {student.grade}</Badge>\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-muted-foreground max-w-[150px] truncate\">\r\n                                                {student.school || \"-\"}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <div className=\"flex items-center gap-1\">\r\n                                                    <Flame className=\"w-4 h-4 text-orange-500\" />\r\n                                                    {student.streakDays}\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <div className=\"flex items-center gap-1\">\r\n                                                    <Zap className=\"w-4 h-4 text-yellow-500\" />\r\n                                                    {student.xpPoints.toLocaleString()}\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>{student.appliedOpportunities?.length || 0}</TableCell>\r\n                                            <TableCell className=\"text-sm text-muted-foreground whitespace-nowrap\">\r\n                                                <div className=\"flex items-center gap-1.5\">\r\n                                                    <Clock className=\"w-3.5 h-3.5\" />\r\n                                                    {formatLastActive(student.lastActiveAt)}\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {isActiveRecently(student.lastActiveAt) ? (\r\n                                                    <Badge className=\"bg-success/20 text-success border-success/30\">Active</Badge>\r\n                                                ) : (\r\n                                                    <Badge variant=\"outline\" className=\"text-muted-foreground\">Inactive</Badge>\r\n                                                )}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <DropdownMenu>\r\n                                                    <DropdownMenuTrigger asChild onClick={(e) => e.stopPropagation()}>\r\n                                                        <Button variant=\"ghost\" size=\"icon\" className=\"opacity-0 group-hover:opacity-100\">\r\n                                                            <MoreHorizontal className=\"w-4 h-4\" />\r\n                                                        </Button>\r\n                                                    </DropdownMenuTrigger>\r\n                                                    <DropdownMenuContent align=\"end\">\r\n                                                        <DropdownMenuItem onClick={() => setSelectedStudent(student)}>\r\n                                                            <Eye className=\"w-4 h-4 mr-2\" />\r\n                                                            View Profile\r\n                                                        </DropdownMenuItem>\r\n                                                        <DropdownMenuItem asChild>\r\n                                                            <a href={`mailto:${student.email}`}>\r\n                                                                <Mail className=\"w-4 h-4 mr-2\" />\r\n                                                                Send Email\r\n                                                            </a>\r\n                                                        </DropdownMenuItem>\r\n                                                        <DropdownMenuSeparator />\r\n                                                        <DropdownMenuItem onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            setSelectedStudent(student);\r\n                                                            setShowResetPinDialog(true);\r\n                                                        }}>\r\n                                                            <Key className=\"w-4 h-4 mr-2\" />\r\n                                                            Reset PIN\r\n                                                        </DropdownMenuItem>\r\n                                                    </DropdownMenuContent>\r\n                                                </DropdownMenu>\r\n                                            </TableCell>\r\n                                        </motion.tr>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </motion.div>\r\n\r\n            {/* Student Detail Sheet */}\r\n            <Sheet open={!!selectedStudent} onOpenChange={() => setSelectedStudent(null)}>\r\n                <SheetContent className=\"w-full sm:max-w-md overflow-y-auto\">\r\n                    <SheetHeader>\r\n                        <SheetTitle>Student Profile</SheetTitle>\r\n                    </SheetHeader>\r\n                    {selectedStudent && (\r\n                        <div className=\"mt-6 space-y-6\">\r\n                            {/* Avatar & Name */}\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-primary-foreground font-bold text-2xl\">\r\n                                    {(selectedStudent.name || \"S\").charAt(0)}\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"text-xl font-semibold\">{selectedStudent.name || \"Unnamed Student\"}</h3>\r\n                                    <p className=\"text-muted-foreground\">{selectedStudent.email || (selectedStudent as any).phone}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Stats */}\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                                <div className=\"text-center p-3 rounded-xl bg-muted/50\">\r\n                                    <div className=\"flex items-center justify-center gap-1 text-orange-500 mb-1\">\r\n                                        <Flame className=\"w-5 h-5\" />\r\n                                        <span className=\"text-xl font-bold\">{selectedStudent.streakDays}</span>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-muted-foreground\">Day Streak</p>\r\n                                </div>\r\n                                <div className=\"text-center p-3 rounded-xl bg-muted/50\">\r\n                                    <div className=\"flex items-center justify-center gap-1 text-yellow-500 mb-1\">\r\n                                        <Zap className=\"w-5 h-5\" />\r\n                                        <span className=\"text-xl font-bold\">{selectedStudent.xpPoints}</span>\r\n                                    </div>\r\n                                    <p className=\"text-xs text-muted-foreground\">XP Points</p>\r\n                                </div>\r\n                                <div className=\"text-center p-3 rounded-xl bg-muted/50\">\r\n                                    <p className=\"text-xl font-bold text-primary mb-1\">Lv {selectedStudent.level}</p>\r\n                                    <p className=\"text-xs text-muted-foreground\">Level</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Details */}\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex justify-between py-2 border-b border-border\">\r\n                                    <span className=\"text-muted-foreground\">Grade</span>\r\n                                    <span className=\"font-medium\">Class {selectedStudent.grade}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between py-2 border-b border-border\">\r\n                                    <span className=\"text-muted-foreground\">School</span>\r\n                                    <span className=\"font-medium\">{selectedStudent.school || \"-\"}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between py-2 border-b border-border\">\r\n                                    <span className=\"text-muted-foreground\">City</span>\r\n                                    <span className=\"font-medium\">{selectedStudent.city || \"-\"}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between py-2 border-b border-border\">\r\n                                    <span className=\"text-muted-foreground\">Applications</span>\r\n                                    <span className=\"font-medium\">{selectedStudent.appliedOpportunities?.length || 0}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between py-2 border-b border-border\">\r\n                                    <span className=\"text-muted-foreground\">Joined</span>\r\n                                    <span className=\"font-medium\">\r\n                                        {selectedStudent.createdAt ? new Date(selectedStudent.createdAt).toLocaleDateString() : \"-\"}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Discovery Insights */}\r\n                            {(selectedStudent.personaGoal || selectedStudent.competitiveness || selectedStudent.weeklyTimeCommitment || selectedStudent.deliveryPreference) && (\r\n                                <div className=\"space-y-4 pt-6 border-t border-border\">\r\n                                    <p className=\"text-sm font-bold flex items-center gap-2\">\r\n                                        <TrendingUp className=\"w-4 h-4 text-primary\" />\r\n                                        Discovery Insights\r\n                                    </p>\r\n                                    <div className=\"grid grid-cols-2 gap-4\">\r\n                                        {selectedStudent.personaGoal && (\r\n                                            <div className=\"p-3 rounded-xl bg-muted/30 border border-white/5\">\r\n                                                <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest mb-1\">Goal Vibe</p>\r\n                                                <p className=\"text-xs font-bold capitalize\">{selectedStudent.personaGoal.replace('_', ' ')}</p>\r\n                                            </div>\r\n                                        )}\r\n                                        {selectedStudent.competitiveness && (\r\n                                            <div className=\"p-3 rounded-xl bg-muted/30 border border-white/5\">\r\n                                                <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest mb-1\">Heat Level</p>\r\n                                                <p className=\"text-xs font-bold capitalize\">{selectedStudent.competitiveness.replace('_', ' ')}</p>\r\n                                            </div>\r\n                                        )}\r\n                                        {selectedStudent.weeklyTimeCommitment && (\r\n                                            <div className=\"p-3 rounded-xl bg-muted/30 border border-white/5\">\r\n                                                <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest mb-1\">Weekly Time</p>\r\n                                                <p className=\"text-xs font-bold capitalize\">{selectedStudent.weeklyTimeCommitment.replace(/_/g, ' ')}</p>\r\n                                            </div>\r\n                                        )}\r\n                                        {selectedStudent.deliveryPreference && (\r\n                                            <div className=\"p-3 rounded-xl bg-muted/30 border border-white/5\">\r\n                                                <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest mb-1\">Preference</p>\r\n                                                <p className=\"text-xs font-bold capitalize\">{selectedStudent.deliveryPreference}</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Interests */}\r\n                            {selectedStudent.interests?.length > 0 && (\r\n                                <div className=\"pt-6 border-t border-border\">\r\n                                    <p className=\"text-sm font-bold mb-3 flex items-center gap-2\">\r\n                                        <Heart className=\"w-4 h-4 text-rose-500\" />\r\n                                        Interests\r\n                                    </p>\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {selectedStudent.interests.map(interest => (\r\n                                            <Badge key={interest} variant=\"secondary\" className=\"px-3 py-1 bg-muted/50 border-white/5\">{interest}</Badge>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Badges Section */}\r\n                            <div className=\"space-y-4 pt-6 border-t border-border\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <p className=\"text-sm font-bold flex items-center gap-2\">\r\n                                        <Medal className=\"w-4 h-4 text-primary\" />\r\n                                        Earned Badges\r\n                                    </p>\r\n\r\n                                    <DropdownMenu>\r\n                                        <DropdownMenuTrigger asChild>\r\n                                            <Button variant=\"ghost\" size=\"sm\" className=\"h-8 gap-1.5 text-xs text-primary hover:text-primary hover:bg-primary/10\">\r\n                                                <Plus className=\"w-3.5 h-3.5\" />\r\n                                                Assign\r\n                                            </Button>\r\n                                        </DropdownMenuTrigger>\r\n                                        <DropdownMenuContent align=\"end\" className=\"w-56 overflow-hidden\">\r\n                                            <p className=\"px-2 py-1.5 text-xs font-bold text-muted-foreground uppercase tracking-widest bg-muted/30\">Select Badge</p>\r\n                                            <div className=\"max-h-[300px] overflow-y-auto\">\r\n                                                {allBadges.filter(b => !selectedStudent.badges?.includes(b.id)).length === 0 ? (\r\n                                                    <p className=\"p-4 text-center text-xs text-muted-foreground italic\">No badges left to assign</p>\r\n                                                ) : (\r\n                                                    allBadges\r\n                                                        .filter(b => !selectedStudent.badges?.includes(b.id))\r\n                                                        .map(badge => (\r\n                                                            <DropdownMenuItem key={badge.id} onClick={() => handleAssignBadge(badge.id)} className=\"gap-2\">\r\n                                                                <div className={cn(\"w-6 h-6 rounded flex items-center justify-center bg-primary/20\", badge.color)}>\r\n                                                                    <Medal className=\"w-3.5 h-3.5\" />\r\n                                                                </div>\r\n                                                                <span className=\"flex-1\">{badge.name}</span>\r\n                                                            </DropdownMenuItem>\r\n                                                        ))\r\n                                                )}\r\n                                            </div>\r\n                                        </DropdownMenuContent>\r\n                                    </DropdownMenu>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-3\">\r\n                                    {selectedStudent.badges?.map(badgeId => {\r\n                                        const badge = allBadges.find(b => b.id === badgeId);\r\n                                        if (!badge) return null;\r\n                                        return (\r\n                                            <div key={badgeId} className=\"group relative p-3 rounded-xl bg-muted/50 border border-white/5 flex flex-col items-center text-center gap-2 hover:border-primary/20 transition-all duration-300\">\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"icon\"\r\n                                                    className=\"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-destructive text-destructive-foreground opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                                    onClick={() => handleRemoveBadge(badgeId)}\r\n                                                >\r\n                                                    <X className=\"w-3 h-3\" />\r\n                                                </Button>\r\n                                                <div className={cn(\"w-10 h-10 rounded-lg flex items-center justify-center\", badge.color, \"bg-background shadow-sm\")}>\r\n                                                    <Medal className=\"w-5 h-5\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-[10px] font-bold line-clamp-1\">{badge.name}</p>\r\n                                                    <p className=\"text-[8px] text-muted-foreground uppercase tracking-wider\">{badge.category}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                    {(!selectedStudent.badges || selectedStudent.badges.length === 0) && (\r\n                                        <div className=\"col-span-2 py-8 text-center bg-muted/30 rounded-xl border border-dashed border-border/50\">\r\n                                            <Medal className=\"w-8 h-8 text-muted-foreground/30 mx-auto mb-2\" />\r\n                                            <p className=\"text-xs text-muted-foreground italic\">No badges earned yet</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </SheetContent>\r\n            </Sheet>\r\n\r\n            {/* Reset PIN Dialog */}\r\n            <Dialog open={showResetPinDialog} onOpenChange={setShowResetPinDialog}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Reset Student PIN</DialogTitle>\r\n                        <DialogDescription>\r\n                            Set a new 4-digit PIN for {selectedStudent?.name || \"this student\"}. They will need to use this PIN to log in.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>New PIN (4 digits)</Label>\r\n                            <Input\r\n                                type=\"text\"\r\n                                inputMode=\"numeric\"\r\n                                pattern=\"[0-9]*\"\r\n                                maxLength={4}\r\n                                placeholder=\"0000\"\r\n                                value={newPin}\r\n                                onChange={(e) => setNewPin(e.target.value.replace(/\\D/g, '').slice(0, 4))}\r\n                                className=\"text-center text-2xl tracking-widest font-mono\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => {\r\n                            setShowResetPinDialog(false);\r\n                            setNewPin(\"\");\r\n                        }}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleResetPin}\r\n                            disabled={actionLoading || newPin.length !== 4}\r\n                        >\r\n                            {actionLoading ? <Loader2 className=\"w-4 h-4 animate-spin mr-2\" /> : null}\r\n                            Reset PIN\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Students;\r\n"],"names":[],"mappings":"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"}