(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let a=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},10204,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(48425),s=r.forwardRef((e,r)=>(0,a.jsx)(t.Primitive.label,{...e,ref:r,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));s.displayName="Label";var i=e.i(25913),l=e.i(75157);let d=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef(({className:e,...r},t)=>(0,a.jsx)(s,{ref:t,className:(0,l.cn)(d(),e),...r}));n.displayName=s.displayName,e.s(["Label",()=>n],10204)},24687,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));s.displayName="Textarea",e.s(["Textarea",()=>s])},84774,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,t.cn)("w-full caption-bottom text-sm",e),...r})}));s.displayName="Table";let i=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("thead",{ref:s,className:(0,t.cn)("[&_tr]:border-b",e),...r}));i.displayName="TableHeader";let l=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("tbody",{ref:s,className:(0,t.cn)("[&_tr:last-child]:border-0",e),...r}));l.displayName="TableBody",r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("tfoot",{ref:s,className:(0,t.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let d=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("tr",{ref:s,className:(0,t.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...r}));d.displayName="TableRow";let n=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("th",{ref:s,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));n.displayName="TableHead";let c=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("td",{ref:s,className:(0,t.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));c.displayName="TableCell",r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("caption",{ref:s,className:(0,t.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>c,"TableHead",()=>n,"TableHeader",()=>i,"TableRow",()=>d])},64659,e=>{"use strict";let a=(0,e.i(75254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>a],64659)},87486,e=>{"use strict";var a=e.i(43476),r=e.i(25913),t=e.i(75157);let s=(0,r.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:r,...i}){return(0,a.jsx)("div",{className:(0,t.cn)(s({variant:r}),e),...i})}e.s(["Badge",()=>i])},15288,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));s.displayName="Card";let i=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let l=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("h3",{ref:s,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let d=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("p",{ref:s,className:(0,t.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let n=r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,t.cn)("p-6 pt-0",e),...r}));n.displayName="CardContent",r.forwardRef(({className:e,...r},s)=>(0,a.jsx)("div",{ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>i,"CardTitle",()=>l])},7233,e=>{"use strict";let a=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},88511,e=>{"use strict";let a=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],88511)},30699,e=>{"use strict";let a=(0,e.i(75254).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>a],30699)},16715,e=>{"use strict";let a=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},77705,e=>{"use strict";let a=(0,e.i(75254).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>a],77705)},45831,e=>{"use strict";var a=e.i(43476),r=e.i(71645),t=e.i(8402),s=e.i(7233),i=e.i(88511),l=e.i(55436),d=e.i(16715),n=e.i(31278),c=e.i(86536),o=e.i(77705),u=e.i(30699),m=e.i(19455),x=e.i(93479),h=e.i(10204),p=e.i(24687),f=e.i(87486),v=e.i(84774),g=e.i(55146),j=e.i(67489),b=e.i(15288),y=e.i(76639),C=e.i(74911),w=e.i(1132);e.s(["default",0,()=>{let[e,N]=(0,r.useState)(!0),[T,k]=(0,r.useState)([]),[R,L]=(0,r.useState)([]),[I,D]=(0,r.useState)(""),[S,M]=(0,r.useState)(!1),[q,A]=(0,r.useState)(!1),[H,P]=(0,r.useState)(null),[B,E]=(0,r.useState)({partnerId:"",title:"",description:"",xpCost:0,couponCode:"",discountValue:"",stockLimit:0,requiredBadgeId:"",requiredLevel:0,eligibilityCriteria:"",isActive:!0}),{toast:F}=(0,C.useToast)(),V=async()=>{N(!0);try{let[e,a]=await Promise.all([w.rewardsService.getAll(),w.rewardsService.getPartners()]);k(e),L(a)}catch(e){console.error("Error fetching data:",e)}finally{N(!1)}};(0,r.useEffect)(()=>{V()},[]);let O=T.filter(e=>e.title.toLowerCase().includes(I.toLowerCase())||e.description.toLowerCase().includes(I.toLowerCase())),U=async()=>{try{F({title:H?"Reward updated":"Reward created",description:`Reward has been ${H?"updated":"created"} successfully.`}),M(!1),A(!1),V()}catch(e){console.error("Error saving reward:",e),F({title:"Error",description:"Failed to save reward. Please try again.",variant:"destructive"})}},X=async e=>{try{F({title:e.isActive?"Reward deactivated":"Reward activated",description:`Reward has been ${e.isActive?"deactivated":"activated"}.`}),V()}catch(e){console.error("Error toggling reward:",e)}};return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Redemption Rewards"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage XP redemption rewards and partner offers"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m.Button,{onClick:V,disabled:e,children:[(0,a.jsx)(d.RefreshCw,{className:`w-4 h-4 mr-2 ${e?"animate-spin":""}`}),"Refresh"]}),(0,a.jsxs)(m.Button,{onClick:()=>{E({partnerId:"",title:"",description:"",xpCost:0,couponCode:"",discountValue:"",stockLimit:0,requiredBadgeId:"",requiredLevel:0,eligibilityCriteria:"",isActive:!0}),M(!0)},children:[(0,a.jsx)(s.Plus,{className:"w-4 h-4 mr-2"}),"Add Reward"]})]})]}),(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,a.jsx)(x.Input,{placeholder:"Search rewards...",value:I,onChange:e=>D(e.target.value),className:"pl-10"})]})})}),(0,a.jsx)(b.Card,{children:(0,a.jsx)(b.CardContent,{className:"p-0",children:e?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(n.Loader2,{className:"w-8 h-8 animate-spin"})}):(0,a.jsxs)(v.Table,{children:[(0,a.jsx)(v.TableHeader,{children:(0,a.jsxs)(v.TableRow,{children:[(0,a.jsx)(v.TableHead,{children:"Reward"}),(0,a.jsx)(v.TableHead,{children:"Partner"}),(0,a.jsx)(v.TableHead,{children:"XP Cost"}),(0,a.jsx)(v.TableHead,{children:"Stock"}),(0,a.jsx)(v.TableHead,{children:"Status"}),(0,a.jsx)(v.TableHead,{children:"Created"}),(0,a.jsx)(v.TableHead,{className:"w-12"})]})}),(0,a.jsx)(v.TableBody,{children:O.map(e=>{var r;let s;return(0,a.jsxs)(v.TableRow,{children:[(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground line-clamp-1",children:e.description})]})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Gift,{className:"w-4 h-4 text-muted-foreground"}),(r=e.partnerId,s=R.find(e=>e.id===r),s?.name||"Unknown Partner")]})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)(f.Badge,{variant:"secondary",children:[e.xpCost," XP"]})}),(0,a.jsx)(v.TableCell,{children:e.stockLimit?(0,a.jsxs)("span",{className:"text-sm",children:[e.claimCount,"/",e.stockLimit]}):(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unlimited"})}),(0,a.jsx)(v.TableCell,{children:(0,a.jsx)(f.Badge,{className:e.isActive?"bg-success/20 text-success":"bg-muted text-muted-foreground",children:e.isActive?"Active":"Inactive"})}),(0,a.jsx)(v.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)(v.TableCell,{children:(0,a.jsxs)(g.DropdownMenu,{children:[(0,a.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(m.Button,{variant:"ghost",size:"sm",children:(0,a.jsx)(t.Ticket,{className:"w-4 h-4"})})}),(0,a.jsxs)(g.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(g.DropdownMenuItem,{onClick:()=>{P(e),E({partnerId:e.partnerId,title:e.title,description:e.description,xpCost:e.xpCost,couponCode:e.couponCode||"",discountValue:e.discountValue||"",stockLimit:e.stockLimit||0,requiredBadgeId:e.requiredBadgeId||"",requiredLevel:e.requiredLevel||0,eligibilityCriteria:e.eligibilityCriteria||"",isActive:e.isActive}),A(!0)},children:[(0,a.jsx)(i.Edit,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,a.jsx)(g.DropdownMenuItem,{onClick:()=>X(e),children:e.isActive?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.EyeOff,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Eye,{className:"w-4 h-4 mr-2"}),"Activate"]})})]})]})})]},e.id)})})]})})}),(0,a.jsx)(y.Dialog,{open:S||q,onOpenChange:e=>{e||(M(!1),A(!1))},children:(0,a.jsxs)(y.DialogContent,{className:"max-w-2xl",children:[(0,a.jsxs)(y.DialogHeader,{children:[(0,a.jsx)(y.DialogTitle,{children:S?"Create New Reward":"Edit Reward"}),(0,a.jsx)(y.DialogDescription,{children:"Configure the reward details and redemption requirements."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"partnerId",children:"Partner *"}),(0,a.jsxs)(j.Select,{value:B.partnerId,onValueChange:e=>E(a=>({...a,partnerId:e})),children:[(0,a.jsx)(j.SelectTrigger,{children:(0,a.jsx)(j.SelectValue,{placeholder:"Select partner"})}),(0,a.jsx)(j.SelectContent,{children:R.map(e=>(0,a.jsx)(j.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"xpCost",children:"XP Cost *"}),(0,a.jsx)(x.Input,{id:"xpCost",type:"number",value:B.xpCost,onChange:e=>E(a=>({...a,xpCost:parseInt(e.target.value)||0})),min:"0"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"title",children:"Title *"}),(0,a.jsx)(x.Input,{id:"title",value:B.title,onChange:e=>E(a=>({...a,title:e.target.value})),placeholder:"Reward title"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"description",children:"Description *"}),(0,a.jsx)(p.Textarea,{id:"description",value:B.description,onChange:e=>E(a=>({...a,description:e.target.value})),placeholder:"Reward description",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"couponCode",children:"Coupon Code"}),(0,a.jsx)(x.Input,{id:"couponCode",value:B.couponCode,onChange:e=>E(a=>({...a,couponCode:e.target.value})),placeholder:"Optional coupon code"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"discountValue",children:"Discount Value"}),(0,a.jsx)(x.Input,{id:"discountValue",value:B.discountValue,onChange:e=>E(a=>({...a,discountValue:e.target.value})),placeholder:"e.g., 20% off, â‚¹500"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"stockLimit",children:"Stock Limit"}),(0,a.jsx)(x.Input,{id:"stockLimit",type:"number",value:B.stockLimit,onChange:e=>E(a=>({...a,stockLimit:parseInt(e.target.value)||0})),placeholder:"0 for unlimited",min:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"requiredLevel",children:"Required Level"}),(0,a.jsx)(x.Input,{id:"requiredLevel",type:"number",value:B.requiredLevel,onChange:e=>E(a=>({...a,requiredLevel:parseInt(e.target.value)||0})),placeholder:"0 for no requirement",min:"0"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.Label,{htmlFor:"eligibilityCriteria",children:"Eligibility Criteria"}),(0,a.jsx)(p.Textarea,{id:"eligibilityCriteria",value:B.eligibilityCriteria,onChange:e=>E(a=>({...a,eligibilityCriteria:e.target.value})),placeholder:"Additional eligibility requirements",rows:2})]})]}),(0,a.jsxs)(y.DialogFooter,{children:[(0,a.jsx)(m.Button,{variant:"outline",onClick:()=>{M(!1),A(!1)},children:"Cancel"}),(0,a.jsx)(m.Button,{onClick:U,children:H?"Update Reward":"Create Reward"})]})]})})]})}])}]);