(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(48425),r=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var i=e.i(25913),l=e.i(75157);let n=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(r,{ref:s,className:(0,l.cn)(n(),e),...a}));d.displayName=r.displayName,e.s(["Label",()=>d],10204)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},87486,e=>{"use strict";var t=e.i(43476),a=e.i(25913),s=e.i(75157);let r=(0,a.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:a,...i}){return(0,t.jsx)("div",{className:(0,s.cn)(r({variant:a}),e),...i})}e.s(["Badge",()=>i])},15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));n.displayName="CardDescription";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},64659,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],64659)},84774,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})}));r.displayName="Table";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",e),...a}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a}));l.displayName="TableBody",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...a}));n.displayName="TableRow";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));d.displayName="TableHead";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableCell",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>o,"TableHead",()=>d,"TableHeader",()=>i,"TableRow",()=>n])},77572,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81140),r=e.i(30030),i=e.i(42727),l=e.i(96626),n=e.i(48425),d=e.i(86318),o=e.i(69340),c=e.i(10772),m="Tabs",[u,x]=(0,r.createContextScope)(m,[i.createRovingFocusGroupScope]),f=(0,i.createRovingFocusGroupScope)(),[p,g]=u(m),h=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,onValueChange:i,defaultValue:l,orientation:u="horizontal",dir:x,activationMode:f="automatic",...g}=e,h=(0,d.useDirection)(x),[b,y]=(0,o.useControllableState)({prop:r,onChange:i,defaultProp:l??"",caller:m});return(0,t.jsx)(p,{scope:s,baseId:(0,c.useId)(),value:b,onValueChange:y,orientation:u,dir:h,activationMode:f,children:(0,t.jsx)(n.Primitive.div,{dir:h,"data-orientation":u,...g,ref:a})})});h.displayName=m;var b="TabsList",y=a.forwardRef((e,a)=>{let{__scopeTabs:s,loop:r=!0,...l}=e,d=g(b,s),o=f(s);return(0,t.jsx)(i.Root,{asChild:!0,...o,orientation:d.orientation,dir:d.dir,loop:r,children:(0,t.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":d.orientation,...l,ref:a})})});y.displayName=b;var j="TabsTrigger",v=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:l,disabled:d=!1,...o}=e,c=g(j,r),m=f(r),u=w(c.baseId,l),x=T(c.baseId,l),p=l===c.value;return(0,t.jsx)(i.Item,{asChild:!0,...m,focusable:!d,active:p,children:(0,t.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":x,"data-state":p?"active":"inactive","data-disabled":d?"":void 0,disabled:d,id:u,...o,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{d||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(l)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(l)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;p||d||!e||c.onValueChange(l)})})})});v.displayName=j;var N="TabsContent",C=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:i,forceMount:d,children:o,...c}=e,m=g(N,r),u=w(m.baseId,i),x=T(m.baseId,i),f=i===m.value,p=a.useRef(f);return a.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(l.Presence,{present:d||f,children:({present:a})=>(0,t.jsx)(n.Primitive.div,{"data-state":f?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:x,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:a&&o})})});function w(e,t){return`${e}-trigger-${t}`}function T(e,t){return`${e}-content-${t}`}C.displayName=N;var S=e.i(75157);let R=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(y,{ref:s,className:(0,S.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));R.displayName=y.displayName;let k=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(v,{ref:s,className:(0,S.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...a}));k.displayName=v.displayName;let H=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(C,{ref:s,className:(0,S.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));H.displayName=C.displayName,e.s(["Tabs",()=>h,"TabsContent",()=>H,"TabsList",()=>R,"TabsTrigger",()=>k],77572)},46615,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(46932);let r=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var i=e.i(45423),l=e.i(61911),n=e.i(3116),d=e.i(86536),o=e.i(31278),c=e.i(19455),m=e.i(93479),u=e.i(24687),x=e.i(10204),f=e.i(87486),p=e.i(15288),g=e.i(67489),h=e.i(84774),b=e.i(77572),y=e.i(74911),j=e.i(1132);e.i(36180);var v=e.i(98925),N=e.i(59141);e.s(["default",0,()=>{let{toast:e}=(0,y.useToast)(),[C,w]=(0,a.useState)(!0),[T,S]=(0,a.useState)(!1),[R,k]=(0,a.useState)([]),[H,D]=(0,a.useState)(""),[L,A]=(0,a.useState)(""),[I,M]=(0,a.useState)("all"),[B,E]=(0,a.useState)([]),[F,P]=(0,a.useState)([]),[$,V]=(0,a.useState)([6,7,8,9,10,11,12]),[K,z]=(0,a.useState)(["Science","Math","Coding","Arts","Sports"]),[G,O]=(0,a.useState)({total:0});(0,a.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([j.notificationsService.getAll(),j.studentsService.getStats()]);k(e),O({total:t.total});let[a,s]=await Promise.all([(0,v.getDoc)((0,v.doc)(N.db,"settings","grades")),(0,v.getDoc)((0,v.doc)(N.db,"settings","tags"))]);a.exists()&&a.data().grades&&V(a.data().grades),s.exists()&&s.data().tags&&z(s.data().tags)}catch(e){console.error("Error fetching data:",e)}finally{w(!1)}})()},[]);let U=()=>"all"===I?`~${G.total.toLocaleString()} students`:"by-grade"===I&&B.length>0?`~${(B.length*Math.round(G.total/$.length)).toLocaleString()} students`:"by-interest"===I&&F.length>0?`~${(F.length*Math.round(G.total/K.length/2)).toLocaleString()} students`:"Select audience",q=async()=>{if(H.trim()&&L.trim()){S(!0);try{await j.notificationsService.send({title:H,message:L,target:I,targetCriteria:{grades:"by-grade"===I?B:void 0,interests:"by-interest"===I?F:void 0},sentCount:parseInt(U().replace(/[^0-9]/g,""))||0,openedCount:0}),e({title:"Notification sent!",description:`Sent to ${U()}`}),D(""),A(""),M("all"),E([]),P([]);let t=await j.notificationsService.getAll();k(t)}catch(t){console.error("Error sending notification:",t),e({title:"Error",description:"Failed to send notification",variant:"destructive"})}finally{S(!1)}}};return C?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold font-display",children:"Notifications"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Send push notifications to students"})]}),(0,t.jsxs)(b.Tabs,{defaultValue:"compose",className:"space-y-6",children:[(0,t.jsxs)(b.TabsList,{children:[(0,t.jsxs)(b.TabsTrigger,{value:"compose",className:"gap-2",children:[(0,t.jsx)(r,{className:"w-4 h-4"}),"Compose"]}),(0,t.jsxs)(b.TabsTrigger,{value:"history",className:"gap-2",children:[(0,t.jsx)(n.Clock,{className:"w-4 h-4"}),"History (",R.length,")"]})]}),(0,t.jsx)(b.TabsContent,{value:"compose",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Bell,{className:"w-5 h-5"}),"Compose Notification"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.Label,{htmlFor:"title",children:"Title *"}),(0,t.jsx)(m.Input,{id:"title",placeholder:"e.g., New Scholarship Alert! ï¿½x}\x1c",value:H,onChange:e=>D(e.target.value),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.Label,{htmlFor:"message",children:"Message *"}),(0,t.jsx)(u.Textarea,{id:"message",placeholder:"Write your notification message...",value:L,onChange:e=>A(e.target.value),className:"mt-1 min-h-[120px]"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[L.length,"/500 characters"]})]})]})]})}),(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Users,{className:"w-5 h-5"}),"Target Audience"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,t.jsxs)(g.Select,{value:I,onValueChange:M,children:[(0,t.jsx)(g.SelectTrigger,{children:(0,t.jsx)(g.SelectValue,{placeholder:"Select audience"})}),(0,t.jsxs)(g.SelectContent,{children:[(0,t.jsx)(g.SelectItem,{value:"all",children:"All Students"}),(0,t.jsx)(g.SelectItem,{value:"by-grade",children:"By Grade"}),(0,t.jsx)(g.SelectItem,{value:"by-interest",children:"By Interest"})]})]}),"by-grade"===I&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{children:"Select Grades"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:$.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>{E(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-4 py-2 rounded-lg border transition-all ${B.includes(e)?"bg-primary text-primary-foreground border-primary":"bg-muted/50 border-border hover:border-primary/50"}`,children:["Class ",e]},e))})]}),"by-interest"===I&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{children:"Select Interests"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:K.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-4 py-2 rounded-lg border transition-all ${F.includes(e)?"bg-primary text-primary-foreground border-primary":"bg-muted/50 border-border hover:border-primary/50"}`,children:e},e))})]})]})]})})]}),(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(p.Card,{className:"sticky top-24",children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Eye,{className:"w-5 h-5"}),"Preview"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-xl space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-primary-foreground font-bold text-xs",children:"M"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:"MyArk"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"now"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:H||"Notification Title"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:L||"Your notification message will appear here..."})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-primary/5 rounded-xl border border-primary/20",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Reach"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-primary",children:U()})]}),(0,t.jsx)(c.Button,{className:"w-full gap-2",size:"lg",disabled:!H||!L||T,onClick:q,children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{className:"w-4 h-4"}),"Send Notification"]})})]})]})})]})}),(0,t.jsx)(b.TabsContent,{value:"history",children:(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,t.jsx)(p.Card,{children:(0,t.jsx)(p.CardContent,{className:"p-0",children:0===R.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,t.jsx)(i.Bell,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No notifications sent yet"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Your sent notifications will appear here"})]}):(0,t.jsxs)(h.Table,{children:[(0,t.jsx)(h.TableHeader,{children:(0,t.jsxs)(h.TableRow,{children:[(0,t.jsx)(h.TableHead,{children:"Notification"}),(0,t.jsx)(h.TableHead,{children:"Target"}),(0,t.jsx)(h.TableHead,{className:"text-right",children:"Sent"}),(0,t.jsx)(h.TableHead,{className:"text-right",children:"Opened"}),(0,t.jsx)(h.TableHead,{className:"text-right",children:"Open Rate"}),(0,t.jsx)(h.TableHead,{children:"Sent At"})]})}),(0,t.jsx)(h.TableBody,{children:R.map(e=>{let a=e.sentCount?Math.round((e.openedCount||0)/e.sentCount*100):0;return(0,t.jsxs)(h.TableRow,{className:"cursor-pointer hover:bg-muted/50",children:[(0,t.jsx)(h.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate max-w-[300px]",children:e.message})]})}),(0,t.jsx)(h.TableCell,{children:(0,t.jsx)(f.Badge,{variant:"outline",children:"all"===e.target?"All Students":"by-grade"===e.target?`Class ${e.targetCriteria?.grades?.join(", ")}`:e.targetCriteria?.interests?.join(", ")||e.target})}),(0,t.jsx)(h.TableCell,{className:"text-right",children:(e.sentCount||0).toLocaleString()}),(0,t.jsx)(h.TableCell,{className:"text-right",children:(e.openedCount||0).toLocaleString()}),(0,t.jsx)(h.TableCell,{className:"text-right",children:(0,t.jsxs)(f.Badge,{className:a>50?"bg-success/20 text-success":"bg-yellow-500/20 text-yellow-500",children:[a,"%"]})}),(0,t.jsx)(h.TableCell,{className:"text-muted-foreground",children:e.sentAt?new Date(e.sentAt).toLocaleString():"-"})]},e.id)})})]})})})})})]})]})}],46615)}]);