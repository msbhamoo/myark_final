(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74911,e=>{"use strict";var t=e.i(71645);let a=0,s=new Map,r=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),n({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=[],o={toasts:[]};function n(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),i.forEach(e=>{e(o)})}function d({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>n({type:"DISMISS_TOAST",toastId:t});return n({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>n({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,a]=t.useState(o);return t.useEffect(()=>(i.push(a),()=>{let e=i.indexOf(a);e>-1&&i.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>n({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>c])},37727,e=>{"use strict";let t=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},1132,e=>{"use strict";e.i(36180);var t=e.i(98925),a=e.i(59141);let s={opportunities:"opportunities",blogs:"blogs",careers:"careers",students:"studentUsers",schoolDemos:"schoolDemos",notifications:"notifications",badges:"badges",settings:"settings",organizers:"organizers",leads:"studentLeads"},r=e=>{if(e)return e instanceof t.Timestamp?e.toDate():e},i=e=>{if(!e)return null;if(e instanceof t.Timestamp)return e;try{let a=new Date(e);return isNaN(a.getTime())?null:t.Timestamp.fromDate(a)}catch(e){return null}},o=e=>{let t={};return Object.keys(e).forEach(a=>{void 0!==e[a]&&(t[a]=e[a])}),t},n={async getAll(e){let i=[(0,t.orderBy)("createdAt","desc")];e?.grade&&i.push((0,t.where)("grade","==",e.grade)),e?.limit&&i.push((0,t.limit)(e.limit));let o=(0,t.query)((0,t.collection)(a.db,s.students),...i);return(await (0,t.getDocs)(o)).docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:r(t.createdAt),lastActiveAt:r(t.lastActiveAt||t.lastLoginAt)}})},async getById(e){let i=(0,t.doc)(a.db,s.students,e),o=await (0,t.getDoc)(i);return o.exists()?{id:o.id,...o.data(),createdAt:r(o.data().createdAt),lastActiveAt:r(o.data().lastActiveAt)}:null},async getStats(){let e=(await (0,t.getDocs)((0,t.collection)(a.db,s.students))).docs.map(e=>e.data()),i=new Date(new Date().getTime()-6048e5);return{total:e.length,activeThisWeek:e.filter(e=>{let t=r(e.lastActiveAt);return t&&t>=i}).length,avgStreak:e.length>0?Math.round(e.reduce((e,t)=>e+(t.streakDays||0),0)/e.length):0}},async assignBadge(e,r){let i=(0,t.doc)(a.db,s.students,e);await (0,t.updateDoc)(i,{badges:(0,t.arrayUnion)(r),updatedAt:t.Timestamp.now()})},async removeBadge(e,r){let i=(0,t.doc)(a.db,s.students,e);await (0,t.updateDoc)(i,{badges:(0,t.arrayRemove)(r),updatedAt:t.Timestamp.now()})}},d={async getAll(e){let i=[(0,t.orderBy)("createdAt","desc")];e?.status&&"all"!==e.status&&i.push((0,t.where)("status","==",e.status));let o=(0,t.query)((0,t.collection)(a.db,s.schoolDemos),...i);return(await (0,t.getDocs)(o)).docs.map(e=>({id:e.id,...e.data(),scheduledDate:r(e.data().scheduledDate),createdAt:r(e.data().createdAt),updatedAt:r(e.data().updatedAt)}))},create:async e=>(await (0,t.addDoc)((0,t.collection)(a.db,s.schoolDemos),{...e,status:e.status||"pending",createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()})).id,async updateStatus(e,r,i){let o=(0,t.doc)(a.db,s.schoolDemos,e);await (0,t.updateDoc)(o,{status:r,notes:i||null,updatedAt:t.Timestamp.now()})},async getCountByStatus(){let e=await (0,t.getDocs)((0,t.collection)(a.db,s.schoolDemos)),r={pending:0,contacted:0,scheduled:0,completed:0,rejected:0};return e.docs.forEach(e=>{let t=e.data().status;void 0!==r[t]&&r[t]++}),r}};e.s(["COLLECTIONS",0,s,"badgesService",0,{async getAll(){let e=(0,t.query)((0,t.collection)(a.db,s.badges),(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data(),createdAt:r(e.data().createdAt),updatedAt:r(e.data().updatedAt)}))},async getById(e){let i=(0,t.doc)(a.db,s.badges,e),o=await (0,t.getDoc)(i);return o.exists()?{id:o.id,...o.data(),createdAt:r(o.data().createdAt),updatedAt:r(o.data().updatedAt)}:null},async create(e){let r=o(e);return(await (0,t.addDoc)((0,t.collection)(a.db,s.badges),{...r,createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()})).id},async update(e,r){let i=(0,t.doc)(a.db,s.badges,e);await (0,t.updateDoc)(i,{...o(r),updatedAt:t.Timestamp.now()})},async delete(e){await (0,t.deleteDoc)((0,t.doc)(a.db,s.badges,e))}},"blogsService",0,{async getAll(e){let i=[];e?.status&&"all"!==e.status&&i.push((0,t.where)("status","==",e.status)),e?.limit&&i.push((0,t.limit)(e.limit));let o=(0,t.query)((0,t.collection)(a.db,s.blogs),...i);return(await (0,t.getDocs)(o)).docs.map(e=>({id:e.id,...e.data(),publishedAt:r(e.data().publishedAt),createdAt:r(e.data().createdAt),updatedAt:r(e.data().updatedAt)}))},async getById(e){let i=(0,t.doc)(a.db,s.blogs,e),o=await (0,t.getDoc)(i);return o.exists()?{id:o.id,...o.data(),publishedAt:r(o.data().publishedAt),createdAt:r(o.data().createdAt),updatedAt:r(o.data().updatedAt)}:null},async getBySlug(e){let i=(0,t.query)((0,t.collection)(a.db,s.blogs),(0,t.where)("slug","==",e),(0,t.limit)(1)),o=await (0,t.getDocs)(i);if(o.empty)return null;let n=o.docs[0];return{id:n.id,...n.data(),publishedAt:r(n.data().publishedAt),createdAt:r(n.data().createdAt),updatedAt:r(n.data().updatedAt)}},create:async e=>(await (0,t.addDoc)((0,t.collection)(a.db,s.blogs),{...e,viewCount:0,publishedAt:"published"===e.status?t.Timestamp.now():null,createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()})).id,async update(e,r){let i=(0,t.doc)(a.db,s.blogs,e);await (0,t.updateDoc)(i,o({...r,updatedAt:t.Timestamp.now()}))},async delete(e){await (0,t.deleteDoc)((0,t.doc)(a.db,s.blogs,e))}},"careersService",0,{async getAll(e){let i=[(0,t.orderBy)("createdAt","desc")];e?.status&&"all"!==e.status&&i.push((0,t.where)("status","==",e.status)),e?.limit&&i.push((0,t.limit)(e.limit));let o=(0,t.query)((0,t.collection)(a.db,s.careers),...i);return(await (0,t.getDocs)(o)).docs.map(e=>({id:e.id,...e.data(),postedAt:r(e.data().postedAt),expiresAt:r(e.data().expiresAt),createdAt:r(e.data().createdAt),updatedAt:r(e.data().updatedAt)}))},async getById(e){let i=(0,t.doc)(a.db,s.careers,e),o=await (0,t.getDoc)(i);return o.exists()?{id:o.id,...o.data(),postedAt:r(o.data().postedAt),expiresAt:r(o.data().expiresAt),createdAt:r(o.data().createdAt),updatedAt:r(o.data().updatedAt)}:null},async getBySlug(e){let i=(0,t.query)((0,t.collection)(a.db,s.careers),(0,t.where)("slug","==",e),(0,t.limit)(1)),o=await (0,t.getDocs)(i);if(o.empty)return null;let n=o.docs[0];return{id:n.id,...n.data(),postedAt:r(n.data().postedAt),expiresAt:r(n.data().expiresAt),createdAt:r(n.data().createdAt),updatedAt:r(n.data().updatedAt)}},create:async e=>(await (0,t.addDoc)((0,t.collection)(a.db,s.careers),{...e,applicationCount:0,postedAt:t.Timestamp.now(),createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()})).id,async update(e,r){let i=(0,t.doc)(a.db,s.careers,e);await (0,t.updateDoc)(i,o({...r,updatedAt:t.Timestamp.now()}))},async delete(e){await (0,t.deleteDoc)((0,t.doc)(a.db,s.careers,e))}},"dashboardService",0,{async getStats(){let[e,r,i]=await Promise.all([(0,t.getDocs)((0,t.collection)(a.db,s.opportunities)),n.getStats(),d.getCountByStatus()]),o=e.docs.filter(e=>"published"===e.data().status).length;return{totalOpportunities:e.size,publishedOpportunities:o,totalStudents:r.total,activeStudents:r.activeThisWeek,pendingDemos:i.pending}}},"leadsService",0,{async getAll(e){try{let i=[];e?.converted!==void 0&&i.push((0,t.where)("converted","==",e.converted)),e?.limit&&i.push((0,t.limit)(e.limit));try{let e=(0,t.query)((0,t.collection)(a.db,s.leads),...i,(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(e)).docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:r(t.createdAt),convertedAt:r(t.convertedAt)}})}catch(o){console.warn("Leads fetch with orderBy failed (likely missing index), falling back to unsorted:",o);let e=(0,t.query)((0,t.collection)(a.db,s.leads),...i);return(await (0,t.getDocs)(e)).docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:r(t.createdAt),convertedAt:r(t.convertedAt)}}).sort((e,t)=>(t.createdAt?.getTime()||0)-(e.createdAt?.getTime()||0))}}catch(e){return console.error("Error in leadsService.getAll:",e),[]}},async getStats(){try{let e=(await (0,t.getDocs)((0,t.collection)(a.db,s.leads))).docs.map(e=>e.data());return{total:e.length,converted:e.filter(e=>e.converted).length,abandoned:e.filter(e=>!e.converted).length}}catch(e){return console.error("Error in leadsService.getStats:",e),{total:0,converted:0,abandoned:0}}},async delete(e){await (0,t.deleteDoc)((0,t.doc)(a.db,s.leads,e))}},"notificationsService",0,{async getAll(){let e=(0,t.query)((0,t.collection)(a.db,s.notifications),(0,t.orderBy)("createdAt","desc"));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data(),scheduledFor:r(e.data().scheduledFor),sentAt:r(e.data().sentAt),createdAt:r(e.data().createdAt)}))},send:async e=>(await (0,t.addDoc)((0,t.collection)(a.db,s.notifications),o({...e,sentAt:t.Timestamp.now(),createdAt:t.Timestamp.now()}))).id},"opportunitiesService",0,{async getAll(e){let i=[];e?.type&&"all"!==e.type&&i.push((0,t.where)("type","==",e.type)),e?.status&&"all"!==e.status&&i.push((0,t.where)("status","==",e.status)),e?.limit&&i.push((0,t.limit)(e.limit));let o=(0,t.query)((0,t.collection)(a.db,s.opportunities),...i);return(await (0,t.getDocs)(o)).docs.map(e=>({id:e.id,...e.data(),dates:{registrationStart:r(e.data().dates?.registrationStart),registrationEnd:r(e.data().dates?.registrationEnd),eventDate:r(e.data().dates?.eventDate)},createdAt:r(e.data().createdAt),updatedAt:r(e.data().updatedAt)}))},async getById(e){let i=(0,t.doc)(a.db,s.opportunities,e),o=await (0,t.getDoc)(i);return o.exists()?{id:o.id,...o.data(),dates:{registrationStart:r(o.data().dates?.registrationStart),registrationEnd:r(o.data().dates?.registrationEnd),eventDate:r(o.data().dates?.eventDate)},createdAt:r(o.data().createdAt),updatedAt:r(o.data().updatedAt)}:null},async create(e){let r=o(e);return(await (0,t.addDoc)((0,t.collection)(a.db,s.opportunities),{...r,dates:{registrationStart:i(e.dates.registrationStart),registrationEnd:i(e.dates.registrationEnd),eventDate:i(e.dates.eventDate)},hypeCount:0,applicationCount:0,createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()})).id},async update(e,r){let n=(0,t.doc)(a.db,s.opportunities,e),d=o({...r,updatedAt:t.Timestamp.now()});r.dates&&(d.dates={registrationStart:i(r.dates.registrationStart),registrationEnd:i(r.dates.registrationEnd),eventDate:i(r.dates.eventDate)}),await (0,t.updateDoc)(n,d)},async hypeOpportunity(e){let r=(0,t.doc)(a.db,s.opportunities,e);await (0,t.updateDoc)(r,{hypeCount:(0,t.increment)(1)})},async shareOpportunity(e){let r=(0,t.doc)(a.db,s.opportunities,e);await (0,t.updateDoc)(r,{shareCount:(0,t.increment)(1)})},async incrementView(e){let r=(0,t.doc)(a.db,s.opportunities,e);await (0,t.updateDoc)(r,{viewCount:(0,t.increment)(1)})},async incrementApplication(e){let r=(0,t.doc)(a.db,s.opportunities,e);await (0,t.updateDoc)(r,{applicationCount:(0,t.increment)(1)})},async syncApplicationCount(e){let r=(0,t.query)((0,t.collection)(a.db,"studentUsers"),(0,t.where)("appliedOpportunities","array-contains",e)),i=(await (0,t.getDocs)(r)).size,o=(0,t.doc)(a.db,s.opportunities,e);return await (0,t.updateDoc)(o,{applicationCount:i}),i},async delete(e){await (0,t.deleteDoc)((0,t.doc)(a.db,s.opportunities,e))},subscribe(e){let i=(0,t.query)((0,t.collection)(a.db,s.opportunities),(0,t.where)("status","==","published"),(0,t.orderBy)("createdAt","desc"));return(0,t.onSnapshot)(i,t=>{e(t.docs.map(e=>({id:e.id,...e.data(),dates:{registrationStart:r(e.data().dates?.registrationStart),registrationEnd:r(e.data().dates?.registrationEnd),eventDate:r(e.data().dates?.eventDate)},createdAt:r(e.data().createdAt),updatedAt:r(e.data().updatedAt)})))})}},"rewardsService",0,{async getAll(){let e=(0,t.query)((0,t.collection)(a.db,"rewards"),(0,t.where)("isActive","==",!0));return(await (0,t.getDocs)(e)).docs.map(e=>({id:e.id,...e.data(),expiresAt:r(e.data().expiresAt),createdAt:r(e.data().createdAt)})).sort((e,t)=>e.xpCost-t.xpCost)},getPartners:async()=>(await (0,t.getDocs)((0,t.collection)(a.db,"partners"))).docs.map(e=>({id:e.id,...e.data(),createdAt:r(e.data().createdAt)})),async redeem(e,s,r){let i=await (0,t.addDoc)((0,t.collection)(a.db,"claims"),{rewardId:e,studentId:s,xpCost:r,claimedAt:t.Timestamp.now(),status:"active"}),o=(0,t.doc)(a.db,"rewards",e);return await (0,t.updateDoc)(o,{claimCount:(0,t.increment)(1)}),i.id}},"schoolDemosService",0,d,"settingsService",0,{async getOpportunityTypes(){let e=(0,t.doc)(a.db,s.settings,"opportunityTypes"),r=await (0,t.getDoc)(e);return r.exists()&&r.data().types||[]},async saveOpportunityTypes(e){let r=(0,t.doc)(a.db,s.settings,"opportunityTypes");await (0,t.updateDoc)(r,{types:e})},async getGrades(){let e=(0,t.doc)(a.db,s.settings,"grades"),r=await (0,t.getDoc)(e);return r.exists()?r.data().grades||[]:[6,7,8,9,10,11,12]},async saveGrades(e){let r=(0,t.doc)(a.db,s.settings,"grades");await (0,t.updateDoc)(r,{grades:e})},async getTags(){let e=(0,t.doc)(a.db,s.settings,"tags"),r=await (0,t.getDoc)(e);return r.exists()&&r.data().tags||[]},async saveTags(e){let r=(0,t.doc)(a.db,s.settings,"tags");await (0,t.updateDoc)(r,{tags:e})},getOrganizers:async()=>(await (0,t.getDocs)((0,t.collection)(a.db,s.organizers))).docs.map(e=>({id:e.id,...e.data(),createdAt:r(e.data().createdAt),updatedAt:r(e.data().updatedAt)})),saveOrganizer:async e=>(await (0,t.addDoc)((0,t.collection)(a.db,s.organizers),o({...e,createdAt:t.Timestamp.now(),updatedAt:t.Timestamp.now()}))).id,async deleteOrganizer(e){await (0,t.deleteDoc)((0,t.doc)(a.db,s.organizers,e))}},"studentsService",0,n])},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),s=e.i(31178),r=e.i(47414),i=e.i(74008),o=e.i(21476),n=e.i(72846),d=a,c=e.i(37806);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends d.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,a=(0,n.isHTMLElement)(e)&&e.offsetWidth||0,s=(0,n.isHTMLElement)(e)&&e.offsetHeight||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=a-r.width-r.left,r.bottom=s-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:s,anchorX:r,anchorY:i,root:o}){let n=(0,d.useId)(),p=(0,d.useRef)(null),m=(0,d.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:g}=(0,d.useContext)(c.MotionConfigContext),A=function(...e){return a.useCallback(function(...e){return t=>{let a=!1,s=e.map(e=>{let s=l(e,t);return a||"function"!=typeof s||(a=!0),s});if(a)return()=>{for(let t=0;t<s.length;t++){let a=s[t];"function"==typeof a?a():l(e[t],null)}}}}(...e),e)}(p,e.props?.ref??e?.ref);return(0,d.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:d,right:c,bottom:l}=m.current;if(s||!p.current||!e||!t)return;let u="left"===r?`left: ${d}`:`right: ${c}`,A="bottom"===i?`bottom: ${l}`:`top: ${a}`;p.current.dataset.motionPopId=n;let y=document.createElement("style");g&&(y.nonce=g);let h=o??document.head;return h.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${A}px !important;
          }
        `),()=>{h.contains(y)&&h.removeChild(y)}},[s]),(0,t.jsx)(u,{isPresent:s,childRef:p,sizeRef:m,children:d.cloneElement(e,{ref:A})})}let m=({children:e,initial:s,isPresent:i,onExitComplete:n,custom:d,presenceAffectsLayout:c,mode:l,anchorX:u,anchorY:m,root:A})=>{let y=(0,r.useConstant)(g),h=(0,a.useId)(),f=!0,w=(0,a.useMemo)(()=>(f=!1,{id:h,initial:s,isPresent:i,custom:d,onExitComplete:e=>{for(let t of(y.set(e,!0),y.values()))if(!t)return;n&&n()},register:e=>(y.set(e,!1),()=>y.delete(e))}),[i,y,n]);return c&&f&&(w={...w}),(0,a.useMemo)(()=>{y.forEach((e,t)=>y.set(t,!1))},[i]),a.useEffect(()=>{i||y.size||!n||n()},[i]),"popLayout"===l&&(e=(0,t.jsx)(p,{isPresent:i,anchorX:u,anchorY:m,root:A,children:e})),(0,t.jsx)(o.PresenceContext.Provider,{value:w,children:e})};function g(){return new Map}var A=e.i(64978);let y=e=>e.key||"";function h(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}let f=({children:e,custom:o,initial:n=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:l="sync",propagate:u=!1,anchorX:p="left",anchorY:g="top",root:f})=>{let[w,b]=(0,A.usePresence)(u),D=(0,a.useMemo)(()=>h(e),[e]),v=u&&!w?[]:D.map(y),S=(0,a.useRef)(!0),T=(0,a.useRef)(D),k=(0,r.useConstant)(()=>new Map),O=(0,a.useRef)(new Set),[P,C]=(0,a.useState)(D),[x,E]=(0,a.useState)(D);(0,i.useIsomorphicLayoutEffect)(()=>{S.current=!1,T.current=D;for(let e=0;e<x.length;e++){let t=y(x[e]);v.includes(t)?(k.delete(t),O.current.delete(t)):!0!==k.get(t)&&k.set(t,!1)}},[x,v.length,v.join("-")]);let I=[];if(D!==P){let e=[...D];for(let t=0;t<x.length;t++){let a=x[t],s=y(a);v.includes(s)||(e.splice(t,0,a),I.push(a))}return"wait"===l&&I.length&&(e=I),E(h(e)),C(D),null}let{forceRender:L}=(0,a.useContext)(s.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:x.map(e=>{let a=y(e),s=(!u||!!w)&&(D===x||v.includes(a));return(0,t.jsx)(m,{isPresent:s,initial:(!S.current||!!n)&&void 0,custom:o,presenceAffectsLayout:c,mode:l,root:f,onExitComplete:s?void 0:()=>{if(O.current.has(a)||(O.current.add(a),!k.has(a)))return;k.set(a,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(L?.(),E(T.current),u&&b?.(),d&&d())},anchorX:p,anchorY:g,children:e},a)})})};e.s(["AnimatePresence",()=>f],88653)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},83086,e=>{"use strict";let t=(0,e.i(75254).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>t],83086)},90597,e=>{"use strict";let t=(0,e.i(75254).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);e.s(["Heart",()=>t],90597)},96626,e=>{"use strict";var t=e.i(71645),a=e.i(20783),s=e.i(34620),r=e=>{var r;let o,n,{present:d,children:c}=e,l=function(e){var a,r;let[o,n]=t.useState(),d=t.useRef(null),c=t.useRef(e),l=t.useRef("none"),[u,p]=(a=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>r[e][t]??e,a));return t.useEffect(()=>{let e=i(d.current);l.current="mounted"===u?e:"none"},[u]),(0,s.useLayoutEffect)(()=>{let t=d.current,a=c.current;if(a!==e){let s=l.current,r=i(t);e?p("MOUNT"):"none"===r||t?.display==="none"?p("UNMOUNT"):a&&s!==r?p("ANIMATION_OUT"):p("UNMOUNT"),c.current=e}},[e,p]),(0,s.useLayoutEffect)(()=>{if(o){let e,t=o.ownerDocument.defaultView??window,a=a=>{let s=i(d.current).includes(a.animationName);if(a.target===o&&s&&(p("ANIMATION_END"),!c.current)){let a=o.style.animationFillMode;o.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===o.style.animationFillMode&&(o.style.animationFillMode=a)})}},s=e=>{e.target===o&&(l.current=i(d.current))};return o.addEventListener("animationstart",s),o.addEventListener("animationcancel",a),o.addEventListener("animationend",a),()=>{t.clearTimeout(e),o.removeEventListener("animationstart",s),o.removeEventListener("animationcancel",a),o.removeEventListener("animationend",a)}}p("ANIMATION_END")},[o,p]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(e=>{d.current=e?getComputedStyle(e):null,n(e)},[])}}(d),u="function"==typeof c?c({present:l.isPresent}):t.Children.only(c),p=(0,a.useComposedRefs)(l.ref,(r=u,(n=(o=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in o&&o.isReactWarning)?r.ref:(n=(o=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in o&&o.isReactWarning)?r.props.ref:r.props.ref||r.ref));return"function"==typeof c||l.isPresent?t.cloneElement(u,{ref:p}):null};function i(e){return e?.animationName||"none"}r.displayName="Presence",e.s(["Presence",()=>r])},63059,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},39312,e=>{"use strict";let t=(0,e.i(75254).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},38047,e=>{"use strict";e.i(36180);var t=e.i(98925),a=e.i(59141);let s="studentUsers",r="studentSessions",i="studentLeads",o="userPhones";async function n(e){let t=new TextEncoder().encode(e+"myark_salt_2026");return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function d(e,t){return await n(e)===t}function c(){let e=navigator.userAgent,t="Unknown Device",a="Unknown Browser";return/iPhone/i.test(e)?t="iPhone":/iPad/i.test(e)?t="iPad":/Android/i.test(e)?t="Android":/Windows/i.test(e)?t="Windows":/Mac/i.test(e)?t="Mac":/Linux/i.test(e)&&(t="Linux"),/Chrome/i.test(e)&&!/Edg/i.test(e)?a="Chrome":/Safari/i.test(e)&&!/Chrome/i.test(e)?a="Safari":/Firefox/i.test(e)?a="Firefox":/Edg/i.test(e)&&(a="Edge"),{device:t,browser:a}}let l={async captureLead(e){try{let s=e.replace(/\D/g,"");if(10!==s.length)return;let r=`lead_${s}`,{device:o,browser:n}=c(),d=new Date;await (0,t.setDoc)((0,t.doc)(a.db,i,r),{id:r,phone:s,createdAt:t.Timestamp.fromDate(d),converted:!1,device:o,browser:n},{merge:!0})}catch(e){console.error("Lead capture error:",e)}},async convertLead(e){try{let s=e.replace(/\D/g,""),r=`lead_${s}`;await (0,t.updateDoc)((0,t.doc)(a.db,i,r),{converted:!0,convertedAt:t.Timestamp.now()})}catch(e){}},async register(e,r){try{let i=e.replace(/\D/g,"");if(10!==i.length)return{success:!1,error:"Please enter a valid 10-digit mobile number",errorCode:"INVALID_PHONE"};if(!/^\d{4}$/.test(r))return{success:!1,error:"PIN must be 4 digits",errorCode:"INVALID_PIN"};if((await (0,t.getDoc)((0,t.doc)(a.db,o,i))).exists())return{success:!1,error:"This number is already registered. Try logging in!",errorCode:"PHONE_EXISTS"};let d=await n(r),c=`user_${i}_${Date.now()}`,l=new Date,u={id:c,phone:i,xpPoints:50,level:1,streakDays:1,badges:["early_bird"],interests:[],appliedOpportunities:[],savedOpportunities:[],isVerified:!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:l,createdAt:l,createdVia:"web"};await (0,t.setDoc)((0,t.doc)(a.db,s,c),{...u,pinHash:d,createdAt:t.Timestamp.fromDate(l),lastLoginAt:t.Timestamp.fromDate(l)}),await (0,t.setDoc)((0,t.doc)(a.db,o,i),{phone:i,userId:c,createdAt:t.Timestamp.fromDate(l)}),await this.convertLead(i);let p=await this.createSession(c);return{success:!0,user:u,session:p}}catch(e){return console.error("Registration error:",e),{success:!1,error:"Something went wrong. Please try again!"}}},async login(e,r){try{let i=e.replace(/\D/g,"");if(10!==i.length)return{success:!1,error:"Please enter a valid 10-digit mobile number",errorCode:"INVALID_PHONE"};let n=await (0,t.getDoc)((0,t.doc)(a.db,o,i));if(!n.exists())return{success:!1,error:"No account found with this number. Want to register?",errorCode:"USER_NOT_FOUND"};let c=n.data().userId,l=await (0,t.getDoc)((0,t.doc)(a.db,s,c));if(!l.exists())return{success:!1,error:"No account found with this number. Want to register?",errorCode:"USER_NOT_FOUND"};let u=l.data();if(u.isBlocked)return{success:!1,error:"Your account has been blocked. Contact support for help.",errorCode:"BLOCKED"};let p=await this.checkRateLimit(u);if(!p.allowed){let e=Math.ceil((p.lockoutUntil.getTime()-Date.now())/6e4);return{success:!1,error:`Too many attempts! Take a break for ${e} min â˜•`,errorCode:"RATE_LIMITED"}}if(!await d(r,u.pinHash)){await this.incrementFailedAttempts(c);let e=5-(u.failedLoginAttempts+1);return{success:!1,error:e>0?`Wrong PIN! ${e} attempts left ðŸŽ¯`:"Wrong PIN! Account locked for 5 minutes.",errorCode:"WRONG_PIN"}}let m=function(e,t){if(!e)return 1;let a=new Date,s=new Date(e);s.setHours(0,0,0,0);let r=new Date(a);r.setHours(0,0,0,0);let i=Math.round((r.getTime()-s.getTime())/864e5);return 1===i?t+1:i>1?1:t||1}(u.lastLoginAt?.toDate(),u.streakDays||0);await (0,t.updateDoc)((0,t.doc)(a.db,s,c),{failedLoginAttempts:0,lastLoginAt:t.Timestamp.now(),streakDays:m,xpPoints:(0,t.increment)(10)});let g=await this.createSession(c),A={id:c,phone:u.phone,name:u.name,grade:u.grade,school:u.school,city:u.city,state:u.state,profilePicture:u.profilePicture,gender:u.gender,interests:u.interests||[],appliedOpportunities:u.appliedOpportunities||[],savedOpportunities:u.savedOpportunities||[],xpPoints:(u.xpPoints||0)+10,level:u.level||1,streakDays:m,badges:u.badges||[],isVerified:u.isVerified||!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:new Date,createdAt:u.createdAt?.toDate()||new Date,createdVia:u.createdVia||"web"};return{success:!0,user:A,session:g}}catch(e){return console.error("Login error:",e),{success:!1,error:"Something went wrong. Please try again!"}}},async createSession(e){let{device:s,browser:i}=c(),o=`session_${e}_${Date.now()}`,n=new Date,d={id:o,userId:e,device:s,browser:i,createdAt:n,lastActiveAt:n,isActive:!0};return await (0,t.setDoc)((0,t.doc)(a.db,r,o),{...d,createdAt:t.Timestamp.fromDate(n),lastActiveAt:t.Timestamp.fromDate(n)}),localStorage.setItem("myark_session",o),localStorage.setItem("myark_user_id",e),d},async validateSession(e){try{let i=await (0,t.getDoc)((0,t.doc)(a.db,r,e));if(!i.exists())return null;let o=i.data();if(!o.isActive)return null;let n=o.createdAt?.toDate()||new Date,d=new Date(n.getTime()+2592e6);if(new Date>d)return await this.terminateSession(e),null;let c=await (0,t.getDoc)((0,t.doc)(a.db,s,o.userId));if(!c.exists())return null;let l=c.data();if(l.isBlocked)return null;return await (0,t.updateDoc)((0,t.doc)(a.db,r,e),{lastActiveAt:t.Timestamp.now()}),{id:c.id,phone:l.phone,name:l.name,grade:l.grade,school:l.school,city:l.city,state:l.state,profilePicture:l.profilePicture,gender:l.gender,interests:l.interests||[],appliedOpportunities:l.appliedOpportunities||[],savedOpportunities:l.savedOpportunities||[],xpPoints:l.xpPoints||0,level:l.level||1,streakDays:l.streakDays||0,badges:l.badges||[],isVerified:l.isVerified||!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:l.lastLoginAt?.toDate(),createdAt:l.createdAt?.toDate()||new Date,createdVia:l.createdVia||"web"}}catch(e){return console.error("Session validation error:",e),null}},async terminateSession(e){try{await (0,t.updateDoc)((0,t.doc)(a.db,r,e),{isActive:!1})}catch(e){console.error("Session termination error:",e)}},async logout(){let e=localStorage.getItem("myark_session");e&&await this.terminateSession(e),localStorage.removeItem("myark_session"),localStorage.removeItem("myark_user_id")},async checkRateLimit(e){let t=e.failedLoginAttempts||0,a=e.lastFailedAttempt?.toDate();if(t>=5&&a){let e=new Date(a.getTime()+3e5);if(new Date<e)return{allowed:!1,remainingAttempts:0,lockoutUntil:e}}return{allowed:!0,remainingAttempts:5-t}},async incrementFailedAttempts(e){await (0,t.updateDoc)((0,t.doc)(a.db,s,e),{failedLoginAttempts:(0,t.increment)(1),lastFailedAttempt:t.Timestamp.now()})},async getAllUsers(e){try{let r=(0,t.collection)(a.db,s),i=(await (0,t.getDocs)(r)).docs.map(e=>{let t=e.data();return{id:e.id,phone:t.phone,name:t.name,grade:t.grade,school:t.school,city:t.city,xpPoints:t.xpPoints||0,level:t.level||1,streakDays:t.streakDays||0,badges:t.badges||[],isVerified:t.isVerified||!0,isBlocked:t.isBlocked||!1,blockReason:t.blockReason,failedLoginAttempts:t.failedLoginAttempts||0,lastLoginAt:t.lastLoginAt?.toDate(),lastFailedAttempt:t.lastFailedAttempt?.toDate(),createdAt:t.createdAt?.toDate()||new Date,createdVia:t.createdVia||"web",personaGoal:t.personaGoal,competitiveness:t.competitiveness,weeklyTimeCommitment:t.weeklyTimeCommitment,deliveryPreference:t.deliveryPreference,interests:t.interests||[],appliedOpportunities:t.appliedOpportunities||[],savedOpportunities:t.savedOpportunities||[],email:t.email}});if(e?.search){let t=e.search.toLowerCase();i=i.filter(e=>e.phone.includes(t)||e.name?.toLowerCase().includes(t))}return e?.blocked!==void 0&&(i=i.filter(t=>t.isBlocked===e.blocked)),i.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())}catch(e){return console.error("Error fetching users:",e),[]}},async getUserSessions(e){try{let s=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("userId","==",e));return(await (0,t.getDocs)(s)).docs.map(e=>{let t=e.data();return{id:e.id,userId:t.userId,device:t.device,browser:t.browser,createdAt:t.createdAt?.toDate()||new Date,lastActiveAt:t.lastActiveAt?.toDate()||new Date,isActive:t.isActive}}).sort((e,t)=>t.lastActiveAt.getTime()-e.lastActiveAt.getTime())}catch(e){return console.error("Error fetching sessions:",e),[]}},async blockUser(e,r){for(let i of(await (0,t.updateDoc)((0,t.doc)(a.db,s,e),{isBlocked:!0,blockReason:r}),await this.getUserSessions(e)))await this.terminateSession(i.id)},async unblockUser(e){await (0,t.updateDoc)((0,t.doc)(a.db,s,e),{isBlocked:!1,blockReason:null,failedLoginAttempts:0})},async resetUserPin(e,r){let i=await n(r);await (0,t.updateDoc)((0,t.doc)(a.db,s,e),{pinHash:i,failedLoginAttempts:0})},async terminateAllUserSessions(e){for(let t of(await this.getUserSessions(e)))await this.terminateSession(t.id)},async updateUserXP(e,r){await (0,t.updateDoc)((0,t.doc)(a.db,s,e),{xpPoints:(0,t.increment)(r)})},async updateProfile(e,r){let i=["name","profilePicture","grade","school","city","state","gender","interests","personaGoal","competitiveness","weeklyTimeCommitment","deliveryPreference","badges"],o={};for(let[e,t]of Object.entries(r))i.includes(e)&&void 0!==t&&(o[e]=t);Object.keys(o).length>0&&await (0,t.updateDoc)((0,t.doc)(a.db,s,e),o)},async saveOpportunity(r,i){let{arrayUnion:o}=await e.A(27510);await (0,t.updateDoc)((0,t.doc)(a.db,s,r),{savedOpportunities:o(i),xpPoints:(0,t.increment)(5)})},async unsaveOpportunity(r,i){let{arrayRemove:o}=await e.A(27510);await (0,t.updateDoc)((0,t.doc)(a.db,s,r),{savedOpportunities:o(i)})},async applyToOpportunity(r,i){let{arrayUnion:o}=await e.A(27510),n=(0,t.doc)(a.db,s,r),d=(0,t.doc)(a.db,"opportunities",i);await (0,t.updateDoc)(n,{appliedOpportunities:o(i),xpPoints:(0,t.increment)(40)}),await (0,t.updateDoc)(d,{applicationCount:(0,t.increment)(1)})},async addProfileXP(e,r){await (0,t.updateDoc)((0,t.doc)(a.db,s,e),{xpPoints:(0,t.increment)(r)})}};e.s(["default",0,l,"studentAuthService",0,l])},62475,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(38047);let r=(0,a.createContext)(void 0);e.s(["StudentAuthProvider",0,({children:e})=>{let[i,o]=(0,a.useState)(null),[n,d]=(0,a.useState)(!0),[c,l]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),[m,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("myark_session");if(e){let t=await s.studentAuthService.validateSession(e);t?o(t):(localStorage.removeItem("myark_session"),localStorage.removeItem("myark_user_id"))}}catch(e){console.error("Session check error:",e)}finally{d(!1)}})()},[]);let A=(0,a.useCallback)(e=>{p(e||{mode:"login"}),l(!0)},[]),y=(0,a.useCallback)(()=>{l(!1),u?.onClose?.(),setTimeout(()=>p(null),300)},[u]),h=(0,a.useCallback)(()=>{g(!0)},[]),f=(0,a.useCallback)(()=>{g(!1)},[]),w=(0,a.useCallback)(async(e,t)=>{let a=await s.studentAuthService.login(e,t);return a.success&&a.user&&(o(a.user),y(),u?.onSuccess?.()),a},[y,u]),b=(0,a.useCallback)(async(e,t)=>{let a=await s.studentAuthService.register(e,t);return a.success&&a.user&&(o(a.user),y(),u?.onSuccess?.()),a},[y,u]),D=(0,a.useCallback)(async()=>{await s.studentAuthService.logout(),o(null)},[]),v=(0,a.useCallback)(async()=>{let e=localStorage.getItem("myark_session");if(e){let t=await s.studentAuthService.validateSession(e);t&&o(t)}},[]),S=(0,a.useCallback)(e=>{i&&o(t=>t?{...t,xpPoints:t.xpPoints+e}:null)},[i]),T=(0,a.useCallback)(async e=>{if(i){o(t=>t?{...t,...e}:null);try{await s.studentAuthService.updateProfile(i.id,e)}catch(e){throw console.error("Failed to update profile:",e),await v(),e}}},[i,v]),k=(0,a.useCallback)(async e=>{if(i){o(t=>t?{...t,savedOpportunities:[...t.savedOpportunities||[],e],xpPoints:t.xpPoints+5}:null);try{await s.studentAuthService.saveOpportunity(i.id,e)}catch(e){console.error("Failed to save opportunity:",e),await v()}}},[i,v]),O=(0,a.useCallback)(async e=>{if(i){o(t=>t?{...t,savedOpportunities:(t.savedOpportunities||[]).filter(t=>t!==e)}:null);try{await s.studentAuthService.unsaveOpportunity(i.id,e)}catch(e){console.error("Failed to unsave opportunity:",e),await v()}}},[i,v]),P=(0,a.useCallback)(async e=>{if(i){o(t=>t?{...t,appliedOpportunities:[...t.appliedOpportunities||[],e],xpPoints:t.xpPoints+40}:null);try{await s.studentAuthService.applyToOpportunity(i.id,e)}catch(e){console.error("Failed to apply to opportunity:",e),await v()}}},[i,v]),C=(0,a.useCallback)(async e=>{if(i){o(t=>t?{...t,xpPoints:t.xpPoints+e}:null);try{await s.studentAuthService.addProfileXP(i.id,e)}catch(e){console.error("Failed to add XP:",e),await v()}}},[i,v]);return(0,t.jsx)(r.Provider,{value:{student:i,loading:n,isAuthenticated:!!i,authModalOpen:c,authModalOptions:u,showAuthModal:A,hideAuthModal:y,onboardingOpen:m,showOnboardingModal:h,hideOnboardingModal:f,login:w,register:b,logout:D,refreshUser:v,addXP:S,updateStudent:T,saveOpportunity:k,unsaveOpportunity:O,applyToOpportunity:P,addXPWithPersist:C},children:e})},"useStudentAuth",0,()=>{let e=(0,a.useContext)(r);if(!e)throw Error("useStudentAuth must be used within a StudentAuthProvider");return e}])},71930,e=>{"use strict";let t=(0,e.i(75254).default)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);e.s(["Bookmark",()=>t],71930)}]);