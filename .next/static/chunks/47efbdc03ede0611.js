(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87486,e=>{"use strict";var t=e.i(43476),a=e.i(25913),s=e.i(75157);let r=(0,a.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:a,...i}){return(0,t.jsx)("div",{className:(0,s.cn)(r({variant:a}),e),...i})}e.s(["Badge",()=>i])},15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));n.displayName="CardDescription";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(48425),r=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var i=e.i(25913),l=e.i(75157);let n=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(r,{ref:s,className:(0,l.cn)(n(),e),...a}));d.displayName=r.displayName,e.s(["Label",()=>d],10204)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));r.displayName="Textarea",e.s(["Textarea",()=>r])},64659,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],64659)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},84774,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})}));r.displayName="Table";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b",e),...a}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a}));l.displayName="TableBody",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tr",{ref:r,className:(0,s.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...a}));n.displayName="TableRow";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));d.displayName="TableHead";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableCell",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>o,"TableHead",()=>d,"TableHeader",()=>i,"TableRow",()=>n])},46615,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(46932);let r=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var i=e.i(45423),l=e.i(61911),n=e.i(3116),d=e.i(86536),o=e.i(31278),c=e.i(19455),m=e.i(93479),u=e.i(24687),x=e.i(10204),f=e.i(87486),p=e.i(15288),h=e.i(67489),g=e.i(84774),b=e.i(81140),y=e.i(30030),j=e.i(42727),v=e.i(96626),N=e.i(48425),C=e.i(86318),w=e.i(69340),T=e.i(10772),S="Tabs",[R,k]=(0,y.createContextScope)(S,[j.createRovingFocusGroupScope]),H=(0,j.createRovingFocusGroupScope)(),[D,A]=R(S),I=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,onValueChange:i,defaultValue:l,orientation:n="horizontal",dir:d,activationMode:o="automatic",...c}=e,m=(0,C.useDirection)(d),[u,x]=(0,w.useControllableState)({prop:r,onChange:i,defaultProp:l??"",caller:S});return(0,t.jsx)(D,{scope:s,baseId:(0,T.useId)(),value:u,onValueChange:x,orientation:n,dir:m,activationMode:o,children:(0,t.jsx)(N.Primitive.div,{dir:m,"data-orientation":n,...c,ref:a})})});I.displayName=S;var L="TabsList",M=a.forwardRef((e,a)=>{let{__scopeTabs:s,loop:r=!0,...i}=e,l=A(L,s),n=H(s);return(0,t.jsx)(j.Root,{asChild:!0,...n,orientation:l.orientation,dir:l.dir,loop:r,children:(0,t.jsx)(N.Primitive.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:a})})});M.displayName=L;var B="TabsTrigger",E=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,disabled:i=!1,...l}=e,n=A(B,s),d=H(s),o=$(n.baseId,r),c=V(n.baseId,r),m=r===n.value;return(0,t.jsx)(j.Item,{asChild:!0,...d,focusable:!i,active:m,children:(0,t.jsx)(N.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":c,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:o,...l,ref:a,onMouseDown:(0,b.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():n.onValueChange(r)}),onKeyDown:(0,b.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&n.onValueChange(r)}),onFocus:(0,b.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==n.activationMode;m||i||!e||n.onValueChange(r)})})})});E.displayName=B;var F="TabsContent",P=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:i,forceMount:l,children:n,...d}=e,o=A(F,r),c=$(o.baseId,i),m=V(o.baseId,i),u=i===o.value,x=a.useRef(u);return a.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(v.Presence,{present:l||u,children:({present:a})=>(0,t.jsx)(N.Primitive.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!a,id:m,tabIndex:0,...d,ref:s,style:{...e.style,animationDuration:x.current?"0s":void 0},children:a&&n})})});function $(e,t){return`${e}-trigger-${t}`}function V(e,t){return`${e}-content-${t}`}P.displayName=F;var K=e.i(75157);let z=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(M,{ref:s,className:(0,K.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));z.displayName=M.displayName;let G=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(E,{ref:s,className:(0,K.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...a}));G.displayName=E.displayName;let O=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(P,{ref:s,className:(0,K.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));O.displayName=P.displayName;var U=e.i(74911),q=e.i(1132);e.i(36180);var Y=e.i(98925),_=e.i(59141);e.s(["default",0,()=>{let{toast:e}=(0,U.useToast)(),[b,y]=(0,a.useState)(!0),[j,v]=(0,a.useState)(!1),[N,C]=(0,a.useState)([]),[w,T]=(0,a.useState)(""),[S,R]=(0,a.useState)(""),[k,H]=(0,a.useState)("all"),[D,A]=(0,a.useState)([]),[L,M]=(0,a.useState)([]),[B,E]=(0,a.useState)([6,7,8,9,10,11,12]),[F,P]=(0,a.useState)(["Science","Math","Coding","Arts","Sports"]),[$,V]=(0,a.useState)({total:0});(0,a.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([q.notificationsService.getAll(),q.studentsService.getStats()]);C(e),V({total:t.total});let[a,s]=await Promise.all([(0,Y.getDoc)((0,Y.doc)(_.db,"settings","grades")),(0,Y.getDoc)((0,Y.doc)(_.db,"settings","tags"))]);a.exists()&&a.data().grades&&E(a.data().grades),s.exists()&&s.data().tags&&P(s.data().tags)}catch(e){console.error("Error fetching data:",e)}finally{y(!1)}})()},[]);let K=()=>"all"===k?`~${$.total.toLocaleString()} students`:"by-grade"===k&&D.length>0?`~${(D.length*Math.round($.total/B.length)).toLocaleString()} students`:"by-interest"===k&&L.length>0?`~${(L.length*Math.round($.total/F.length/2)).toLocaleString()} students`:"Select audience",W=async()=>{if(w.trim()&&S.trim()){v(!0);try{await q.notificationsService.send({title:w,message:S,target:k,targetCriteria:{grades:"by-grade"===k?D:void 0,interests:"by-interest"===k?L:void 0},sentCount:parseInt(K().replace(/[^0-9]/g,""))||0,openedCount:0}),e({title:"Notification sent!",description:`Sent to ${K()}`}),T(""),R(""),H("all"),A([]),M([]);let t=await q.notificationsService.getAll();C(t)}catch(t){console.error("Error sending notification:",t),e({title:"Error",description:"Failed to send notification",variant:"destructive"})}finally{v(!1)}}};return b?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold font-display",children:"Notifications"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Send push notifications to students"})]}),(0,t.jsxs)(I,{defaultValue:"compose",className:"space-y-6",children:[(0,t.jsxs)(z,{children:[(0,t.jsxs)(G,{value:"compose",className:"gap-2",children:[(0,t.jsx)(r,{className:"w-4 h-4"}),"Compose"]}),(0,t.jsxs)(G,{value:"history",className:"gap-2",children:[(0,t.jsx)(n.Clock,{className:"w-4 h-4"}),"History (",N.length,")"]})]}),(0,t.jsx)(O,{value:"compose",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Bell,{className:"w-5 h-5"}),"Compose Notification"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.Label,{htmlFor:"title",children:"Title *"}),(0,t.jsx)(m.Input,{id:"title",placeholder:"e.g., New Scholarship Alert! ï¿½x}\x1c",value:w,onChange:e=>T(e.target.value),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(x.Label,{htmlFor:"message",children:"Message *"}),(0,t.jsx)(u.Textarea,{id:"message",placeholder:"Write your notification message...",value:S,onChange:e=>R(e.target.value),className:"mt-1 min-h-[120px]"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[S.length,"/500 characters"]})]})]})]})}),(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(p.Card,{children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Users,{className:"w-5 h-5"}),"Target Audience"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,t.jsxs)(h.Select,{value:k,onValueChange:H,children:[(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{placeholder:"Select audience"})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"all",children:"All Students"}),(0,t.jsx)(h.SelectItem,{value:"by-grade",children:"By Grade"}),(0,t.jsx)(h.SelectItem,{value:"by-interest",children:"By Interest"})]})]}),"by-grade"===k&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{children:"Select Grades"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:B.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>{A(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-4 py-2 rounded-lg border transition-all ${D.includes(e)?"bg-primary text-primary-foreground border-primary":"bg-muted/50 border-border hover:border-primary/50"}`,children:["Class ",e]},e))})]}),"by-interest"===k&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Label,{children:"Select Interests"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{M(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:`px-4 py-2 rounded-lg border transition-all ${L.includes(e)?"bg-primary text-primary-foreground border-primary":"bg-muted/50 border-border hover:border-primary/50"}`,children:e},e))})]})]})]})})]}),(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(p.Card,{className:"sticky top-24",children:[(0,t.jsx)(p.CardHeader,{children:(0,t.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Eye,{className:"w-5 h-5"}),"Preview"]})}),(0,t.jsxs)(p.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-xl space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-primary-foreground font-bold text-xs",children:"M"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:"MyArk"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"now"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:w||"Notification Title"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:S||"Your notification message will appear here..."})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-primary/5 rounded-xl border border-primary/20",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estimated Reach"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-primary",children:K()})]}),(0,t.jsx)(c.Button,{className:"w-full gap-2",size:"lg",disabled:!w||!S||j,onClick:W,children:j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{className:"w-4 h-4"}),"Send Notification"]})})]})]})})]})}),(0,t.jsx)(O,{value:"history",children:(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,t.jsx)(p.Card,{children:(0,t.jsx)(p.CardContent,{className:"p-0",children:0===N.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,t.jsx)(i.Bell,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No notifications sent yet"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Your sent notifications will appear here"})]}):(0,t.jsxs)(g.Table,{children:[(0,t.jsx)(g.TableHeader,{children:(0,t.jsxs)(g.TableRow,{children:[(0,t.jsx)(g.TableHead,{children:"Notification"}),(0,t.jsx)(g.TableHead,{children:"Target"}),(0,t.jsx)(g.TableHead,{className:"text-right",children:"Sent"}),(0,t.jsx)(g.TableHead,{className:"text-right",children:"Opened"}),(0,t.jsx)(g.TableHead,{className:"text-right",children:"Open Rate"}),(0,t.jsx)(g.TableHead,{children:"Sent At"})]})}),(0,t.jsx)(g.TableBody,{children:N.map(e=>{let a=e.sentCount?Math.round((e.openedCount||0)/e.sentCount*100):0;return(0,t.jsxs)(g.TableRow,{className:"cursor-pointer hover:bg-muted/50",children:[(0,t.jsx)(g.TableCell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate max-w-[300px]",children:e.message})]})}),(0,t.jsx)(g.TableCell,{children:(0,t.jsx)(f.Badge,{variant:"outline",children:"all"===e.target?"All Students":"by-grade"===e.target?`Class ${e.targetCriteria?.grades?.join(", ")}`:e.targetCriteria?.interests?.join(", ")||e.target})}),(0,t.jsx)(g.TableCell,{className:"text-right",children:(e.sentCount||0).toLocaleString()}),(0,t.jsx)(g.TableCell,{className:"text-right",children:(e.openedCount||0).toLocaleString()}),(0,t.jsx)(g.TableCell,{className:"text-right",children:(0,t.jsxs)(f.Badge,{className:a>50?"bg-success/20 text-success":"bg-yellow-500/20 text-yellow-500",children:[a,"%"]})}),(0,t.jsx)(g.TableCell,{className:"text-muted-foreground",children:e.sentAt?new Date(e.sentAt).toLocaleString():"-"})]},e.id)})})]})})})})})]})]})}],46615)}]);