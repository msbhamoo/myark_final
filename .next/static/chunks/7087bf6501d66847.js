(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83086,e=>{"use strict";let t=(0,e.i(75254).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>t],83086)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},48173,e=>{"use strict";let t=(0,e.i(75254).default)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);e.s(["Rocket",()=>t],48173)},62475,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(38047);let i=(0,r.createContext)(void 0);e.s(["StudentAuthProvider",0,({children:e})=>{let[n,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("myark_session");if(e){let t=await a.studentAuthService.validateSession(e);t?s(t):(localStorage.removeItem("myark_session"),localStorage.removeItem("myark_user_id"))}}catch(e){console.error("Session check error:",e)}finally{l(!1)}})()},[]);let h=(0,r.useCallback)(e=>{p(e||{mode:"login"}),d(!0)},[]),y=(0,r.useCallback)(()=>{d(!1),u?.onClose?.(),setTimeout(()=>p(null),300)},[u]),g=(0,r.useCallback)(()=>{f(!0)},[]),v=(0,r.useCallback)(()=>{f(!1)},[]),w=(0,r.useCallback)(async(e,t)=>{let r=await a.studentAuthService.login(e,t);return r.success&&r.user&&(s(r.user),y(),u?.onSuccess?.()),r},[y,u]),b=(0,r.useCallback)(async(e,t)=>{let r=await a.studentAuthService.register(e,t);return r.success&&r.user&&(s(r.user),y(),u?.onSuccess?.()),r},[y,u]),k=(0,r.useCallback)(async()=>{await a.studentAuthService.logout(),s(null)},[]),A=(0,r.useCallback)(async()=>{let e=localStorage.getItem("myark_session");if(e){let t=await a.studentAuthService.validateSession(e);t&&s(t)}},[]),x=(0,r.useCallback)(e=>{n&&s(t=>t?{...t,xpPoints:t.xpPoints+e}:null)},[n]),D=(0,r.useCallback)(async e=>{if(n){s(t=>t?{...t,...e}:null);try{await a.studentAuthService.updateProfile(n.id,e)}catch(e){throw console.error("Failed to update profile:",e),await A(),e}}},[n,A]),S=(0,r.useCallback)(async e=>{if(n){s(t=>t?{...t,savedOpportunities:[...t.savedOpportunities||[],e],xpPoints:t.xpPoints+5}:null);try{await a.studentAuthService.saveOpportunity(n.id,e)}catch(e){console.error("Failed to save opportunity:",e),await A()}}},[n,A]),P=(0,r.useCallback)(async e=>{if(n){s(t=>t?{...t,savedOpportunities:(t.savedOpportunities||[]).filter(t=>t!==e)}:null);try{await a.studentAuthService.unsaveOpportunity(n.id,e)}catch(e){console.error("Failed to unsave opportunity:",e),await A()}}},[n,A]),C=(0,r.useCallback)(async e=>{if(n){s(t=>t?{...t,appliedOpportunities:[...t.appliedOpportunities||[],e],xpPoints:t.xpPoints+40}:null);try{await a.studentAuthService.applyToOpportunity(n.id,e)}catch(e){console.error("Failed to apply to opportunity:",e),await A()}}},[n,A]),_=(0,r.useCallback)(async e=>{if(n){s(t=>t?{...t,xpPoints:t.xpPoints+e}:null);try{await a.studentAuthService.addProfileXP(n.id,e)}catch(e){console.error("Failed to add XP:",e),await A()}}},[n,A]);return(0,t.jsx)(i.Provider,{value:{student:n,loading:o,isAuthenticated:!!n,authModalOpen:c,authModalOptions:u,showAuthModal:h,hideAuthModal:y,onboardingOpen:m,showOnboardingModal:g,hideOnboardingModal:v,login:w,register:b,logout:k,refreshUser:A,addXP:x,updateStudent:D,saveOpportunity:S,unsaveOpportunity:P,applyToOpportunity:C,addXPWithPersist:_},children:e})},"useStudentAuth",0,()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useStudentAuth must be used within a StudentAuthProvider");return e}])},90597,e=>{"use strict";let t=(0,e.i(75254).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);e.s(["Heart",()=>t],90597)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},91918,20783,e=>{"use strict";var t=e.i(71645);function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let a=!1,i=e.map(e=>{let i=r(e,t);return a||"function"!=typeof i||(a=!0),i});if(a)return()=>{for(let t=0;t<i.length;t++){let a=i[t];"function"==typeof a?a():r(e[t],null)}}}}function i(...e){return t.useCallback(a(...e),e)}e.s(["composeRefs",()=>a,"useComposedRefs",()=>i],20783);var n=e.i(43476);function s(e){var r;let i,s=(r=e,(i=t.forwardRef((e,r)=>{let{children:i,...n}=e;if(t.isValidElement(i)){var s;let e,o,l=(s=i,(o=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(o=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),c=function(e,t){let r={...t};for(let a in t){let i=e[a],n=t[a];/^on[A-Z]/.test(a)?i&&n?r[a]=(...e)=>{let t=n(...e);return i(...e),t}:i&&(r[a]=i):"style"===a?r[a]={...i,...n}:"className"===a&&(r[a]=[i,n].filter(Boolean).join(" "))}return{...e,...r}}(n,i.props);return i.type!==t.Fragment&&(c.ref=r?a(r,l):l),t.cloneElement(i,c)}return t.Children.count(i)>1?t.Children.only(null):null})).displayName=`${r}.SlotClone`,i),o=t.forwardRef((e,r)=>{let{children:a,...i}=e,o=t.Children.toArray(a),l=o.find(d);if(l){let e=l.props.children,a=o.map(r=>r!==l?r:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,n.jsx)(s,{...i,ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,a):null})}return(0,n.jsx)(s,{...i,ref:r,children:a})});return o.displayName=`${e}.Slot`,o}var o=s("Slot"),l=Symbol("radix.slottable");function c(e){let t=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=l,t}function d(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}e.s(["Slot",()=>o,"createSlot",()=>s,"createSlottable",()=>c],91918)},25913,e=>{"use strict";var t=e.i(7670);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=t.clsx;e.s(["cva",0,(e,t)=>i=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==i?void 0:i.class,null==i?void 0:i.className);let{variants:s,defaultVariants:o}=t,l=Object.keys(s).map(e=>{let t=null==i?void 0:i[e],a=null==o?void 0:o[e];if(null===t)return null;let n=r(t)||r(a);return s[e][n]}),c=i&&Object.entries(i).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return a(e,l,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:a,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...c}[t]):({...o,...c})[t]===r})?[...e,r,a]:e},[]),null==i?void 0:i.class,null==i?void 0:i.className)}])},19455,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(91918),i=e.i(25913),n=e.i(75157);let s=(0,i.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_20px_hsl(185_100%_50%_/_0.3)]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary/50 bg-transparent text-foreground hover:bg-primary/10 hover:border-primary",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-[0_0_20px_hsl(15_95%_60%_/_0.3)]",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-gradient-to-r from-primary to-blue-500 text-primary-foreground hover:shadow-[0_0_40px_hsl(185_100%_50%_/_0.4)] hover:scale-105",accent:"bg-gradient-to-r from-secondary to-accent text-accent-foreground hover:shadow-[0_0_40px_hsl(45_100%_55%_/_0.4)] hover:scale-105",glass:"bg-white/5 backdrop-blur-xl border border-white/10 text-foreground hover:bg-white/10 hover:border-white/20",success:"bg-gradient-to-r from-success to-primary text-success-foreground hover:shadow-[0_0_40px_hsl(150_80%_50%_/_0.4)] hover:scale-105"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-lg px-4",lg:"h-14 rounded-2xl px-8 text-base",xl:"h-16 rounded-2xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:r,size:i,asChild:o=!1,...l},c)=>{let d=o?a.Slot:"button";return(0,t.jsx)(d,{className:(0,n.cn)(s({variant:r,size:i,className:e})),ref:c,...l})});o.displayName="Button",e.s(["Button",()=>o])},48425,e=>{"use strict";var t=e.i(71645),r=e.i(74080),a=e.i(91918),i=e.i(43476),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let n=(0,a.createSlot)(`Primitive.${r}`),s=t.forwardRef((e,t)=>{let{asChild:a,...s}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(a?n:r,{...s,ref:t})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{});function s(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>n,"dispatchDiscreteCustomEvent",()=>s])},37727,e=>{"use strict";let t=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},96626,e=>{"use strict";var t=e.i(71645),r=e.i(20783),a=e.i(34620),i=e=>{var i;let s,o,{present:l,children:c}=e,d=function(e){var r,i;let[s,o]=t.useState(),l=t.useRef(null),c=t.useRef(e),d=t.useRef("none"),[u,p]=(r=e?"mounted":"unmounted",i={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>i[e][t]??e,r));return t.useEffect(()=>{let e=n(l.current);d.current="mounted"===u?e:"none"},[u]),(0,a.useLayoutEffect)(()=>{let t=l.current,r=c.current;if(r!==e){let a=d.current,i=n(t);e?p("MOUNT"):"none"===i||t?.display==="none"?p("UNMOUNT"):r&&a!==i?p("ANIMATION_OUT"):p("UNMOUNT"),c.current=e}},[e,p]),(0,a.useLayoutEffect)(()=>{if(s){let e,t=s.ownerDocument.defaultView??window,r=r=>{let a=n(l.current).includes(r.animationName);if(r.target===s&&a&&(p("ANIMATION_END"),!c.current)){let r=s.style.animationFillMode;s.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=r)})}},a=e=>{e.target===s&&(d.current=n(l.current))};return s.addEventListener("animationstart",a),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{t.clearTimeout(e),s.removeEventListener("animationstart",a),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}p("ANIMATION_END")},[s,p]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(e=>{l.current=e?getComputedStyle(e):null,o(e)},[])}}(l),u="function"==typeof c?c({present:d.isPresent}):t.Children.only(c),p=(0,r.useComposedRefs)(d.ref,(i=u,(o=(s=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning)?i.ref:(o=(s=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning)?i.props.ref:i.props.ref||i.ref));return"function"==typeof c||d.isPresent?t.cloneElement(u,{ref:p}):null};function n(e){return e?.animationName||"none"}i.displayName="Presence",e.s(["Presence",()=>i])},39312,e=>{"use strict";let t=(0,e.i(75254).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>t],39312)},38047,e=>{"use strict";e.i(36180);var t=e.i(98925),r=e.i(59141);let a="studentUsers",i="studentSessions",n="studentLeads",s="userPhones";async function o(e){let t=new TextEncoder().encode(e+"myark_salt_2026");return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function l(e,t){return await o(e)===t}function c(){let e=navigator.userAgent,t="Unknown Device",r="Unknown Browser";return/iPhone/i.test(e)?t="iPhone":/iPad/i.test(e)?t="iPad":/Android/i.test(e)?t="Android":/Windows/i.test(e)?t="Windows":/Mac/i.test(e)?t="Mac":/Linux/i.test(e)&&(t="Linux"),/Chrome/i.test(e)&&!/Edg/i.test(e)?r="Chrome":/Safari/i.test(e)&&!/Chrome/i.test(e)?r="Safari":/Firefox/i.test(e)?r="Firefox":/Edg/i.test(e)&&(r="Edge"),{device:t,browser:r}}let d={async captureLead(e){try{let a=e.replace(/\D/g,"");if(10!==a.length)return;let i=`lead_${a}`,{device:s,browser:o}=c(),l=new Date;await (0,t.setDoc)((0,t.doc)(r.db,n,i),{id:i,phone:a,createdAt:t.Timestamp.fromDate(l),converted:!1,device:s,browser:o},{merge:!0})}catch(e){console.error("Lead capture error:",e)}},async convertLead(e){try{let a=e.replace(/\D/g,""),i=`lead_${a}`;await (0,t.updateDoc)((0,t.doc)(r.db,n,i),{converted:!0,convertedAt:t.Timestamp.now()})}catch(e){}},async register(e,i){try{let n=e.replace(/\D/g,"");if(10!==n.length)return{success:!1,error:"Please enter a valid 10-digit mobile number",errorCode:"INVALID_PHONE"};if(!/^\d{4}$/.test(i))return{success:!1,error:"PIN must be 4 digits",errorCode:"INVALID_PIN"};if((await (0,t.getDoc)((0,t.doc)(r.db,s,n))).exists())return{success:!1,error:"This number is already registered. Try logging in!",errorCode:"PHONE_EXISTS"};let l=await o(i),c=`user_${n}_${Date.now()}`,d=new Date,u={id:c,phone:n,xpPoints:50,level:1,streakDays:1,badges:["early_bird"],interests:[],appliedOpportunities:[],savedOpportunities:[],isVerified:!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:d,createdAt:d,createdVia:"web"};await (0,t.setDoc)((0,t.doc)(r.db,a,c),{...u,pinHash:l,createdAt:t.Timestamp.fromDate(d),lastLoginAt:t.Timestamp.fromDate(d)}),await (0,t.setDoc)((0,t.doc)(r.db,s,n),{phone:n,userId:c,createdAt:t.Timestamp.fromDate(d)}),await this.convertLead(n);let p=await this.createSession(c);return{success:!0,user:u,session:p}}catch(e){return console.error("Registration error:",e),{success:!1,error:"Something went wrong. Please try again!"}}},async login(e,i){try{let n=e.replace(/\D/g,"");if(10!==n.length)return{success:!1,error:"Please enter a valid 10-digit mobile number",errorCode:"INVALID_PHONE"};let o=await (0,t.getDoc)((0,t.doc)(r.db,s,n));if(!o.exists())return{success:!1,error:"No account found with this number. Want to register?",errorCode:"USER_NOT_FOUND"};let c=o.data().userId,d=await (0,t.getDoc)((0,t.doc)(r.db,a,c));if(!d.exists())return{success:!1,error:"No account found with this number. Want to register?",errorCode:"USER_NOT_FOUND"};let u=d.data();if(u.isBlocked)return{success:!1,error:"Your account has been blocked. Contact support for help.",errorCode:"BLOCKED"};let p=await this.checkRateLimit(u);if(!p.allowed){let e=Math.ceil((p.lockoutUntil.getTime()-Date.now())/6e4);return{success:!1,error:`Too many attempts! Take a break for ${e} min â˜•`,errorCode:"RATE_LIMITED"}}if(!await l(i,u.pinHash)){await this.incrementFailedAttempts(c);let e=5-(u.failedLoginAttempts+1);return{success:!1,error:e>0?`Wrong PIN! ${e} attempts left ðŸŽ¯`:"Wrong PIN! Account locked for 5 minutes.",errorCode:"WRONG_PIN"}}let m=function(e,t){if(!e)return 1;let r=new Date,a=new Date(e);a.setHours(0,0,0,0);let i=new Date(r);i.setHours(0,0,0,0);let n=Math.round((i.getTime()-a.getTime())/864e5);return 1===n?t+1:n>1?1:t||1}(u.lastLoginAt?.toDate(),u.streakDays||0);await (0,t.updateDoc)((0,t.doc)(r.db,a,c),{failedLoginAttempts:0,lastLoginAt:t.Timestamp.now(),streakDays:m,xpPoints:(0,t.increment)(10)});let f=await this.createSession(c),h={id:c,phone:u.phone,name:u.name,grade:u.grade,school:u.school,city:u.city,state:u.state,profilePicture:u.profilePicture,gender:u.gender,interests:u.interests||[],appliedOpportunities:u.appliedOpportunities||[],savedOpportunities:u.savedOpportunities||[],xpPoints:(u.xpPoints||0)+10,level:u.level||1,streakDays:m,badges:u.badges||[],isVerified:u.isVerified||!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:new Date,createdAt:u.createdAt?.toDate()||new Date,createdVia:u.createdVia||"web"};return{success:!0,user:h,session:f}}catch(e){return console.error("Login error:",e),{success:!1,error:"Something went wrong. Please try again!"}}},async createSession(e){let{device:a,browser:n}=c(),s=`session_${e}_${Date.now()}`,o=new Date,l={id:s,userId:e,device:a,browser:n,createdAt:o,lastActiveAt:o,isActive:!0};return await (0,t.setDoc)((0,t.doc)(r.db,i,s),{...l,createdAt:t.Timestamp.fromDate(o),lastActiveAt:t.Timestamp.fromDate(o)}),localStorage.setItem("myark_session",s),localStorage.setItem("myark_user_id",e),l},async validateSession(e){try{let n=await (0,t.getDoc)((0,t.doc)(r.db,i,e));if(!n.exists())return null;let s=n.data();if(!s.isActive)return null;let o=s.createdAt?.toDate()||new Date,l=new Date(o.getTime()+2592e6);if(new Date>l)return await this.terminateSession(e),null;let c=await (0,t.getDoc)((0,t.doc)(r.db,a,s.userId));if(!c.exists())return null;let d=c.data();if(d.isBlocked)return null;return await (0,t.updateDoc)((0,t.doc)(r.db,i,e),{lastActiveAt:t.Timestamp.now()}),{id:c.id,phone:d.phone,name:d.name,grade:d.grade,school:d.school,city:d.city,state:d.state,profilePicture:d.profilePicture,gender:d.gender,interests:d.interests||[],appliedOpportunities:d.appliedOpportunities||[],savedOpportunities:d.savedOpportunities||[],xpPoints:d.xpPoints||0,level:d.level||1,streakDays:d.streakDays||0,badges:d.badges||[],isVerified:d.isVerified||!0,isBlocked:!1,failedLoginAttempts:0,lastLoginAt:d.lastLoginAt?.toDate(),createdAt:d.createdAt?.toDate()||new Date,createdVia:d.createdVia||"web"}}catch(e){return console.error("Session validation error:",e),null}},async terminateSession(e){try{await (0,t.updateDoc)((0,t.doc)(r.db,i,e),{isActive:!1})}catch(e){console.error("Session termination error:",e)}},async logout(){let e=localStorage.getItem("myark_session");e&&await this.terminateSession(e),localStorage.removeItem("myark_session"),localStorage.removeItem("myark_user_id")},async checkRateLimit(e){let t=e.failedLoginAttempts||0,r=e.lastFailedAttempt?.toDate();if(t>=5&&r){let e=new Date(r.getTime()+3e5);if(new Date<e)return{allowed:!1,remainingAttempts:0,lockoutUntil:e}}return{allowed:!0,remainingAttempts:5-t}},async incrementFailedAttempts(e){await (0,t.updateDoc)((0,t.doc)(r.db,a,e),{failedLoginAttempts:(0,t.increment)(1),lastFailedAttempt:t.Timestamp.now()})},async getAllUsers(e){try{let i=(0,t.collection)(r.db,a),n=(await (0,t.getDocs)(i)).docs.map(e=>{let t=e.data();return{id:e.id,phone:t.phone,name:t.name,grade:t.grade,school:t.school,city:t.city,xpPoints:t.xpPoints||0,level:t.level||1,streakDays:t.streakDays||0,badges:t.badges||[],isVerified:t.isVerified||!0,isBlocked:t.isBlocked||!1,blockReason:t.blockReason,failedLoginAttempts:t.failedLoginAttempts||0,lastLoginAt:t.lastLoginAt?.toDate(),lastFailedAttempt:t.lastFailedAttempt?.toDate(),createdAt:t.createdAt?.toDate()||new Date,createdVia:t.createdVia||"web",personaGoal:t.personaGoal,competitiveness:t.competitiveness,weeklyTimeCommitment:t.weeklyTimeCommitment,deliveryPreference:t.deliveryPreference,interests:t.interests||[],appliedOpportunities:t.appliedOpportunities||[],savedOpportunities:t.savedOpportunities||[],email:t.email}});if(e?.search){let t=e.search.toLowerCase();n=n.filter(e=>e.phone.includes(t)||e.name?.toLowerCase().includes(t))}return e?.blocked!==void 0&&(n=n.filter(t=>t.isBlocked===e.blocked)),n.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())}catch(e){return console.error("Error fetching users:",e),[]}},async getUserSessions(e){try{let a=(0,t.query)((0,t.collection)(r.db,i),(0,t.where)("userId","==",e));return(await (0,t.getDocs)(a)).docs.map(e=>{let t=e.data();return{id:e.id,userId:t.userId,device:t.device,browser:t.browser,createdAt:t.createdAt?.toDate()||new Date,lastActiveAt:t.lastActiveAt?.toDate()||new Date,isActive:t.isActive}}).sort((e,t)=>t.lastActiveAt.getTime()-e.lastActiveAt.getTime())}catch(e){return console.error("Error fetching sessions:",e),[]}},async blockUser(e,i){for(let n of(await (0,t.updateDoc)((0,t.doc)(r.db,a,e),{isBlocked:!0,blockReason:i}),await this.getUserSessions(e)))await this.terminateSession(n.id)},async unblockUser(e){await (0,t.updateDoc)((0,t.doc)(r.db,a,e),{isBlocked:!1,blockReason:null,failedLoginAttempts:0})},async resetUserPin(e,i){let n=await o(i);await (0,t.updateDoc)((0,t.doc)(r.db,a,e),{pinHash:n,failedLoginAttempts:0})},async terminateAllUserSessions(e){for(let t of(await this.getUserSessions(e)))await this.terminateSession(t.id)},async updateUserXP(e,i){await (0,t.updateDoc)((0,t.doc)(r.db,a,e),{xpPoints:(0,t.increment)(i)})},async updateProfile(e,i){let n=["name","profilePicture","grade","school","city","state","gender","interests","personaGoal","competitiveness","weeklyTimeCommitment","deliveryPreference","badges"],s={};for(let[e,t]of Object.entries(i))n.includes(e)&&void 0!==t&&(s[e]=t);Object.keys(s).length>0&&await (0,t.updateDoc)((0,t.doc)(r.db,a,e),s)},async saveOpportunity(i,n){let{arrayUnion:s}=await e.A(27510);await (0,t.updateDoc)((0,t.doc)(r.db,a,i),{savedOpportunities:s(n),xpPoints:(0,t.increment)(5)})},async unsaveOpportunity(i,n){let{arrayRemove:s}=await e.A(27510);await (0,t.updateDoc)((0,t.doc)(r.db,a,i),{savedOpportunities:s(n)})},async applyToOpportunity(i,n){let{arrayUnion:s}=await e.A(27510),o=(0,t.doc)(r.db,a,i),l=(0,t.doc)(r.db,"opportunities",n);await (0,t.updateDoc)(o,{appliedOpportunities:s(n),xpPoints:(0,t.increment)(40)}),await (0,t.updateDoc)(l,{applicationCount:(0,t.increment)(1)})},async addProfileXP(e,i){await (0,t.updateDoc)((0,t.doc)(r.db,a,e),{xpPoints:(0,t.increment)(i)})}};e.s(["default",0,d,"studentAuthService",0,d])},70273,e=>{"use strict";let t=(0,e.i(75254).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],70273)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},63544,e=>{"use strict";let t=(0,e.i(75254).default)("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);e.s(["School",()=>t],63544)},72299,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(51718);var a=e.i(6973);e.i(36180);var i=e.i(98925),n=e.i(59141);let s=(0,r.createContext)(void 0);e.s(["AuthProvider",0,({children:e})=>{let[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=(0,a.onAuthStateChanged)(n.auth,async e=>{if(e)try{let t=await (0,i.getDoc)((0,i.doc)(n.db,"admins",e.uid));if(t.exists()){let r=t.data();l({uid:e.uid,email:e.email,displayName:e.displayName||r.name||"Admin",role:r.role||"admin"})}else l(null),await (0,a.signOut)(n.auth)}catch(e){console.error("Error checking admin status:",e),l(null)}else l(null);d(!1)});return()=>e()},[]);let m=async(e,t)=>{p(null),d(!0);try{let r=await (0,a.signInWithEmailAndPassword)(n.auth,e,t),s=await (0,i.getDoc)((0,i.doc)(n.db,"admins",r.user.uid));if(!s.exists())return await (0,a.signOut)(n.auth),p("You do not have admin access."),d(!1),!1;let o=s.data();return l({uid:r.user.uid,email:r.user.email,displayName:r.user.displayName||o.name||"Admin",role:o.role||"admin"}),d(!1),!0}catch(e){return p(e instanceof Error?e.message:"Failed to sign in"),d(!1),!1}},f=async()=>{await (0,a.signOut)(n.auth),l(null)};return(0,t.jsxs)(s.Provider,{value:{user:o,loading:c,error:u,signIn:m,signOut:f,isAdmin:!!o},children:[" ",e," "]})},"useAuth",0,()=>{let e=(0,r.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}])},84243,e=>{"use strict";let t=(0,e.i(75254).default)("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);e.s(["Medal",()=>t],84243)},32095,e=>{"use strict";let t=(0,e.i(75254).default)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);e.s(["GraduationCap",()=>t],32095)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),a=e.i(31178),i=e.i(47414),n=e.i(74008),s=e.i(21476),o=e.i(72846),l=r,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,a=(0,o.isHTMLElement)(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left,i.bottom=a-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:a,anchorX:i,anchorY:n,root:s}){let o=(0,l.useId)(),p=(0,l.useRef)(null),m=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=(0,l.useContext)(c.MotionConfigContext),h=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,a=e.map(e=>{let a=d(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():d(e[t],null)}}}}(...e),e)}(p,e.props?.ref??e?.ref);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:l,right:c,bottom:d}=m.current;if(a||!p.current||!e||!t)return;let u="left"===i?`left: ${l}`:`right: ${c}`,h="bottom"===n?`bottom: ${d}`:`top: ${r}`;p.current.dataset.motionPopId=o;let y=document.createElement("style");f&&(y.nonce=f);let g=s??document.head;return g.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${h}px !important;
          }
        `),()=>{g.contains(y)&&g.removeChild(y)}},[a]),(0,t.jsx)(u,{isPresent:a,childRef:p,sizeRef:m,children:l.cloneElement(e,{ref:h})})}let m=({children:e,initial:a,isPresent:n,onExitComplete:o,custom:l,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:m,root:h})=>{let y=(0,i.useConstant)(f),g=(0,r.useId)(),v=!0,w=(0,r.useMemo)(()=>(v=!1,{id:g,initial:a,isPresent:n,custom:l,onExitComplete:e=>{for(let t of(y.set(e,!0),y.values()))if(!t)return;o&&o()},register:e=>(y.set(e,!1),()=>y.delete(e))}),[n,y,o]);return c&&v&&(w={...w}),(0,r.useMemo)(()=>{y.forEach((e,t)=>y.set(t,!1))},[n]),r.useEffect(()=>{n||y.size||!o||o()},[n]),"popLayout"===d&&(e=(0,t.jsx)(p,{isPresent:n,anchorX:u,anchorY:m,root:h,children:e})),(0,t.jsx)(s.PresenceContext.Provider,{value:w,children:e})};function f(){return new Map}var h=e.i(64978);let y=e=>e.key||"";function g(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let v=({children:e,custom:s,initial:o=!0,onExitComplete:l,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:p="left",anchorY:f="top",root:v})=>{let[w,b]=(0,h.usePresence)(u),k=(0,r.useMemo)(()=>g(e),[e]),A=u&&!w?[]:k.map(y),x=(0,r.useRef)(!0),D=(0,r.useRef)(k),S=(0,i.useConstant)(()=>new Map),P=(0,r.useRef)(new Set),[C,_]=(0,r.useState)(k),[M,O]=(0,r.useState)(k);(0,n.useIsomorphicLayoutEffect)(()=>{x.current=!1,D.current=k;for(let e=0;e<M.length;e++){let t=y(M[e]);A.includes(t)?(S.delete(t),P.current.delete(t)):!0!==S.get(t)&&S.set(t,!1)}},[M,A.length,A.join("-")]);let L=[];if(k!==C){let e=[...k];for(let t=0;t<M.length;t++){let r=M[t],a=y(r);A.includes(a)||(e.splice(t,0,r),L.push(r))}return"wait"===d&&L.length&&(e=L),O(g(e)),_(k),null}let{forceRender:T}=(0,r.useContext)(a.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:M.map(e=>{let r=y(e),a=(!u||!!w)&&(k===M||A.includes(r));return(0,t.jsx)(m,{isPresent:a,initial:(!x.current||!!o)&&void 0,custom:s,presenceAffectsLayout:c,mode:d,root:v,onExitComplete:a?void 0:()=>{if(P.current.has(r)||(P.current.add(r),!S.has(r)))return;S.set(r,!0);let e=!0;S.forEach(t=>{t||(e=!1)}),e&&(T?.(),O(D.current),u&&b?.(),l&&l())},anchorX:p,anchorY:f,children:e},r)})})};e.s(["AnimatePresence",()=>v],88653)},64030,e=>{"use strict";let t=(0,e.i(75254).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>t],64030)},71930,e=>{"use strict";let t=(0,e.i(75254).default)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);e.s(["Bookmark",()=>t],71930)},1960,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(46932),i=e.i(88653);let n=["#00E5CC","#FF6B47","#FFD93D","#6BCB77","#4D96FF"];e.s(["default",0,({isActive:e,duration:s=3e3})=>{let[o,l]=(0,r.useState)([]);return(0,r.useEffect)(()=>{if(e){l(Array.from({length:50},(e,t)=>({id:t,x:100*Math.random(),color:n[Math.floor(Math.random()*n.length)],delay:.5*Math.random(),rotation:360*Math.random()})));let e=setTimeout(()=>l([]),s);return()=>clearTimeout(e)}},[e,s]),(0,t.jsx)(i.AnimatePresence,{children:o.map(e=>(0,t.jsx)(a.motion.div,{className:"fixed pointer-events-none z-50",style:{left:`${e.x}%`,top:-20},initial:{y:0,opacity:1,rotate:0},animate:{y:window.innerHeight+100,opacity:[1,1,0],rotate:e.rotation+720},exit:{opacity:0},transition:{duration:2.5,delay:e.delay,ease:"easeOut"},children:(0,t.jsx)("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:e.color}})},e.id))})}])},8402,e=>{"use strict";let t=(0,e.i(75254).default)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);e.s(["Ticket",()=>t],8402)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},27510,e=>{e.v(t=>Promise.all(["static/chunks/54ab083194d7bfbe.js"].map(t=>e.l(t))).then(()=>t(48323)))}]);